{"meta":{"title":"èŠ±é¹¿","subtitle":"èŠ±é¹¿","description":"èŠ±é¹¿,åšå®¢","author":"èŠ±é¹¿","url":"https://zouhualu.github.io","root":"/"},"pages":[{"title":"","date":"2025-12-26T06:23:48.625Z","updated":"2025-09-16T14:48:41.412Z","comments":false,"path":"baidu_verify_code-TmkkRxX4ps.html","permalink":"https://zouhualu.github.io/baidu_verify_code-TmkkRxX4ps.html","excerpt":"","text":"676194d86471561a70b8026338973ebc"},{"title":"about","date":"2021-09-07T07:20:04.000Z","updated":"2025-11-24T07:59:38.642Z","comments":false,"path":"about/index.html","permalink":"https://zouhualu.github.io/about/index.html","excerpt":"","text":"å¥½å¥½åƒé¥­ï¼Œå¥½å¥½è¿åŠ¨ï¼Œå¥½å¥½ç¡è§‰ğŸ¥³"},{"title":"è‡ªæˆ‘ç®¡ç†","date":"2025-12-26T06:23:48.625Z","updated":"2025-12-11T11:08:43.134Z","comments":false,"path":"personal/index.html","permalink":"https://zouhualu.github.io/personal/index.html","excerpt":"","text":".article-directory { max-width: 800px; margin: 0 auto; padding: 40px 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; } .article-header { text-align: center; margin-bottom: 60px; padding-bottom: 30px; border-bottom: 2px solid #e5e7eb; } .article-header h1 { font-size: 2.5rem; font-weight: 700; color: #1f2937; margin-bottom: 20px; letter-spacing: -0.5px; } .article-header blockquote { font-size: 1.125rem; color: #6b7280; font-style: italic; margin: 0; padding: 0; border: none; } .articles-section { margin-bottom: 40px; } .articles-section h2 { font-size: 1.5rem; font-weight: 600; color: #374151; margin-bottom: 30px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb; } .articles-list { display: flex; flex-direction: column; gap: 20px; } .article-item { padding: 24px; background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%); border-radius: 12px; border-left: 4px solid #3b82f6; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); transition: all 0.3s ease; } .article-item:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); } .article-content { display: flex; align-items: flex-start; gap: 16px; } .article-number { flex-shrink: 0; width: 48px; height: 48px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.25rem; box-shadow: 0 4px 6px rgba(59, 130, 246, 0.2); } .article-info { flex: 1; } .article-info h3 { margin: 0 0 8px 0; font-size: 1.125rem; font-weight: 600; } .article-info h3 a { color: #1f2937; text-decoration: none; transition: color 0.2s ease; } .article-info h3 a:hover { color: #3b82f6; } .article-meta { margin: 0; font-size: 0.875rem; color: #6b7280; } .article-tag { display: inline-block; padding: 2px 8px; background: #dbeafe; color: #1e40af; border-radius: 4px; font-size: 0.75rem; margin-right: 8px; } .article-date { color: #9ca3af; } .article-footer { margin-top: 60px; padding-top: 30px; border-top: 1px solid #e5e7eb; text-align: center; color: #9ca3af; font-size: 0.875rem; } .article-footer p { margin: 0; } è‡ªæˆ‘ç®¡ç† \"æ²¡æœ‰è®°å½•ï¼Œå°±æ²¡æœ‰å‘ç”Ÿ\" æ–‡ç« ç›®å½• 01 ã€é€å­—ç¨¿ã€‘æ–¹ä¸‰æ–‡å¯¹è¯æ®µæ°¸å¹³ï¼šèƒ½å¤Ÿåšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…å¾ˆé‡è¦ å¯¹è¯ 2025-11-16 02 ã€ŠèŠ³åã€‹ä¸Š çº¢è‰² 2025-11-25 æŒç»­æ›´æ–°ä¸­..."}],"posts":[{"title":"2025å¹´å¹´åº¦æ€»ç»“","slug":"2025å¹´å¹´åº¦æ€»ç»“","date":"2025-12-31T02:14:48.000Z","updated":"2025-12-31T09:44:48.116Z","comments":true,"path":"20251231/2025å¹´å¹´åº¦æ€»ç»“/","permalink":"https://zouhualu.github.io/20251231/2025%E5%B9%B4%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/","excerpt":"","text":"æ—¥å­åƒæ˜¯æŒ‰åˆ°äº†å¿«è¿›é”®ï¼Œä¸çŸ¥ä¸è§‰æ¥åˆ°äº†2025å¹´çš„æœ€åä¸€å¤©ã€‚ 2025å¹´è¿™ä¸€å¹´ç›¸è¾ƒäºä»¥å¾€å¯¹æˆ‘æ¥è¯´ç®—æ˜¯è½»æ¾çš„ä¸€å¹´ï¼Œç°åœ¨æ¥åšä¸ªå›é¡¾æ€»ç»“å§ã€‚ å·¥ä½œä»Šå¹´å–œæ gap 3 ä¸ªæœˆï¼ ä¸ŠåŠå¹´ä¸€ç›´å°±æ˜¯åš A å…¬å¸çš„éœ€æ±‚ï¼Œå…¶å®å·¥ä½œä¸éš¾è€Œä¸”åˆ°å“ªåšéƒ½æ˜¯åšï¼Œè®©äººçƒ¦çš„å°±æ˜¯æ‰€å¤„çš„æ°›å›´å’Œå…¬å¸æ–‡åŒ–ã€‚A å…¬å¸å·²ç»é™·å…¥äº†â€œæ­»æµ·æ•ˆåº”â€ï¼Œæ•´ä½“æŠ€æœ¯æ°´å¹³ä½ï¼Œé¢†å¯¼èƒ½åŠ›ä¸è¡Œç”©é”…èƒ½åŠ›ä¸€æµï¼Œä¸åœçš„æ‹›äººåˆä¸åœçš„è£äººï¼Œä½†æ˜¯å…¬å¸é‡Œçš„ä¸€äº›èµ„å†è€çš„è€æ²¹æ¡å°±æ˜¯æ¢ä¸æ‰ï¼Œè¿™äº›è€æ²¹æ¡ä¸æ¸…ç†æ‰çš„è¯ï¼Œä¸€åˆ‡åªæ˜¯æ¢æ±¤ä¸æ¢è¯ç½¢äº†ï¼Œå‡ºé—®é¢˜ä¹Ÿæ˜¯è¿Ÿæ—©çš„ã€‚ å¿å—äº†å¥½ä¹…ç»ˆäºåœ¨ 7 æœˆä»½æ‹¿åˆ°è£å‘˜åé¢ï¼Œä¹Ÿç®—æ˜¯æˆ‘çš„ç²¾ç¥æŸå¤±è´¹äº†ï¼Œå¥½åœ¨åé¢èµ”å¿è°ˆå¾—å¾ˆé¡ºåˆ©ï¼Œäººäº‹é—®æˆ‘æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Œæœ¬æ¥æƒ³åæ§½æŒ‡å‡ºé—®é¢˜çš„ï¼Œæƒ³äº†æƒ³ä¸€åˆ«ä¸¤å®½ï¼Œå¥½èšå¥½æ•£å§ï¼ ä»å¤§å­¦æ¯•ä¸šåˆ°ä»Šå¹´å·¥ä½œä¹Ÿæœ‰ 6 å¹´å¤šäº†ï¼Œä»æ¥æ²¡æœ‰ gap è¿‡ï¼Œè¿™æ¬¡ç¦»èŒä¸åƒæ˜¯ä»¥å‰é‚£æ ·æ€¥ç€æŠ•ç®€å†ï¼Œæˆ‘æœ‰æ„çš„æ”¾æ…¢é€Ÿåº¦ï¼Œäº«å—ç”Ÿæ´»ã€‚ gap çš„ç¬¬ä¸‰ä¸ªæœˆå¼€å§‹å¼€å§‹æŠ•ç®€å†ï¼Œæ²¡æœ‰æµ·æŠ•ï¼Œé’ˆå¯¹åœ°ç†ä½ç½®ã€äº¤é€šã€å…¬å¸ä¸šåŠ¡ï¼ŒæŒ‘é€‰çš„æŠ•äº†ä¸€æ‰¹ç®€å†ï¼Œæ–­æ–­ç»­ç»­çš„æœ‰é¢è¯•é‚€çº¦äº†ã€‚ä¹ŸæŠ•äº†ä¸€äº›å¤–åŒ…å²—ä½ï¼Œå¥½ä¹…æ²¡é¢è¯•äº†ï¼Œåªæ˜¯æƒ³é¢è¯•ä¸€ä¸‹æ‰¾æ‰¾æ„Ÿè§‰ã€‚ æ—¶éš”ä¸‰å¹´çš„é¢è¯•ç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯å¸‚åœºç¯å¢ƒç¡®å®å˜åŒ–å¾ˆå¤§ï¼Œé¢è¯•æœºä¼šæ²¡æœ‰ä»¥å‰å¤šäº†ï¼Œç°åœ¨é¢è¯•å®˜ä»ç„¶çˆ±é—®å…«è‚¡æ–‡ï¼Œç¨å¾®å¥½ä¸€ç‚¹çš„å…¬å¸å…«è‚¡æ–‡é—®å®Œåä¼šé—®å‡ ä¸ªåœºæ™¯é¢˜é—®é¢˜ï¼Œå†é«˜çº§ä¸€ç‚¹çš„å…¬å¸æ¯”å¦‚ç¾å›¢ï¼Œé—®äº†æˆ‘ç®—æ³•é¢˜ã€‚ åé¢ä¹Ÿé¡ºåˆ©çš„æ‹¿åˆ°äº†ä¸€ä»½æ»¡æ„çš„ offerï¼Œä¸çŸ¥ä¸è§‰å¹²äº†ä¹Ÿæœ‰ä¸¤ä¸ªæœˆäº†ã€‚ æ€»ä¹‹æˆ‘è®¤ä¸ºå°±ç®—åœ¨å·¥ä½œä¸­ä¹Ÿè¦ä¿ç•™èƒ½éšæ—¶å‡ºå»é¢è¯•çš„æœ¬é¢†ï¼Œç»ƒå¥½å…«è‚¡æ–‡ï¼Œé‚£ä¹ˆ 60% çš„èƒœç‡å°±æœ‰äº†ã€‚ ç°åœ¨å¼€å‘æœ‰äº† AI çš„åŠ æŒï¼Œå†ç»“åˆç°åœ¨çš„å¸‚åœºç¯å¢ƒï¼Œæˆ‘è®¤ä¸ºæŠ€èƒ½å¹¿åº¦æ¯”æ·±åº¦æ›´åŠ é‡è¦ï¼Œå¸‚åœºä¸Šä¸éœ€è¦é‚£ä¹ˆå¤šçš„äººï¼Œæœ‰äº†æŠ€èƒ½å¹¿åº¦æˆ‘ä»¬å¯ä»¥è€ƒè™‘è‡ªå·±å»åšä¸€äº›äº‹æƒ…ã€‚ å‰¯ä¸šæˆ‘è¿è¥çš„å°çº¢ä¹¦è´¦å·ä¹Ÿåœäº†ä¸€é˜µå­ï¼Œåæ¥æœ‰å°ä¼™ä¼´éœ€è¦å°±å€Ÿç»™å¥¹è¿è¥äº†ï¼Œç›®å‰è‡ªåª’ä½“ä¸å¦‚ä»¥å‰å¥½åšäº†ï¼Œåˆ›ä½œè¶Šæ¥è¶Šå·ï¼Œå¹³å°ç›‘ç®¡ä¹Ÿè¶Šæ¥è¶Šä¸¥æ ¼ï¼Œä¸è¿‡æˆ‘ä»¥åå¤§æ¦‚ç‡è¿˜ä¼šåšæ–°çš„èµ›é“çš„è´¦å·ï¼Œå› ä¸ºæµé‡å°±æ˜¯é’±ã€‚ ä¹‹å‰å­¦çš„ golang åˆå¿˜å¾—å·®ä¸å¤šäº†ï¼Œåé¢è¿˜æ˜¯è¦å·©å›ºä¸€ä¸‹ï¼Œç„¶åè¿˜è¦å¤šå­¦ä¸€äº› AI ç›¸å…³æŠ€èƒ½ã€‚ å¥åº·ä»Šå¹´è¿™ä¸€å¹´æ²¡æœ‰æ„Ÿå†’å‘çƒ§è¿‡ï¼Œä»è®°å¾—å»å¹´åˆæ˜¯å‘çƒ­ï¼Œåˆæ˜¯æ‹‰è‚šå­æ¥æ¥å›å›è·‘äº†å‡ æ¬¡åŒ»é™¢ï¼Œæ’é˜ŸæŠ½è¡€ç­‰å«å·ä¸€å¥—æµç¨‹ä¸‹æ¥æ„Ÿå†’éƒ½å·²ç»å¥½çš„å·®ä¸å¤šäº†ã€‚ ä»Šå¹´10 æœˆä»½å‡ºå»éª‘è½¦è¢«ç‹—å’¬äº†ä¸€å£ï¼Œæ‰“äº†è¡€æ¸…å’Œç–«è‹—èŠ±äº†ä¸‰åƒå¤šï¼Œç‹—ä¸»äººåœ¨è­¦å¯Ÿçš„è°ƒè§£ä¸‹ä¹Ÿåªèµ”äº†ä¸¤åƒå¤šï¼Œæƒ³ç€è‡ªå·±è¿˜æœ‰å…¶ä»–äº‹æ€»ä¸èƒ½ä¸€ç›´å’Œä»–è€—ç€ä¹Ÿå°±æ¥å—äº†è¿™ä¸ªèµ”å¿ï¼Œå®åœ¨æ˜¯æ— å¦„ä¹‹ç¾ã€‚ ä¸‹åŠå¹´åšäº†ä¸ªä½“æ£€ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå°±æ˜¯è¡€å‹æœ‰ç‚¹åé«˜ï¼Œè¿˜æ˜¯éœ€è¦åŠ å¼ºè¿åŠ¨å’Œæ—©ç¡æ‰è¡Œã€‚ ç„¦è™‘ç—‡ä¹Ÿæ¯”å»å¹´å¥½å¤šäº†ï¼Œæ²¡æœ‰é‚£ä¹ˆå½±å“æ­£å¸¸ç”Ÿæ´»ï¼Œå¹´åˆçš„æ—¶å€™çœ‹äº†å¾ˆå¤šç„¦è™‘ç—‡ç›¸å…³çš„ä¹¦å’Œè§†é¢‘ï¼Œå°±åƒå¼ æœé˜³è¯´çš„é‚£æ ·ï¼Œå¸¦ç€ç—‡çŠ¶å»åšäº‹ï¼Œä¸çŸ¥ä¸è§‰çš„å°±æ„Ÿå—ä¸åˆ°äº†ã€‚è¿™ä¸ªå¹´å¤´ä¸ç®¡æ˜¯è°ï¼Œå¤šå¤šå°‘å°‘éƒ½ä¼šå¸¦ç€ç„¦è™‘çš„ã€‚ ç”Ÿæ´»å°±ä¸åœ¨è¿™é‡Œå†™äº†ã€‚ã€‚ã€‚","categories":[{"name":"ç”Ÿæ´»éšç¬”","slug":"ç”Ÿæ´»éšç¬”","permalink":"https://zouhualu.github.io/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"https://zouhualu.github.io/tags/%E6%97%A5%E5%B8%B8/"},{"name":"äººç”Ÿç®¡ç†","slug":"äººç”Ÿç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E4%BA%BA%E7%94%9F%E7%AE%A1%E7%90%86/"}]},{"title":"claude code é€šè¿‡ MCP è¿æ¥ figma è®¾è®¡ç¨¿å®ç°é¡µé¢å¤åˆ»","slug":"claude-code-é€šè¿‡-MCP-è¿æ¥-figma-è®¾è®¡ç¨¿å®ç°é¡µé¢å¤åˆ»","date":"2025-12-16T03:26:31.000Z","updated":"2025-12-16T03:49:44.838Z","comments":true,"path":"20251216/claude-code-é€šè¿‡-MCP-è¿æ¥-figma-è®¾è®¡ç¨¿å®ç°é¡µé¢å¤åˆ»/","permalink":"https://zouhualu.github.io/20251216/claude-code-%E9%80%9A%E8%BF%87-MCP-%E8%BF%9E%E6%8E%A5-figma-%E8%AE%BE%E8%AE%A1%E7%A8%BF%E5%AE%9E%E7%8E%B0%E9%A1%B5%E9%9D%A2%E5%A4%8D%E5%88%BB/","excerpt":"","text":"figmaæ–‡æ¡£ï¼šhttps://help.figma.com/hc/en-us/articles/32132100833559-Guide-to-the-Figma-MCP-server figma mcp æœåŠ¡å¯ä»¥è·å–åˆ°figmaè®¾è®¡ç¨¿å…ƒç´ çš„ä½ç½®ã€å°ºå¯¸ã€é¢œè‰²ã€å­—ä½“ç­‰ç»“æ„åŒ–ä¿¡æ¯ï¼Œ å¯æœ€å¤§åŒ–å®ç°é¡µé¢çš„å¤åˆ»ï¼Œå†åŠ ä¸Š claude code çš„æ”¯æŒï¼Œèƒ½æå¤§çš„å‡å°‘å‰ç«¯å¼€å‘çš„å·¥ä½œé‡ã€‚ æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸€ç›´ä½¿ç”¨çš„æ˜¯ Claude codeï¼Œä¸‹é¢æ˜¯ Claude code é€šè¿‡ MCP è¿æ¥ figma è®¾è®¡ç¨¿å®ç°é¡µé¢å¤åˆ»çš„æµç¨‹ï¼š 1. å°† figma mcp æœåŠ¡æ·»åŠ åˆ° claude code ä¸­å¹¶è¿æ¥å¯åŠ¨ claude codeï¼Œåœ¨claude code ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† Figma MCP æ·»åŠ åˆ° Claude ä»£ç ä¸­ï¼š claude mcp add --transport http figma https://mcp.figma.com/mcp åœ¨ç»ˆç«¯è¾“å…¥ï¼š/mcpï¼Œå¯ä»¥æŸ¥çœ‹åˆ° figma mcp æœåŠ¡å·²ç»æ·»åŠ æˆåŠŸäº†ï¼Œç‚¹å‡»enterå»ç™»é™†ï¼Œä»–ä¼šè·³è½¬åˆ°ä¸€ä¸ªfigmaé¡µé¢ï¼Œæˆæƒé€šè¿‡å°±è¡Œäº† è¿æ¥æˆåŠŸçš„æ•ˆæœ 2. å°†ç›®æ ‡é¡µé¢å‘Šè¯‰ claude codeå¼€å¯ä¸€ä¸ªæ–°çš„ claude ç»ˆç«¯ï¼Œä¸Šä¸€ä¸ªè¿æ¥ figma mcp çš„ç»ˆç«¯ä¸èƒ½å…³æ‰ï¼Œå…³æ‰ claude è¿˜æ˜¯è¯»ä¸åˆ° figma é¡µé¢ä¿¡æ¯çš„ åœ¨ figma è®¾è®¡ç¨¿é¡µé¢é€‰ä¸­ç›®æ ‡å…ƒç´ ï¼Œå³é”®é€‰ä¸­å¤åˆ¶ï¼Œå¦‚å›¾ åœ¨ç»ˆç«¯ç›´æ¥ç²˜è´´ï¼Œç„¶åè®© claude code å®ç°è¿™ä¸ªé¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° claude code æ˜¯èƒ½å¤Ÿè¯»å–è¿™ä¸ªé“¾æ¥çš„ å®Œ","categories":[{"name":"AI ä¸å·¥å…·","slug":"AI-ä¸å·¥å…·","permalink":"https://zouhualu.github.io/categories/AI-%E4%B8%8E%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://zouhualu.github.io/tags/AI/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"ç¼–ç¨‹è¾…åŠ©","slug":"ç¼–ç¨‹è¾…åŠ©","permalink":"https://zouhualu.github.io/tags/%E7%BC%96%E7%A8%8B%E8%BE%85%E5%8A%A9/"}]},{"title":"AIè¾…åŠ©ç¼–ç¨‹æ•™ç¨‹-AIä¸­è½¬ç«™-å¯ä½¿ç”¨ claudeã€ChatGPTã€gemini","slug":"AIè¾…åŠ©ç¼–ç¨‹æ•™ç¨‹-AIä¸­è½¬ç«™-å¯ä½¿ç”¨-claudeã€ChatGPTã€gemini","date":"2025-11-19T08:17:42.000Z","updated":"2025-11-25T06:37:06.945Z","comments":true,"path":"20251119/AIè¾…åŠ©ç¼–ç¨‹æ•™ç¨‹-AIä¸­è½¬ç«™-å¯ä½¿ç”¨-claudeã€ChatGPTã€gemini/","permalink":"https://zouhualu.github.io/20251119/AI%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E6%95%99%E7%A8%8B-AI%E4%B8%AD%E8%BD%AC%E7%AB%99-%E5%8F%AF%E4%BD%BF%E7%94%A8-claude%E3%80%81ChatGPT%E3%80%81gemini/","excerpt":"","text":"Claude Code ä¸­æ–‡æ•™ç¨‹ï¼šhttps://claudecode.io/ ccNexusæ™ºèƒ½ç«¯ç‚¹è½®æ¢ä»£ç†ï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰ï¼šhttps://github.com/lich0821/ccNexus AIä¸­è½¬ç«™ A. https://api.codemirror.codes/register?aff=I7WK ï¼ˆæ¨èè¿™ä¸ªï¼Œæ¥å£ç¨³å®šï¼Œæ¨èç ï¼šhttps://api.codemirror.codes/register?aff=HBwyï¼‰ B. https://agentrouter.org/register?aff=8w86 (éœ€æ¢¯å­) C. https://anyrouter.top/register?aff=bXzX ï¼ˆç¨³å®šç»ç”¨ï¼Œä½†æ— 4.5ï¼‰ D. https://api.dev88.tech/register?aff=W9aN ï¼ˆç¨³å®šï¼‰ E. https://api.sxxe.net/register?aff=nFFm ï¼ˆé¡»linux.doç™»å½•ï¼‰ AIä¸­è½¬ç«™æ•™ç¨‹(ä»¥ A ä¸ºä¾‹)ï¼ˆmacos ç‰ˆæœ¬ï¼‰ å®‰è£…é«˜ç‰ˆæœ¬ nodejsï¼ˆæˆ‘ç”¨çš„ 24.8.0 ï¼‰ ç»ˆç«¯æ‰§è¡Œ 1curl -fsSL https://gitee.com/CoderRouter/scripts/raw/master/install_claude.sh | sed &#x27;s/\\r$//&#x27; | sh å†™åœ¨ä¹‹å‰å®‰è£…çš„ Claude Code åŒ… 1npm uninstall -g @anthropic-ai/claude-code å®‰è£…æœ€æ–° Claude Code åŒ… 1npm install -g @anthropic-ai/claude-code ä»ç½‘ç«™æ§åˆ¶å°è·å–å¯†é’¥ åˆ›å»º json æ–‡ä»¶ 1touch ~/.claude/settings.json ç¼–è¾‘ json æ–‡ä»¶ 1open -e ~/.claude/settings.json å°†ä»¥ä¸‹å†…å®¹ç²˜è´´è¿›å» 123456 &#123; &quot;env&quot;: &#123; &quot;ANTHROPIC_BASE_URL&quot;: &quot;https://api.codemirror.codes/&quot;, &quot;ANTHROPIC_AUTH_TOKEN&quot;: &quot;ä½ çš„å¯†é’¥&quot; &#125;&#125; åœ¨é¡¹ç›®é‡Œä½¿ç”¨ Claude Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶ï¼Œåœ¨æ§åˆ¶å°é‡Œè¾“å…¥ claudeï¼Œå°±å¯ä»¥å¼€å§‹æ„‰å¿«çš„ç¼–ç¨‹äº†ï½","categories":[{"name":"AI ä¸å·¥å…·","slug":"AI-ä¸å·¥å…·","permalink":"https://zouhualu.github.io/categories/AI-%E4%B8%8E%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://zouhualu.github.io/tags/AI/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"ç¼–ç¨‹è¾…åŠ©","slug":"ç¼–ç¨‹è¾…åŠ©","permalink":"https://zouhualu.github.io/tags/%E7%BC%96%E7%A8%8B%E8%BE%85%E5%8A%A9/"}]},{"title":"Vite5åŸºç¡€è¿›é˜¶å’ŒåŸç†å‰–æ","slug":"Vite5åŸºç¡€è¿›é˜¶å’ŒåŸç†å‰–æ","date":"2025-04-21T08:42:21.000Z","updated":"2025-11-25T06:35:32.832Z","comments":true,"path":"20250421/Vite5åŸºç¡€è¿›é˜¶å’ŒåŸç†å‰–æ/","permalink":"https://zouhualu.github.io/20250421/Vite5%E5%9F%BA%E7%A1%80%E8%BF%9B%E9%98%B6%E5%92%8C%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90/","excerpt":"","text":"Vite5 çš„æ ¸å¿ƒå’ŒåŸºç¡€ä½¿ç”¨æ ¸å¿ƒè®¾è®¡ æœ¨å—åŒ–è§„èŒƒæ¼”è¿›ï¼šcommonjs -&gt; amd -&gt; cmd -&gt; umd -&gt; esmodule bundleless æ¨¡å¼ï¼Œå–å†³äºæµè§ˆå™¨åŸç”ŸESModuleçš„æ”¯æŒ æœ¬åœ°å¼€å‘ esbuildï¼Œçº¿ä¸Šæ„å»º rollup åŸºæœ¬ä½¿ç”¨ è„šæ‰‹æ¶åˆå§‹åŒ–é¡¹ç›® å·¥ç¨‹åŒ–ã€è§„èŒƒã€è‡ªåŠ¨åŒ– é…ç½® Vite ä½“ç³»ã€‚å“ªäº›å†…å®¹éœ€è¦æ‰“åŒ…ï¼Œéœ€è¦ç¼–è¯‘ä»€ä¹ˆå†…å®¹ react é¡¹ç›®ï¼š@vitejs/plugin-react vue é¡¹ç›®ï¼š@vitejs/plugin-vue å®˜æ–¹æ–‡æ¡£ï¼Œ@vitejs/plugin-xxx unbundle vite-awesome åˆå§‹åŒ–é¡¹ç›®pnpm create vite é¡¹ç›®å --template [react-ts/vue-ts] vite.config.tsé…ç½® plugins resolve server build manualChunks é™æ€æ‹†åŒ… æ¨¡å—æ‡’åŠ è½½ 123import(&#x27;./src/utils&#x27;).then((res) =&gt; &#123; console.log(res)&#125;) ä¸Šé¢ä»£ç ä¼šè¢«å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ define é…ç½®é¡¹ç”¨äºåœ¨ç¼–è¯‘æ—¶å®šä¹‰å…¨å±€å¸¸é‡ï¼Œå®ƒä¼šåœ¨ä»£ç è¢«æ‰“åŒ…æ„å»ºçš„è¿‡ç¨‹ä¸­ï¼Œå°†ä½ æŒ‡å®šçš„æ ‡è¯†ç¬¦æ›¿æ¢ä¸ºå¯¹åº”çš„å€¼ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®©ä½ å¯ä»¥åœ¨æºä»£ç ä¸­ç›´æ¥ä½¿ç”¨ä¸€äº›â€œå…¨å±€å˜é‡â€ï¼Œè€Œè¿™äº›å˜é‡ä¼šåœ¨æ„å»ºé˜¶æ®µè¢«é™æ€æ›¿æ¢ä¸ºå…·ä½“å†…å®¹ã€‚ æ ¸å¿ƒä½œç”¨ æ³¨å…¥å…¨å±€å¸¸é‡ï¼šåœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨é¢„å®šä¹‰çš„å¸¸é‡ï¼ˆå¦‚ç¯å¢ƒæ ‡è¯†ã€API åœ°å€ç­‰ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥ã€‚ ç¼–è¯‘æ—¶æ›¿æ¢ï¼šæ›¿æ¢å‘ç”Ÿåœ¨æ„å»ºé˜¶æ®µï¼Œè€Œéè¿è¡Œæ—¶ï¼Œä¸ä¼šå¢åŠ è¿è¡Œæ—¶å¼€é”€ã€‚ æ¡ä»¶ç¼–è¯‘ï¼šå¯ä»¥æ ¹æ®ä¸åŒç¯å¢ƒå®šä¹‰ä¸åŒçš„å€¼ï¼Œå®ç°ä»£ç çš„æ¡ä»¶æ‰§è¡Œï¼ˆå¦‚å¼€å‘ç¯å¢ƒæ‰“å°æ—¥å¿—ï¼Œç”Ÿäº§ç¯å¢ƒç§»é™¤æ—¥å¿—ï¼‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697import &#123;defineConfig&#125; from &#x27;vite&#x27;import react from &#x27;@vitejs/plugin-react&#x27;export default defineConfig(&#123; plugins: [react()], // æ¨¡å—åŒ–è§£æ resolve: &#123; // åˆ«å alias: &#123; &quot;@&quot;: &quot;src&quot; &#125; &#125;, // æœåŠ¡é…ç½® server: &#123; port: 3000, open: true, // è·¨åŸŸé…ç½® proxy: &#123; &#x27;/api&#x27;: &#123; target: &#x27;https://www.baidu.com&#x27;, changeOrigin: true, rewrite: (path) =&gt; path.replace(/^\\/api/, &#x27;&#x27;) &#125; &#125; &#125;, // æ„å»ºé…ç½® build: &#123; outDir: &#x27;dist&#x27;, // æ‰“åŒ…è¾“å‡ºç›®å½• assetsDir: &#x27;assets&#x27;, // é™æ€èµ„æºè¾“å‡ºç›®å½• minify: &#x27;terser&#x27;, // å‹ç¼©ï¼Œé»˜è®¤æ˜¯å‹ç¼©çš„, ä¹Ÿå¯ä»¥è®¾ç½®ä¸º &#x27;esbuild&#x27; sourcemap: true, // ç”Ÿæˆ sourcemap æ–‡ä»¶ï¼Œå¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒçš„è¯ï¼Œå¯ä»¥ç”¨@sentry/vite-plugin æ’ä»¶ä¸Šä¼  sourcemap æ–‡ä»¶ï¼Œåœ¨ sentry å¹³å°æŸ¥çœ‹æºä»£ç ã€‚ terserOptions: &#123; // å‹ç¼©é€‰é¡¹ compress: &#123; drop_console: true, // ç§»é™¤ console drop_debugger: true, // ç§»é™¤ debugger &#125; &#125;, // æ„å»ºäº§ç‰©ä¼˜åŒ–ï¼Œä»£ç åˆ†å‰² rollupOptions: &#123; // å…¥å£æ–‡ä»¶é…ç½® input: &#123; main: resolve(__dirname, &#x27;index.html&#x27;), // å…¥å£æ–‡ä»¶ nested: resolve(__dirname, &#x27;nested/index.html&#x27;), // åµŒå¥—å…¥å£æ–‡ä»¶ &#125;, output: &#123; // æ‰‹åŠ¨ä»£ç åˆ†å‰² // manualChunks:&#123; // &#x27;react-vendor&#x27;: [&#x27;react&#x27;, &#x27;react-dom&#x27;], // å°† react ç›¸å…³çš„éƒ½æ‰“åˆ°åŒä¸€ä¸ªåŒ…é‡Œ // &#x27;antd-vendor&#x27;: [&#x27;antd&#x27;], // å°† antd ç›¸å…³çš„éƒ½æ‰“åˆ°åŒä¸€ä¸ªåŒ…é‡Œ // &#125; manualChunks(id) &#123; // id æ˜¯æ¨¡å—çš„è·¯å¾„ï¼Œæ ¹æ®è·¯å¾„åŒ¹é…æ¥ä»£ç åˆ†å‰² // æ¯”å¦‚ï¼šnode_modules/react/index.js if (id.includes(&#x27;node_modules&#x27;)) &#123; return id.toString().split(&#x27;node_modules/&#x27;)[1].split(&#x27;/&#x27;)[0].toString() &#125; &#125; &#125; &#125; &#125;, css: &#123; modules: &#123; // ä»…å¯¹ CSS Modules æœ‰æ•ˆï¼šå³æ–‡ä»¶åéœ€åŒ…å« .moduleï¼ˆå¦‚ xxx.module.cssã€xxx.module.scssï¼‰çš„æ ·å¼æ–‡ä»¶æ‰ä¼šåº”ç”¨æ­¤é…ç½®ã€‚ hashPrefix: &#x27;hash&#x27;, &#125; &#125;, define: &#123; IS_PROD: process.env.NODE_ENV === &#x27;production&#x27;, /* * åœ¨ js æˆ–è€…ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼š * if (IS_PROD) &#123; * console.log(&#x27;ç”Ÿäº§ç¯å¢ƒ&#x27;); // ç”Ÿäº§ç¯å¢ƒæ„å»ºæ—¶ï¼Œè¿™é‡Œä¼šè¢«æ›¿æ¢ä¸º true * &#125; else &#123; * console.log(&#x27;å¼€å‘ç¯å¢ƒ&#x27;); // å¼€å‘ç¯å¢ƒæ„å»ºæ—¶ï¼Œè¿™é‡Œä¼šè¢«æ›¿æ¢ä¸º false * &#125; */ &#125;, json: &#123; namedExports: false, // ç¦ç”¨å‘½åå¯¼å‡ºï¼Œé»˜è®¤æ˜¯å¼€å¯çš„ /* * // 1. ä»…æ”¯æŒé»˜è®¤å¯¼å‡º * import data from &#x27;./data.json&#x27;; * console.log(data.name); // æ­£å¸¸è¾“å‡ºï¼š&quot;Vite&quot; * * // 2. å…·åå¯¼å‡ºä¼šæŠ¥é”™ï¼ˆUncaught SyntaxError: The requested module &#x27;./data.json&#x27; does not provide an export named &#x27;name&#x27;ï¼‰ * import &#123; name &#125; from &#x27;./data.json&#x27;; // é”™è¯¯ï¼ * * */ stringify: true, /* * è‹¥è®¾ç½®ä¸º trueï¼Œå¯¼å…¥çš„ JSON ä¼šè¢«è½¬æ¢ä¸º export default JSON.parse(&quot;...&quot;)ï¼Œ * è¿™æ ·ä¼šæ¯”è½¬è¯‘æˆå¯¹è±¡å­—é¢é‡æ€§èƒ½æ›´å¥½ï¼Œå°¤å…¶æ˜¯å½“ JSON æ–‡ä»¶è¾ƒå¤§çš„æ—¶å€™ã€‚ * å¦‚æœè®¾ç½®ä¸º &#x27;auto&#x27;ï¼Œåªæœ‰å½“ æ•°æ®å¤§äº 10kB æ—¶ï¼Œæ‰ä¼šå¯¹æ•°æ®è¿›è¡Œå­—ç¬¦ä¸²åŒ–å¤„ç†ã€‚ * */ &#125;&#125;) vite æ’ä»¶å¼€å‘å‰ç½®å‡†å¤‡ï¼švite-plugin-inspect æ’ä»¶ vite-plugin-inspect æ˜¯ Vite ç”Ÿæ€ä¸­çš„ä¸€ä¸ªå¼€å‘è¾…åŠ©æ’ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯å¯è§†åŒ–åœ°æŸ¥çœ‹ Vite æ„å»ºè¿‡ç¨‹ä¸­çš„æ¨¡å—è½¬æ¢ã€æ’ä»¶æ‰§è¡Œæµç¨‹å’Œä¾èµ–å…³ç³»ï¼Œå¸®åŠ©å¼€å‘è€…è°ƒè¯•å’Œç†è§£Vite çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ã€‚ Vite ä¸ºäº†å°†ç”Ÿæ€çš„æ‰©å……äº¤ç»™å¼€å‘è€…ï¼Œå› æ­¤é‡‡ç”¨äº†æ’ä»¶åŒ–è®¾è®¡æ€æƒ³ï¼Œå®šä¹‰äº†åŸºç¡€æ’ä»¶åŒ–åè®®ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®åè®®å¼€å‘è‡ªå·±çš„æ’ä»¶ï¼Œä»¥æ­¤æ¥ä¸°å¯Œvite ç”Ÿæ€ã€‚ Vite æ’ä»¶çš„æœ¬è´¨æ˜¯å‡½æ•°ï¼Œå‡½æ•°æœ‰è¿”å›å€¼ã€‚ 1234567891011export default function viteHuaLuPlugin() &#123; return &#123; name: &#x27;vite-hua-lu-plugin&#x27;, // æ’ä»¶åç§° // æ’ä»¶æ–¹æ³• // transform(source,id)&#123;&#125; ç”¨äºè½¬æ¢æ–‡ä»¶å†…å®¹ï¼Œid æ˜¯æ–‡ä»¶çš„è·¯å¾„ï¼Œsource æ˜¯æ–‡ä»¶çš„å†…å®¹ transform(source, id) &#123; return source.replace(/hualu/g, &#x27;HUALU&#x27;) // æ›¿æ¢æ‰€æœ‰çš„ hualu ä¸º HUALU &#125; &#125;&#125; 1234567// é…ç½®è‡ªå®šä¹‰æ’ä»¶import &#123;defineConfig&#125; from &#x27;vite&#x27;import viteHuaLuPlugin from &#x27;./viteHuaLuPlugin&#x27;export default defineConfig(&#123; plugins: [viteHuaLuPlugin()],&#125;)","categories":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://zouhualu.github.io/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"},{"name":"Vite","slug":"Vite","permalink":"https://zouhualu.github.io/tags/Vite/"}]},{"title":"React19æ–°ç‰¹æ€§","slug":"React19æ–°ç‰¹æ€§","date":"2025-04-01T06:16:33.000Z","updated":"2025-11-25T06:35:03.740Z","comments":true,"path":"20250401/React19æ–°ç‰¹æ€§/","permalink":"https://zouhualu.github.io/20250401/React19%E6%96%B0%E7%89%B9%E6%80%A7/","excerpt":"","text":"forwardRef çš„å¼ƒç”¨ä¼ ç»Ÿçš„ forwardRef ç”¨æ³•åœ¨ React 19 ä¹‹å‰ï¼ŒforwardRef æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œç”¨äºè®©å­ç»„ä»¶èƒ½å¤Ÿæ¥æ”¶å¹¶è½¬å‘çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ refï¼Œä»è€Œå…è®¸çˆ¶ç»„ä»¶ç›´æ¥è®¿é—®å­ç»„ä»¶ä¸­çš„ DOM å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚ 12345678910111213141516171819202122232425262728293031import React, &#123; useRef, forwardRef &#125; from &#x27;react&#x27;;// React 18 åŠä¹‹å‰ï¼šå¿…é¡»ä½¿ç”¨ forwardRefconst ChildComponent = forwardRef((props, ref) =&gt; &#123; return ( &lt;input ref=&#123;ref&#125; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; /&gt; );&#125;);// çˆ¶ç»„ä»¶ï¼šä½¿ç”¨å­ç»„ä»¶å¹¶ä¼ é€’ refconst ParentComponent = () =&gt; &#123; const inputRef = useRef(null); const focusInput = () =&gt; &#123; // é€šè¿‡ ref ç›´æ¥è®¿é—®å­ç»„ä»¶ä¸­çš„ input å…ƒç´ å¹¶è°ƒç”¨å…¶æ–¹æ³• inputRef.current.focus(); &#125;; return ( &lt;div&gt; &lt;ChildComponent ref=&#123;inputRef&#125; /&gt; &lt;button onClick=&#123;focusInput&#125;&gt;èšç„¦è¾“å…¥æ¡†&lt;/button&gt; &lt;/div&gt; );&#125;;export default ParentComponent; React 19 çš„æ”¹è¿›åœ¨ React 19 ä¸­ï¼Œå®˜ç½‘æ˜¾ç¤º forwardRef å·²è¢«å¼ƒç”¨ã€‚ç°åœ¨æˆ‘ä»¬æ— éœ€å†ç”¨ forwardRef æ¥å°è£…å­ç»„ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨å­ç»„ä»¶çš„ props ä¸­æ¥æ”¶ refã€‚ React 19 çš„æ–°å†™æ³•12345678910111213141516171819202122232425262728293031323334353637383940import React, &#123; useRef &#125; from &#x27;react&#x27;;// React 19ï¼šç›´æ¥åœ¨ props ä¸­æ¥æ”¶ reffunction ChildComponent(&#123; ref, ...props &#125;) &#123; return ( &lt;input ref=&#123;ref&#125; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; &#123;...props&#125; /&gt; );&#125;// æˆ–è€…ä½¿ç”¨è§£æ„function ChildComponent(props) &#123; return ( &lt;input ref=&#123;props.ref&#125; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; /&gt; );&#125;// çˆ¶ç»„ä»¶çš„ä½¿ç”¨æ–¹å¼ä¿æŒä¸å˜const ParentComponent = () =&gt; &#123; const inputRef = useRef(null); const focusInput = () =&gt; &#123; inputRef.current.focus(); &#125;; return ( &lt;div&gt; &lt;ChildComponent ref=&#123;inputRef&#125; /&gt; &lt;button onClick=&#123;focusInput&#125;&gt;èšç„¦è¾“å…¥æ¡†&lt;/button&gt; &lt;/div&gt; );&#125;; æ›´å¤æ‚çš„ç¤ºä¾‹ï¼šé…åˆ useImperativeHandle12345678910111213141516171819202122232425262728293031323334353637383940414243import React, &#123; useRef, useImperativeHandle &#125; from &#x27;react&#x27;;// React 19ï¼šç›´æ¥æ¥æ”¶ refï¼Œæ— éœ€ forwardReffunction CustomInput(&#123; ref, label &#125;) &#123; const inputRef = useRef(null); // è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„æ–¹æ³• useImperativeHandle(ref, () =&gt; (&#123; focus: () =&gt; &#123; inputRef.current.focus(); &#125;, clear: () =&gt; &#123; inputRef.current.value = &#x27;&#x27;; &#125;, getValue: () =&gt; &#123; return inputRef.current.value; &#125; &#125;)); return ( &lt;div&gt; &lt;label&gt;&#123;label&#125;&lt;/label&gt; &lt;input ref=&#123;inputRef&#125; type=&quot;text&quot; /&gt; &lt;/div&gt; );&#125;function App() &#123; const customInputRef = useRef(null); const handleSubmit = () =&gt; &#123; const value = customInputRef.current.getValue(); console.log(&#x27;è¾“å…¥å€¼:&#x27;, value); customInputRef.current.clear(); &#125;; return ( &lt;div&gt; &lt;CustomInput ref=&#123;customInputRef&#125; label=&quot;ç”¨æˆ·åï¼š&quot; /&gt; &lt;button onClick=&#123;handleSubmit&#125;&gt;æäº¤&lt;/button&gt; &lt;/div&gt; );&#125; è¿ç§»æŒ‡å—å¦‚æœä½ çš„é¡¹ç›®éœ€è¦ä»æ—§ç‰ˆæœ¬è¿ç§»åˆ° React 19ï¼š ç®€å•ç»„ä»¶ï¼šç›´æ¥ç§»é™¤ forwardRef åŒ…è£…ï¼Œåœ¨ props ä¸­æ¥æ”¶ ref å¤æ‚ç»„ä»¶ï¼šä¿æŒ useImperativeHandle çš„ä½¿ç”¨ï¼Œåªéœ€ç§»é™¤ forwardRef ç±»å‹å®šä¹‰ï¼ˆTypeScriptï¼‰ï¼šæ›´æ–°ç±»å‹å®šä¹‰ä»¥åŒ…å« ref 1234567891011121314151617181920// React 18import &#123; forwardRef, ForwardedRef &#125; from &#x27;react&#x27;;interface Props &#123; label: string;&#125;const Input = forwardRef&lt;HTMLInputElement, Props&gt;((props, ref) =&gt; &#123; return &lt;input ref=&#123;ref&#125; &#123;...props&#125; /&gt;;&#125;);// React 19interface Props &#123; label: string; ref?: React.Ref&lt;HTMLInputElement&gt;;&#125;function Input(&#123; ref, label, ...props &#125;: Props) &#123; return &lt;input ref=&#123;ref&#125; &#123;...props&#125; /&gt;;&#125; æ–° APIï¼šuse use æ˜¯ React 19 å¼•å…¥çš„ä¸€ä¸ªå…¨æ–° APIï¼Œå®ƒå¯ä»¥è®©ä½ è¯»å–ç±»ä¼¼äº Promise æˆ– Context çš„èµ„æºçš„å€¼ã€‚è¿™æ˜¯ React é¦–ä¸ªå¯ä»¥åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯ä¸­è°ƒç”¨çš„ Hookã€‚ æ ¸å¿ƒç‰¹æ€§ å¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ï¼ˆçªç ´äº† Hooks è§„åˆ™çš„é™åˆ¶ï¼‰ æ”¯æŒè¯»å– Promise æ”¯æŒè¯»å– Context é€šå¸¸æ­é… Suspense å’Œé”™è¯¯è¾¹ç•Œä½¿ç”¨ ä½¿ç”¨åœºæ™¯ä¸€ï¼šè¯»å– Contextuse å¯ä»¥æ›¿ä»£ useContextï¼Œå¹¶ä¸”æ›´åŠ çµæ´»ï¼Œå¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445import &#123; createContext, use &#125; from &#x27;react&#x27;;const ThemeContext = createContext(null);export default function MyApp() &#123; return ( &lt;ThemeContext.Provider value=&quot;dark&quot;&gt; &lt;Form /&gt; &lt;/ThemeContext.Provider&gt; );&#125;function Form() &#123; return ( &lt;Panel title=&quot;Welcome&quot;&gt; &lt;Button show=&#123;true&#125;&gt;Sign up&lt;/Button&gt; &lt;Button show=&#123;false&#125;&gt;Log in&lt;/Button&gt; &lt;/Panel&gt; );&#125;function Panel(&#123; title, children &#125;) &#123; const theme = use(ThemeContext); const className = &#x27;panel-&#x27; + theme; return ( &lt;section className=&#123;className&#125;&gt; &lt;h1&gt;&#123;title&#125;&lt;/h1&gt; &#123;children&#125; &lt;/section&gt; );&#125;function Button(&#123; show, children &#125;) &#123; // é‡ç‚¹ï¼šuse å¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ï¼ if (show) &#123; const theme = use(ThemeContext); const className = &#x27;button-&#x27; + theme; return ( &lt;button className=&#123;className&#125;&gt; &#123;children&#125; &lt;/button&gt; ); &#125; return false;&#125; å¯¹æ¯” useContextï¼š 123456789101112131415// âŒ useContext ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨function Button(&#123; show, children &#125;) &#123; if (show) &#123; const theme = useContext(ThemeContext); // é”™è¯¯ï¼è¿å Hooks è§„åˆ™ return &lt;button&gt;&#123;children&#125;&lt;/button&gt;; &#125;&#125;// âœ… use å¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨function Button(&#123; show, children &#125;) &#123; if (show) &#123; const theme = use(ThemeContext); // æ­£ç¡®ï¼ return &lt;button&gt;&#123;children&#125;&lt;/button&gt;; &#125;&#125; ä½¿ç”¨åœºæ™¯äºŒï¼šè¯»å– Promiseï¼ˆæ•°æ®è·å–ï¼‰use æœ€å¼ºå¤§çš„åŠŸèƒ½æ˜¯å¯ä»¥ç›´æ¥è¯»å– Promiseï¼Œé…åˆ Suspense å®ç°ä¼˜é›…çš„å¼‚æ­¥æ•°æ®åŠ è½½ã€‚ 123456789101112131415161718192021222324252627282930import &#123; use, Suspense &#125; from &#x27;react&#x27;;// æ¨¡æ‹Ÿå¼‚æ­¥æ•°æ®è·å–function fetchUser(userId) &#123; return fetch(`/api/users/$&#123;userId&#125;`) .then(res =&gt; res.json());&#125;function UserProfile(&#123; userPromise &#125;) &#123; // ç›´æ¥è¯»å– Promiseï¼Œç»„ä»¶ä¼šè‡ªåŠ¨ suspend const user = use(userPromise); return ( &lt;div&gt; &lt;h2&gt;&#123;user.name&#125;&lt;/h2&gt; &lt;p&gt;&#123;user.email&#125;&lt;/p&gt; &lt;p&gt;&#123;user.bio&#125;&lt;/p&gt; &lt;/div&gt; );&#125;function App() &#123; const userPromise = fetchUser(1); return ( &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ç”¨æˆ·ä¿¡æ¯...&lt;/div&gt;&#125;&gt; &lt;UserProfile userPromise=&#123;userPromise&#125; /&gt; &lt;/Suspense&gt; );&#125; ä½¿ç”¨åœºæ™¯ä¸‰ï¼šé…åˆ Suspense å’Œ ErrorBoundaryå®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ç®¡ç†ã€‚ 12345678910111213141516171819202122232425262728import &#123; use, Suspense &#125; from &#x27;react&#x27;;import &#123; ErrorBoundary &#125; from &#x27;react-error-boundary&#x27;;function Message(&#123; messagePromise &#125;) &#123; const messageContent = use(messagePromise); return &lt;p&gt;Here is the message: &#123;messageContent&#125;&lt;/p&gt;;&#125;export function MessageContainer(&#123; messagePromise &#125;) &#123; return ( &lt;ErrorBoundary fallback=&#123;&lt;p&gt;âš ï¸ Something went wrong&lt;/p&gt;&#125;&gt; &lt;Suspense fallback=&#123;&lt;p&gt;âŒ› Downloading message...&lt;/p&gt;&#125;&gt; &lt;Message messagePromise=&#123;messagePromise&#125; /&gt; &lt;/Suspense&gt; &lt;/ErrorBoundary&gt; );&#125;// ä½¿ç”¨ç¤ºä¾‹function App() &#123; const messagePromise = fetch(&#x27;/api/message&#x27;) .then(res =&gt; &#123; if (!res.ok) throw new Error(&#x27;Failed to fetch&#x27;); return res.text(); &#125;); return &lt;MessageContainer messagePromise=&#123;messagePromise&#125; /&gt;;&#125; é«˜çº§ç”¨æ³•ï¼šæ¡ä»¶æ•°æ®è·å–123456789101112131415161718192021222324252627282930313233343536import &#123; use, Suspense, useState &#125; from &#x27;react&#x27;;function UserData(&#123; userId &#125;) &#123; // åªåœ¨ userId å­˜åœ¨æ—¶æ‰è·å–æ•°æ® if (!userId) &#123; return &lt;div&gt;è¯·é€‰æ‹©ä¸€ä¸ªç”¨æˆ·&lt;/div&gt;; &#125; // åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ use const user = use(fetchUser(userId)); return ( &lt;div&gt; &lt;h2&gt;&#123;user.name&#125;&lt;/h2&gt; &lt;p&gt;&#123;user.email&#125;&lt;/p&gt; &lt;/div&gt; );&#125;function App() &#123; const [selectedUserId, setSelectedUserId] = useState(null); return ( &lt;div&gt; &lt;select onChange=&#123;(e) =&gt; setSelectedUserId(e.target.value)&#125;&gt; &lt;option value=&quot;&quot;&gt;é€‰æ‹©ç”¨æˆ·&lt;/option&gt; &lt;option value=&quot;1&quot;&gt;ç”¨æˆ· 1&lt;/option&gt; &lt;option value=&quot;2&quot;&gt;ç”¨æˆ· 2&lt;/option&gt; &lt;/select&gt; &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt; &lt;UserData userId=&#123;selectedUserId&#125; /&gt; &lt;/Suspense&gt; &lt;/div&gt; );&#125; å¾ªç¯ä¸­ä½¿ç”¨ use123456789101112131415161718192021222324function PostList(&#123; postIds &#125;) &#123; return ( &lt;ul&gt; &#123;postIds.map(id =&gt; &#123; // åœ¨å¾ªç¯ä¸­ä½¿ç”¨ use const post = use(fetchPost(id)); return ( &lt;li key=&#123;id&#125;&gt; &lt;h3&gt;&#123;post.title&#125;&lt;/h3&gt; &lt;p&gt;&#123;post.content&#125;&lt;/p&gt; &lt;/li&gt; ); &#125;)&#125; &lt;/ul&gt; );&#125;function App() &#123; return ( &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½æ–‡ç« åˆ—è¡¨...&lt;/div&gt;&#125;&gt; &lt;PostList postIds=&#123;[1, 2, 3, 4, 5]&#125; /&gt; &lt;/Suspense&gt; );&#125; use vs useContext vs ä¼ ç»Ÿæ•°æ®è·å– ç‰¹æ€§ use useContext useEffect + useState å¯åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ âœ… âŒ âŒ å¯åœ¨å¾ªç¯ä¸­ä½¿ç”¨ âœ… âŒ âŒ è¯»å– Promise âœ… âŒ éœ€è¦æ‰‹åŠ¨å¤„ç† è¯»å– Context âœ… âœ… âŒ è‡ªåŠ¨ Suspense âœ… âŒ éœ€è¦æ‰‹åŠ¨å®ç° é”™è¯¯å¤„ç† è‡ªåŠ¨ï¼ˆé…åˆ ErrorBoundaryï¼‰ âŒ éœ€è¦æ‰‹åŠ¨å®ç° æ³¨æ„äº‹é¡¹ Promise å¿…é¡»æ˜¯ç¨³å®šçš„ï¼šä¸è¦åœ¨ç»„ä»¶å†…éƒ¨åˆ›å»º Promiseï¼Œåº”è¯¥ä» props æ¥æ”¶æˆ–ä½¿ç”¨ç¼“å­˜ é…åˆ Suspense ä½¿ç”¨ï¼šè¯»å– Promise æ—¶å¿…é¡»åŒ…è£¹åœ¨ Suspense ä¸­ é”™è¯¯è¾¹ç•Œï¼šå»ºè®®é…åˆ ErrorBoundary å¤„ç†é”™è¯¯æƒ…å†µ SSR æ”¯æŒï¼šuse API å®Œå…¨æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ React 19 ActionsActions æ˜¯ React 19 å¼•å…¥çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œç”¨äºå¤„ç†æ•°æ®å˜æ›´æ“ä½œï¼ˆå¦‚è¡¨å•æäº¤ã€API è°ƒç”¨ç­‰ï¼‰ã€‚Actions è‡ªåŠ¨å¤„ç†åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†å’Œä¹è§‚æ›´æ–°ã€‚ ä»€ä¹ˆæ˜¯ ActionsActions æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œç”¨äºç®¡ç†æ•°æ®æäº¤çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼š pending çŠ¶æ€ï¼šè‡ªåŠ¨è·Ÿè¸ªå¼‚æ­¥æ“ä½œçš„è¿›è¡ŒçŠ¶æ€ é”™è¯¯å¤„ç†ï¼šè‡ªåŠ¨æ•è·å’Œå¤„ç†é”™è¯¯ ä¹è§‚æ›´æ–°ï¼šåœ¨è¯·æ±‚å®Œæˆå‰å…ˆæ›´æ–° UI è‡ªåŠ¨é‡ç½®ï¼šè¡¨å•è‡ªåŠ¨é‡ç½® useActionStateuseActionState æ˜¯ç”¨äºç®¡ç† Action çŠ¶æ€çš„æ–° Hookã€‚ åŸºæœ¬ç”¨æ³•123456789101112131415161718192021222324252627282930313233343536373839import &#123; useActionState &#125; from &#x27;react&#x27;;async function updateName(previousState, formData) &#123; const name = formData.get(&#x27;name&#x27;); try &#123; // æ¨¡æ‹Ÿ API è°ƒç”¨ await fetch(&#x27;/api/update-name&#x27;, &#123; method: &#x27;POST&#x27;, body: JSON.stringify(&#123; name &#125;) &#125;); return &#123; success: true, message: &#x27;æ›´æ–°æˆåŠŸï¼&#x27; &#125;; &#125; catch (error) &#123; return &#123; success: false, message: &#x27;æ›´æ–°å¤±è´¥&#x27; &#125;; &#125;&#125;function UpdateNameForm() &#123; const [state, submitAction, isPending] = useActionState(updateName, &#123; success: null, message: &#x27;&#x27; &#125;); return ( &lt;form action=&#123;submitAction&#125;&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; required /&gt; &lt;button type=&quot;submit&quot; disabled=&#123;isPending&#125;&gt; &#123;isPending ? &#x27;æäº¤ä¸­...&#x27; : &#x27;æäº¤&#x27;&#125; &lt;/button&gt; &#123;state.message &amp;&amp; ( &lt;p style=&#123;&#123; color: state.success ? &#x27;green&#x27; : &#x27;red&#x27; &#125;&#125;&gt; &#123;state.message&#125; &lt;/p&gt; )&#125; &lt;/form&gt; );&#125; å®Œæ•´ç¤ºä¾‹ï¼šç”¨æˆ·æ³¨å†Œè¡¨å•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798import &#123; useActionState &#125; from &#x27;react&#x27;;async function registerUser(previousState, formData) &#123; const username = formData.get(&#x27;username&#x27;); const email = formData.get(&#x27;email&#x27;); const password = formData.get(&#x27;password&#x27;); // è¡¨å•éªŒè¯ if (password.length &lt; 6) &#123; return &#123; success: false, errors: &#123; password: &#x27;å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦&#x27; &#125; &#125;; &#125; try &#123; const response = await fetch(&#x27;/api/register&#x27;, &#123; method: &#x27;POST&#x27;, headers: &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125;, body: JSON.stringify(&#123; username, email, password &#125;) &#125;); if (!response.ok) &#123; const error = await response.json(); return &#123; success: false, errors: error &#125;; &#125; const user = await response.json(); return &#123; success: true, user &#125;; &#125; catch (error) &#123; return &#123; success: false, errors: &#123; general: &#x27;æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•&#x27; &#125; &#125;; &#125;&#125;function RegistrationForm() &#123; const [state, submitAction, isPending] = useActionState(registerUser, &#123; success: null, errors: &#123;&#125; &#125;); return ( &lt;form action=&#123;submitAction&#125;&gt; &lt;div&gt; &lt;label htmlFor=&quot;username&quot;&gt;ç”¨æˆ·åï¼š&lt;/label&gt; &lt;input id=&quot;username&quot; name=&quot;username&quot; type=&quot;text&quot; required disabled=&#123;isPending&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label htmlFor=&quot;email&quot;&gt;é‚®ç®±ï¼š&lt;/label&gt; &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; required disabled=&#123;isPending&#125; /&gt; &#123;state.errors?.email &amp;&amp; ( &lt;span className=&quot;error&quot;&gt;&#123;state.errors.email&#125;&lt;/span&gt; )&#125; &lt;/div&gt; &lt;div&gt; &lt;label htmlFor=&quot;password&quot;&gt;å¯†ç ï¼š&lt;/label&gt; &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; required disabled=&#123;isPending&#125; /&gt; &#123;state.errors?.password &amp;&amp; ( &lt;span className=&quot;error&quot;&gt;&#123;state.errors.password&#125;&lt;/span&gt; )&#125; &lt;/div&gt; &lt;button type=&quot;submit&quot; disabled=&#123;isPending&#125;&gt; &#123;isPending ? &#x27;æ³¨å†Œä¸­...&#x27; : &#x27;æ³¨å†Œ&#x27;&#125; &lt;/button&gt; &#123;state.errors?.general &amp;&amp; ( &lt;p className=&quot;error&quot;&gt;&#123;state.errors.general&#125;&lt;/p&gt; )&#125; &#123;state.success &amp;&amp; ( &lt;p className=&quot;success&quot;&gt;æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿ &#123;state.user.username&#125;&lt;/p&gt; )&#125; &lt;/form&gt; );&#125; useActionState å‚æ•°è¯¦è§£1const [state, action, isPending] = useActionState(fn, initialState, permalink?) fn: Action å‡½æ•°ï¼Œæ¥æ”¶ (previousState, formData) å‚æ•° initialState: åˆå§‹çŠ¶æ€ permalinkï¼ˆå¯é€‰ï¼‰: ç”¨äºæ¸è¿›å¢å¼ºçš„ URL è¿”å›å€¼: state: å½“å‰çŠ¶æ€ action: å¯ä»¥ä¼ é€’ç»™è¡¨å•çš„ action å±æ€§ isPending: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ“ä½œæ˜¯å¦æ­£åœ¨è¿›è¡Œ useOptimisticuseOptimistic ç”¨äºå®ç°ä¹è§‚æ›´æ–°ï¼Œåœ¨æœåŠ¡å™¨å“åº”å‰å…ˆæ›´æ–° UIï¼Œæä¾›å³æ—¶åé¦ˆã€‚ åŸºæœ¬æ¦‚å¿µä¹è§‚æ›´æ–°ï¼šå…ˆå‡è®¾æ“ä½œä¼šæˆåŠŸï¼Œç«‹å³æ›´æ–° UIï¼Œå¦‚æœå¤±è´¥å†å›æ»šã€‚ åŸºæœ¬ç”¨æ³•12345678910111213141516171819202122232425262728293031323334import &#123; useOptimistic, useState &#125; from &#x27;react&#x27;;function LikeButton(&#123; postId, initialLikes &#125;) &#123; const [likes, setLikes] = useState(initialLikes); const [optimisticLikes, addOptimisticLike] = useOptimistic( likes, (currentLikes, amount) =&gt; currentLikes + amount ); async function handleLike() &#123; // ä¹è§‚æ›´æ–°ï¼šç«‹å³æ˜¾ç¤º +1 addOptimisticLike(1); try &#123; // å®é™…çš„ API è°ƒç”¨ const response = await fetch(`/api/posts/$&#123;postId&#125;/like`, &#123; method: &#x27;POST&#x27; &#125;); const data = await response.json(); // æ›´æ–°çœŸå®æ•°æ® setLikes(data.likes); &#125; catch (error) &#123; // å¦‚æœå¤±è´¥ï¼Œä¹è§‚æ›´æ–°ä¼šè‡ªåŠ¨å›æ»š console.error(&#x27;ç‚¹èµå¤±è´¥&#x27;, error); &#125; &#125; return ( &lt;button onClick=&#123;handleLike&#125;&gt; â¤ï¸ &#123;optimisticLikes&#125; ä¸ªèµ &lt;/button&gt; );&#125; å®Œæ•´ç¤ºä¾‹ï¼šå¾…åŠäº‹é¡¹åˆ—è¡¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101import &#123; useOptimistic, useState &#125; from &#x27;react&#x27;;function TodoList() &#123; const [todos, setTodos] = useState([ &#123; id: 1, text: &#x27;å­¦ä¹  React 19&#x27;, completed: false &#125;, &#123; id: 2, text: &#x27;å†™åšå®¢æ–‡ç« &#x27;, completed: false &#125; ]); const [optimisticTodos, addOptimisticTodo] = useOptimistic( todos, (currentTodos, newTodo) =&gt; &#123; if (newTodo.type === &#x27;add&#x27;) &#123; return [...currentTodos, newTodo.todo]; &#125; else if (newTodo.type === &#x27;toggle&#x27;) &#123; return currentTodos.map(todo =&gt; todo.id === newTodo.id ? &#123; ...todo, completed: !todo.completed &#125; : todo ); &#125; else if (newTodo.type === &#x27;delete&#x27;) &#123; return currentTodos.filter(todo =&gt; todo.id !== newTodo.id); &#125; return currentTodos; &#125; ); async function addTodo(text) &#123; const newTodo = &#123; id: Date.now(), text, completed: false &#125;; // ä¹è§‚æ›´æ–° addOptimisticTodo(&#123; type: &#x27;add&#x27;, todo: newTodo &#125;); try &#123; const response = await fetch(&#x27;/api/todos&#x27;, &#123; method: &#x27;POST&#x27;, body: JSON.stringify(newTodo) &#125;); const savedTodo = await response.json(); setTodos(prev =&gt; [...prev, savedTodo]); &#125; catch (error) &#123; console.error(&#x27;æ·»åŠ å¤±è´¥&#x27;, error); &#125; &#125; async function toggleTodo(id) &#123; // ä¹è§‚æ›´æ–° addOptimisticTodo(&#123; type: &#x27;toggle&#x27;, id &#125;); try &#123; await fetch(`/api/todos/$&#123;id&#125;/toggle`, &#123; method: &#x27;POST&#x27; &#125;); setTodos(prev =&gt; prev.map(todo =&gt; todo.id === id ? &#123; ...todo, completed: !todo.completed &#125; : todo ) ); &#125; catch (error) &#123; console.error(&#x27;åˆ‡æ¢å¤±è´¥&#x27;, error); &#125; &#125; async function deleteTodo(id) &#123; // ä¹è§‚æ›´æ–° addOptimisticTodo(&#123; type: &#x27;delete&#x27;, id &#125;); try &#123; await fetch(`/api/todos/$&#123;id&#125;`, &#123; method: &#x27;DELETE&#x27; &#125;); setTodos(prev =&gt; prev.filter(todo =&gt; todo.id !== id)); &#125; catch (error) &#123; console.error(&#x27;åˆ é™¤å¤±è´¥&#x27;, error); &#125; &#125; return ( &lt;div&gt; &lt;h2&gt;å¾…åŠäº‹é¡¹&lt;/h2&gt; &lt;ul&gt; &#123;optimisticTodos.map(todo =&gt; ( &lt;li key=&#123;todo.id&#125; style=&#123;&#123; textDecoration: todo.completed ? &#x27;line-through&#x27; : &#x27;none&#x27;, opacity: todo.id &gt; 1000000000000 ? 0.6 : 1 // æ–°æ·»åŠ çš„é¡¹ç¨å¾®é€æ˜ &#125;&#125; &gt; &lt;input type=&quot;checkbox&quot; checked=&#123;todo.completed&#125; onChange=&#123;() =&gt; toggleTodo(todo.id)&#125; /&gt; &#123;todo.text&#125; &lt;button onClick=&#123;() =&gt; deleteTodo(todo.id)&#125;&gt;åˆ é™¤&lt;/button&gt; &lt;/li&gt; ))&#125; &lt;/ul&gt; &lt;/div&gt; );&#125; èŠå¤©åº”ç”¨ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import &#123; useOptimistic, useState &#125; from &#x27;react&#x27;;function ChatRoom(&#123; roomId &#125;) &#123; const [messages, setMessages] = useState([]); const [optimisticMessages, addOptimisticMessage] = useOptimistic( messages, (currentMessages, newMessage) =&gt; [...currentMessages, newMessage] ); async function sendMessage(text) &#123; const tempMessage = &#123; id: Date.now(), text, sender: &#x27;me&#x27;, status: &#x27;sending&#x27; // å‘é€ä¸­çŠ¶æ€ &#125;; // ä¹è§‚æ›´æ–°ï¼šç«‹å³æ˜¾ç¤ºæ¶ˆæ¯ addOptimisticMessage(tempMessage); try &#123; const response = await fetch(`/api/rooms/$&#123;roomId&#125;/messages`, &#123; method: &#x27;POST&#x27;, body: JSON.stringify(&#123; text &#125;) &#125;); const savedMessage = await response.json(); // æ›¿æ¢ä¸´æ—¶æ¶ˆæ¯ä¸ºæœåŠ¡å™¨è¿”å›çš„æ¶ˆæ¯ setMessages(prev =&gt; [...prev, savedMessage]); &#125; catch (error) &#123; // å¤±è´¥ä¼šè‡ªåŠ¨å›æ»š alert(&#x27;æ¶ˆæ¯å‘é€å¤±è´¥&#x27;); &#125; &#125; return ( &lt;div&gt; &lt;div className=&quot;messages&quot;&gt; &#123;optimisticMessages.map(msg =&gt; ( &lt;div key=&#123;msg.id&#125; className=&#123;`message $&#123;msg.status === &#x27;sending&#x27; ? &#x27;pending&#x27; : &#x27;&#x27;&#125;`&#125; &gt; &lt;strong&gt;&#123;msg.sender&#125;:&lt;/strong&gt; &#123;msg.text&#125; &#123;msg.status === &#x27;sending&#x27; &amp;&amp; &lt;span&gt;â³&lt;/span&gt;&#125; &lt;/div&gt; ))&#125; &lt;/div&gt; &lt;MessageInput onSend=&#123;sendMessage&#125; /&gt; &lt;/div&gt; );&#125; useFormStatususeFormStatus ç”¨äºè·å–è¡¨å•çš„æäº¤çŠ¶æ€ï¼Œç‰¹åˆ«é€‚åˆåœ¨è¡¨å•çš„å­ç»„ä»¶ä¸­ä½¿ç”¨ã€‚ åŸºæœ¬ç”¨æ³•12345678910111213141516171819202122232425262728import &#123; useFormStatus &#125; from &#x27;react-dom&#x27;;function SubmitButton() &#123; const &#123; pending, data, method, action &#125; = useFormStatus(); return ( &lt;button type=&quot;submit&quot; disabled=&#123;pending&#125;&gt; &#123;pending ? &#x27;æäº¤ä¸­...&#x27; : &#x27;æäº¤&#x27;&#125; &lt;/button&gt; );&#125;function MyForm() &#123; async function handleSubmit(formData) &#123; const name = formData.get(&#x27;name&#x27;); await fetch(&#x27;/api/submit&#x27;, &#123; method: &#x27;POST&#x27;, body: JSON.stringify(&#123; name &#125;) &#125;); &#125; return ( &lt;form action=&#123;handleSubmit&#125;&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt; &lt;SubmitButton /&gt; &lt;/form&gt; );&#125; å®Œæ•´ç¤ºä¾‹ï¼šå¸¦åŠ è½½çŠ¶æ€çš„è¡¨å•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182import &#123; useFormStatus &#125; from &#x27;react-dom&#x27;;import &#123; useActionState &#125; from &#x27;react&#x27;;// æäº¤æŒ‰é’®ç»„ä»¶function SubmitButton(&#123; children &#125;) &#123; const &#123; pending &#125; = useFormStatus(); return ( &lt;button type=&quot;submit&quot; disabled=&#123;pending&#125;&gt; &#123;pending ? ( &lt;&gt; &lt;Spinner /&gt; æäº¤ä¸­... &lt;/&gt; ) : ( children )&#125; &lt;/button&gt; );&#125;// è¡¨å•å­—æ®µç»„ä»¶function FormFields() &#123; const &#123; pending &#125; = useFormStatus(); return ( &lt;&gt; &lt;input type=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;é‚®ç®±&quot; disabled=&#123;pending&#125; required /&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;å¯†ç &quot; disabled=&#123;pending&#125; required /&gt; &lt;/&gt; );&#125;// ä¸»è¡¨å•ç»„ä»¶async function login(previousState, formData) &#123; const email = formData.get(&#x27;email&#x27;); const password = formData.get(&#x27;password&#x27;); try &#123; const response = await fetch(&#x27;/api/login&#x27;, &#123; method: &#x27;POST&#x27;, body: JSON.stringify(&#123; email, password &#125;) &#125;); if (!response.ok) &#123; return &#123; error: &#x27;ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±å’Œå¯†ç &#x27; &#125;; &#125; return &#123; success: true &#125;; &#125; catch (error) &#123; return &#123; error: &#x27;ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•&#x27; &#125;; &#125;&#125;function LoginForm() &#123; const [state, action] = useActionState(login, &#123;&#125;); return ( &lt;form action=&#123;action&#125;&gt; &lt;FormFields /&gt; &lt;SubmitButton&gt;ç™»å½•&lt;/SubmitButton&gt; &#123;state.error &amp;&amp; ( &lt;p className=&quot;error&quot;&gt;&#123;state.error&#125;&lt;/p&gt; )&#125; &#123;state.success &amp;&amp; ( &lt;p className=&quot;success&quot;&gt;ç™»å½•æˆåŠŸï¼&lt;/p&gt; )&#125; &lt;/form&gt; );&#125; é«˜çº§ç¤ºä¾‹ï¼šå¤šæ­¥éª¤è¡¨å•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081import &#123; useFormStatus &#125; from &#x27;react-dom&#x27;;import &#123; useState &#125; from &#x27;react&#x27;;function StepIndicator(&#123; currentStep, totalSteps &#125;) &#123; const &#123; pending &#125; = useFormStatus(); return ( &lt;div className=&quot;steps&quot;&gt; &#123;Array.from(&#123; length: totalSteps &#125;, (_, i) =&gt; ( &lt;div key=&#123;i&#125; className=&#123;`step $&#123;i &lt; currentStep ? &#x27;completed&#x27; : &#x27;&#x27;&#125; $&#123; i === currentStep ? &#x27;active&#x27; : &#x27;&#x27; &#125; $&#123;pending ? &#x27;disabled&#x27; : &#x27;&#x27;&#125;`&#125; &gt; æ­¥éª¤ &#123;i + 1&#125; &lt;/div&gt; ))&#125; &lt;/div&gt; );&#125;function NavigationButtons(&#123; currentStep, totalSteps, onBack &#125;) &#123; const &#123; pending &#125; = useFormStatus(); return ( &lt;div className=&quot;navigation&quot;&gt; &#123;currentStep &gt; 0 &amp;&amp; ( &lt;button type=&quot;button&quot; onClick=&#123;onBack&#125; disabled=&#123;pending&#125; &gt; ä¸Šä¸€æ­¥ &lt;/button&gt; )&#125; &lt;button type=&quot;submit&quot; disabled=&#123;pending&#125;&gt; &#123;pending ? ( &#x27;å¤„ç†ä¸­...&#x27; ) : currentStep === totalSteps - 1 ? ( &#x27;å®Œæˆ&#x27; ) : ( &#x27;ä¸‹ä¸€æ­¥&#x27; )&#125; &lt;/button&gt; &lt;/div&gt; );&#125;function MultiStepForm() &#123; const [step, setStep] = useState(0); async function handleSubmit(formData) &#123; // å¤„ç†è¡¨å•æäº¤ await new Promise(resolve =&gt; setTimeout(resolve, 1000)); if (step &lt; 2) &#123; setStep(step + 1); &#125; else &#123; // æœ€åä¸€æ­¥ï¼Œæäº¤è¡¨å• console.log(&#x27;è¡¨å•æäº¤å®Œæˆ&#x27;); &#125; &#125; return ( &lt;form action=&#123;handleSubmit&#125;&gt; &lt;StepIndicator currentStep=&#123;step&#125; totalSteps=&#123;3&#125; /&gt; &#123;step === 0 &amp;&amp; &lt;Step1Fields /&gt;&#125; &#123;step === 1 &amp;&amp; &lt;Step2Fields /&gt;&#125; &#123;step === 2 &amp;&amp; &lt;Step3Fields /&gt;&#125; &lt;NavigationButtons currentStep=&#123;step&#125; totalSteps=&#123;3&#125; onBack=&#123;() =&gt; setStep(step - 1)&#125; /&gt; &lt;/form&gt; );&#125; useFormStatus è¿”å›å€¼1const &#123; pending, data, method, action &#125; = useFormStatus(); pending: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¡¨å•æ˜¯å¦æ­£åœ¨æäº¤ data: FormData å¯¹è±¡ï¼ŒåŒ…å«è¡¨å•æ•°æ® method: å­—ç¬¦ä¸²ï¼Œè¡¨å•çš„ methodï¼ˆâ€™getâ€™ æˆ– â€˜postâ€™ï¼‰ action: å‡½æ•°å¼•ç”¨ï¼Œè¡¨å•çš„ action æ³¨æ„äº‹é¡¹ å¿…é¡»åœ¨è¡¨å•å†…éƒ¨ä½¿ç”¨ï¼šuseFormStatus å¿…é¡»åœ¨ &lt;form&gt; çš„å­ç»„ä»¶ä¸­è°ƒç”¨ åªèƒ½è¯»å–çˆ¶è¡¨å•çŠ¶æ€ï¼šä¸èƒ½è¯»å–åŒçº§æˆ–å­è¡¨å•çš„çŠ¶æ€ é…åˆ Actions ä½¿ç”¨ï¼šæœ€ä½³å®è·µæ˜¯é…åˆ useActionState ä½¿ç”¨ å…¶ä»– React 19 æ–°ç‰¹æ€§1. æ–‡æ¡£å…ƒæ•°æ®æ”¯æŒReact 19 åŸç”Ÿæ”¯æŒåœ¨ç»„ä»¶ä¸­æ¸²æŸ“ &lt;title&gt;ã€&lt;meta&gt; å’Œ &lt;link&gt; æ ‡ç­¾ã€‚ 123456789101112131415function BlogPost(&#123; post &#125;) &#123; return ( &lt;article&gt; &#123;/* ç›´æ¥åœ¨ç»„ä»¶ä¸­æ·»åŠ å…ƒæ•°æ® */&#125; &lt;title&gt;&#123;post.title&#125; - æˆ‘çš„åšå®¢&lt;/title&gt; &lt;meta name=&quot;description&quot; content=&#123;post.excerpt&#125; /&gt; &lt;meta property=&quot;og:title&quot; content=&#123;post.title&#125; /&gt; &lt;meta property=&quot;og:image&quot; content=&#123;post.coverImage&#125; /&gt; &lt;link rel=&quot;canonical&quot; href=&#123;`https://myblog.com/posts/$&#123;post.slug&#125;`&#125; /&gt; &lt;h1&gt;&#123;post.title&#125;&lt;/h1&gt; &lt;div&gt;&#123;post.content&#125;&lt;/div&gt; &lt;/article&gt; );&#125; 2. æ ·å¼è¡¨ä¼˜å…ˆçº§React 19 æ”¹è¿›äº†æ ·å¼è¡¨çš„åŠ è½½å’Œä¼˜å…ˆçº§ç®¡ç†ã€‚ 1234567891011function Component() &#123; return ( &lt;&gt; &#123;/* React ä¼šè‡ªåŠ¨å¤„ç†æ ·å¼è¡¨çš„ä¼˜å…ˆçº§ */&#125; &lt;link rel=&quot;stylesheet&quot; href=&quot;/styles/base.css&quot; precedence=&quot;default&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/styles/theme.css&quot; precedence=&quot;high&quot; /&gt; &lt;div className=&quot;content&quot;&gt;å†…å®¹&lt;/div&gt; &lt;/&gt; );&#125; 3. å¼‚æ­¥è„šæœ¬æ”¯æŒ12345function Analytics() &#123; return ( &lt;script async src=&quot;https://analytics.example.com/script.js&quot; /&gt; );&#125; 4. èµ„æºé¢„åŠ è½½React 19 æä¾›äº†æ–°çš„ API ç”¨äºèµ„æºé¢„åŠ è½½ã€‚ 1234567891011import &#123; preload, preinit &#125; from &#x27;react-dom&#x27;;function MyComponent() &#123; // é¢„åŠ è½½èµ„æº preload(&#x27;/api/data.json&#x27;, &#123; as: &#x27;fetch&#x27; &#125;); // é¢„åˆå§‹åŒ–è„šæœ¬ preinit(&#x27;/scripts/analytics.js&#x27;, &#123; as: &#x27;script&#x27; &#125;); return &lt;div&gt;å†…å®¹&lt;/div&gt;;&#125; 5. ref å›è°ƒçš„æ¸…ç†å‡½æ•°ref å›è°ƒç°åœ¨å¯ä»¥è¿”å›æ¸…ç†å‡½æ•°ã€‚ 123456789101112131415161718function VideoPlayer() &#123; return ( &lt;video ref=&#123;(node) =&gt; &#123; if (node) &#123; // è®¾ç½® node.play(); // è¿”å›æ¸…ç†å‡½æ•° return () =&gt; &#123; node.pause(); &#125;; &#125; &#125;&#125; src=&quot;/video.mp4&quot; /&gt; );&#125; 6. Context ä½œä¸º Providerä¸å†éœ€è¦ .Providerï¼Œç›´æ¥ä½¿ç”¨ Context å³å¯ã€‚ 123456789101112131415161718192021import &#123; createContext &#125; from &#x27;react&#x27;;const ThemeContext = createContext(&#x27;light&#x27;);// React 19: ç›´æ¥ä½¿ç”¨ Contextfunction App() &#123; return ( &lt;ThemeContext value=&quot;dark&quot;&gt; &lt;Page /&gt; &lt;/ThemeContext&gt; );&#125;// React 18: éœ€è¦ä½¿ç”¨ .Providerfunction App() &#123; return ( &lt;ThemeContext.Provider value=&quot;dark&quot;&gt; &lt;Page /&gt; &lt;/ThemeContext.Provider&gt; );&#125; 7. useDeferredValue çš„åˆå§‹å€¼12345678import &#123; useDeferredValue &#125; from &#x27;react&#x27;;function SearchResults(&#123; query &#125;) &#123; // å¯ä»¥æä¾›åˆå§‹å€¼ const deferredQuery = useDeferredValue(query, &#x27;&#x27;); return &lt;Results query=&#123;deferredQuery&#125; /&gt;;&#125; æ€»ç»“React 19 å¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§ï¼š æ ¸å¿ƒæ”¹è¿› ref ç®€åŒ–ï¼šä¸å†éœ€è¦ forwardRefï¼Œç›´æ¥åœ¨ props ä¸­æ¥æ”¶ ref use Hookï¼šé©å‘½æ€§çš„æ–° Hookï¼Œå¯åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯ä¸­ä½¿ç”¨ Actionsï¼šä¼˜é›…çš„å¼‚æ­¥æ“ä½œç®¡ç†æ–¹æ¡ˆ è¡¨å•å¢å¼ºï¼šuseActionStateã€useFormStatus ç®€åŒ–è¡¨å•å¤„ç† æ€§èƒ½ä¼˜åŒ– useOptimisticï¼šä¹è§‚æ›´æ–°æå‡ç”¨æˆ·ä½“éªŒ æ–‡æ¡£å…ƒæ•°æ®ï¼šåŸç”Ÿæ”¯æŒ SEO æ ‡ç­¾ èµ„æºç®¡ç†ï¼šæ”¹è¿›çš„æ ·å¼è¡¨å’Œè„šæœ¬åŠ è½½ å¼€å‘ä½“éªŒ æ›´ç®€æ´çš„ APIï¼šContext ä¸å†éœ€è¦ .Provider æ›´å¥½çš„ç±»å‹æ”¯æŒï¼šTypeScript é›†æˆæ›´å®Œå–„ å‘åå…¼å®¹ï¼šå¹³æ»‘çš„è¿ç§»è·¯å¾„ è¿ç§»å»ºè®® æ¸è¿›å¼å‡çº§ï¼šä¸éœ€è¦ä¸€æ¬¡æ€§é‡å†™æ‰€æœ‰ä»£ç  ä»æ–°åŠŸèƒ½å¼€å§‹ï¼šåœ¨æ–°ç»„ä»¶ä¸­å°è¯• React 19 ç‰¹æ€§ ç§»é™¤ forwardRefï¼šé€æ­¥ç§»é™¤ forwardRef åŒ…è£… ä½¿ç”¨ Actionsï¼šç”¨ Actions æ›¿ä»£æ‰‹åŠ¨çš„åŠ è½½çŠ¶æ€ç®¡ç† é‡‡ç”¨ use Hookï¼šåœ¨åˆé€‚çš„åœºæ™¯ä½¿ç”¨ use ç®€åŒ–ä»£ç  React 19 æ˜¯ä¸€ä¸ªé‡å¤§æ›´æ–°ï¼Œå®ƒç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œæå‡äº†æ€§èƒ½ï¼Œå¹¶å¼•å…¥äº†æ›´ç¬¦åˆç°ä»£ Web å¼€å‘éœ€æ±‚çš„æ–°ç‰¹æ€§ã€‚å»ºè®®å¼€å‘è€…å°½æ—©ç†Ÿæ‚‰è¿™äº›æ–°ç‰¹æ€§ï¼Œä¸ºé¡¹ç›®å‡çº§åšå¥½å‡†å¤‡ã€‚","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"},{"name":"React19","slug":"React19","permalink":"https://zouhualu.github.io/tags/React19/"},{"name":"æ–°ç‰¹æ€§","slug":"æ–°ç‰¹æ€§","permalink":"https://zouhualu.github.io/tags/%E6%96%B0%E7%89%B9%E6%80%A7/"}]},{"title":"react18å‰–æ","slug":"react18å‰–æ","date":"2025-03-21T03:24:00.000Z","updated":"2025-11-25T06:35:06.194Z","comments":true,"path":"20250321/react18å‰–æ/","permalink":"https://zouhualu.github.io/20250321/react18%E5%89%96%E6%9E%90/","excerpt":"","text":"reactå‰–æä½¿ç”¨è„šæ‰‹æ¶æ­å»º react é¡¹ç›®vite1npm create vite@latest my-react-app --template react-ts create-react-app1npx create-react-app my-react-app --template typescript JSXä»€ä¹ˆæ˜¯ JSXJSXï¼ˆJavaScript XMLï¼‰æ˜¯ä¸€ç§ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œå…è®¸æˆ‘ä»¬åœ¨ JavaScript ä»£ç ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ç»“æ„ã€‚å®ƒä½¿å¾—ç»„ä»¶çš„ç»“æ„æ›´åŠ ç›´è§‚å’Œæ˜“äºç»´æŠ¤ã€‚ 1234567891011121314// JSX ç¤ºä¾‹const element = &lt;h1 className=&quot;greeting&quot;&gt;Hello, React!&lt;/h1&gt;;// å¸¦è¡¨è¾¾å¼çš„ JSXconst name = &#x27;World&#x27;;const element = &lt;h1&gt;Hello, &#123;name&#125;!&lt;/h1&gt;;// åµŒå¥—ç»“æ„const component = ( &lt;div className=&quot;container&quot;&gt; &lt;h1&gt;æ ‡é¢˜&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸€æ®µæ–‡æœ¬&lt;/p&gt; &lt;/div&gt;); JSX ç¼–è¯‘åŸç†JSX é€šè¿‡ç¼–è¯‘å™¨ï¼ˆBabel çš„ @babel/preset-react æˆ– plugin-transform-react-jsxï¼‰è¿›è¡Œè½¬æ¢ã€‚ React 17 ä¹‹å‰çš„è½¬æ¢æ–¹å¼ï¼š 123456789// æºä»£ç const element = &lt;h1 className=&quot;greeting&quot;&gt;Hello, React!&lt;/h1&gt;;// ç¼–è¯‘åï¼ˆæ—§ï¼‰const element = React.createElement( &#x27;h1&#x27;, &#123; className: &#x27;greeting&#x27; &#125;, &#x27;Hello, React!&#x27;); React 17+ çš„æ–° JSX è½¬æ¢ï¼š 123456789// æºä»£ç const element = &lt;h1 className=&quot;greeting&quot;&gt;Hello, React!&lt;/h1&gt;;// ç¼–è¯‘åï¼ˆæ–°ï¼‰import &#123; jsx as _jsx &#125; from &#x27;react/jsx-runtime&#x27;;const element = _jsx(&#x27;h1&#x27;, &#123; className: &#x27;greeting&#x27;, children: &#x27;Hello, React!&#x27;&#125;); åœ¨çº¿è½¬æ¢åœ°å€ï¼šBabel åœ¨çº¿è½¬æ¢å·¥å…· JSX è§„åˆ™ å¿…é¡»è¿”å›å•ä¸ªæ ¹å…ƒç´  123456789101112131415161718192021// é”™è¯¯return ( &lt;h1&gt;æ ‡é¢˜&lt;/h1&gt; &lt;p&gt;æ®µè½&lt;/p&gt;);// æ­£ç¡® - ä½¿ç”¨çˆ¶å…ƒç´ åŒ…è£¹return ( &lt;div&gt; &lt;h1&gt;æ ‡é¢˜&lt;/h1&gt; &lt;p&gt;æ®µè½&lt;/p&gt; &lt;/div&gt;);// æ­£ç¡® - ä½¿ç”¨ Fragmentreturn ( &lt;&gt; &lt;h1&gt;æ ‡é¢˜&lt;/h1&gt; &lt;p&gt;æ®µè½&lt;/p&gt; &lt;/&gt;); æ‰€æœ‰æ ‡ç­¾å¿…é¡»é—­åˆ 123&lt;img src=&quot;image.jpg&quot; /&gt;&lt;br /&gt;&lt;input type=&quot;text&quot; /&gt; ä½¿ç”¨é©¼å³°å‘½åæ³• 123&lt;div className=&quot;container&quot; onClick=&#123;handleClick&#125;&gt; &lt;label htmlFor=&quot;input&quot;&gt;æ ‡ç­¾&lt;/label&gt;&lt;/div&gt; HooksHooks æ˜¯ React 16.8 å¼•å…¥çš„ç‰¹æ€§ï¼Œè®©å‡½æ•°ç»„ä»¶èƒ½å¤Ÿä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ã€‚ useStateç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ç®¡ç†ã€‚ 12345678910111213import &#123; useState &#125; from &#x27;react&#x27;;function Counter() &#123; const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;p&gt;å½“å‰è®¡æ•°: &#123;count&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;å¢åŠ &lt;/button&gt; &lt;button onClick=&#123;() =&gt; setCount(prev =&gt; prev - 1)&#125;&gt;å‡å°‘&lt;/button&gt; &lt;/div&gt; );&#125; é‡ç‚¹ï¼š çŠ¶æ€æ›´æ–°æ˜¯å¼‚æ­¥çš„ ä½¿ç”¨å‡½æ•°å¼æ›´æ–°å¯ä»¥è·å–æœ€æ–°çŠ¶æ€ï¼šsetCount(prev =&gt; prev + 1) åˆå§‹å€¼åªåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ä½¿ç”¨ useReduceré€‚åˆç®¡ç†å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼Œç±»ä¼¼äº Redux çš„ reducerã€‚ 1234567891011121314151617181920212223242526272829import &#123; useReducer &#125; from &#x27;react&#x27;;const initialState = &#123; count: 0 &#125;;function reducer(state, action) &#123; switch (action.type) &#123; case &#x27;increment&#x27;: return &#123; count: state.count + 1 &#125;; case &#x27;decrement&#x27;: return &#123; count: state.count - 1 &#125;; case &#x27;reset&#x27;: return initialState; default: throw new Error(&#x27;Unknown action type&#x27;); &#125;&#125;function Counter() &#123; const [state, dispatch] = useReducer(reducer, initialState); return ( &lt;div&gt; &lt;p&gt;è®¡æ•°: &#123;state.count&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &#x27;increment&#x27; &#125;)&#125;&gt;+&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &#x27;decrement&#x27; &#125;)&#125;&gt;-&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &#x27;reset&#x27; &#125;)&#125;&gt;é‡ç½®&lt;/button&gt; &lt;/div&gt; );&#125; useRefåˆ›å»ºä¸€ä¸ªå¯å˜çš„å¼•ç”¨å¯¹è±¡ï¼Œç”¨äºè®¿é—® DOM å…ƒç´ æˆ–å­˜å‚¨ä¸è§¦å‘é‡æ¸²æŸ“çš„å€¼ã€‚ 123456789101112131415161718import &#123; useRef, useEffect &#125; from &#x27;react&#x27;;function TextInput() &#123; const inputRef = useRef(null); const renderCount = useRef(0); useEffect(() =&gt; &#123; renderCount.current += 1; inputRef.current.focus(); &#125;); return ( &lt;div&gt; &lt;input ref=&#123;inputRef&#125; type=&quot;text&quot; /&gt; &lt;p&gt;ç»„ä»¶æ¸²æŸ“æ¬¡æ•°: &#123;renderCount.current&#125;&lt;/p&gt; &lt;/div&gt; );&#125; useRef çš„ä¸¤ä¸ªä¸»è¦ç”¨é€”ï¼š è®¿é—® DOM å…ƒç´  å­˜å‚¨ä¸è§¦å‘é‡æ¸²æŸ“çš„å¯å˜å€¼ useMemoç”¨äºç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿›è¡Œæ˜‚è´µçš„è®¡ç®—ã€‚ 12345678910111213141516171819202122232425262728import &#123; useMemo, useState &#125; from &#x27;react&#x27;;function ExpensiveComponent(&#123; items &#125;) &#123; const [filter, setFilter] = useState(&#x27;&#x27;); // åªæœ‰å½“ items æˆ– filter æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— const filteredItems = useMemo(() =&gt; &#123; console.log(&#x27;è¿‡æ»¤è®¡ç®—æ‰§è¡Œ&#x27;); return items.filter(item =&gt; item.toLowerCase().includes(filter.toLowerCase()) ); &#125;, [items, filter]); return ( &lt;div&gt; &lt;input value=&#123;filter&#125; onChange=&#123;(e) =&gt; setFilter(e.target.value)&#125; placeholder=&quot;æœç´¢...&quot; /&gt; &lt;ul&gt; &#123;filteredItems.map((item, index) =&gt; ( &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt; ))&#125; &lt;/ul&gt; &lt;/div&gt; );&#125; useCallbackè¿”å›ä¸€ä¸ªè®°å¿†åŒ–çš„å›è°ƒå‡½æ•°ï¼Œé¿å…å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚ 1234567891011121314151617181920212223242526import &#123; useCallback, useState, memo &#125; from &#x27;react&#x27;;// å­ç»„ä»¶ä½¿ç”¨ memo åŒ…è£¹const Button = memo((&#123; onClick, children &#125;) =&gt; &#123; console.log(&#x27;Button æ¸²æŸ“&#x27;); return &lt;button onClick=&#123;onClick&#125;&gt;&#123;children&#125;&lt;/button&gt;;&#125;);function Parent() &#123; const [count, setCount] = useState(0); const [other, setOther] = useState(0); // åªæœ‰ count æ”¹å˜æ—¶æ‰åˆ›å»ºæ–°å‡½æ•° const increment = useCallback(() =&gt; &#123; setCount(c =&gt; c + 1); &#125;, []); return ( &lt;div&gt; &lt;p&gt;Count: &#123;count&#125;&lt;/p&gt; &lt;p&gt;Other: &#123;other&#125;&lt;/p&gt; &lt;Button onClick=&#123;increment&#125;&gt;å¢åŠ  Count&lt;/Button&gt; &lt;button onClick=&#123;() =&gt; setOther(o =&gt; o + 1)&#125;&gt;å¢åŠ  Other&lt;/button&gt; &lt;/div&gt; );&#125; useMemo vs useCallbackï¼š useMemo(() =&gt; fn) ç¼“å­˜å‡½æ•°çš„è¿”å›å€¼ useCallback(fn) ç¼“å­˜å‡½æ•°æœ¬èº« useContextç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®ï¼Œé¿å… props å±‚å±‚ä¼ é€’ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243import &#123; createContext, useContext, useState &#125; from &#x27;react&#x27;;// åˆ›å»º Contextconst ThemeContext = createContext();function ThemeProvider(&#123; children &#125;) &#123; const [theme, setTheme] = useState(&#x27;light&#x27;); const toggleTheme = () =&gt; &#123; setTheme(prev =&gt; prev === &#x27;light&#x27; ? &#x27;dark&#x27; : &#x27;light&#x27;); &#125;; return ( &lt;ThemeContext.Provider value=&#123;&#123; theme, toggleTheme &#125;&#125;&gt; &#123;children&#125; &lt;/ThemeContext.Provider&gt; );&#125;// ä½¿ç”¨ Contextfunction ThemedButton() &#123; const &#123; theme, toggleTheme &#125; = useContext(ThemeContext); return ( &lt;button onClick=&#123;toggleTheme&#125; style=&#123;&#123; background: theme === &#x27;light&#x27; ? &#x27;#fff&#x27; : &#x27;#333&#x27;, color: theme === &#x27;light&#x27; ? &#x27;#333&#x27; : &#x27;#fff&#x27; &#125;&#125; &gt; å½“å‰ä¸»é¢˜: &#123;theme&#125; &lt;/button&gt; );&#125;function App() &#123; return ( &lt;ThemeProvider&gt; &lt;ThemedButton /&gt; &lt;/ThemeProvider&gt; );&#125; useEffectå¤„ç†å‰¯ä½œç”¨ï¼ˆæ•°æ®è·å–ã€è®¢é˜…ã€DOM æ“ä½œç­‰ï¼‰ã€‚ 123456789101112131415161718192021222324252627import &#123; useEffect, useState &#125; from &#x27;react&#x27;;function DataFetcher(&#123; userId &#125;) &#123; const [data, setData] = useState(null); useEffect(() =&gt; &#123; let cancelled = false; async function fetchData() &#123; const response = await fetch(`/api/user/$&#123;userId&#125;`); const json = await response.json(); if (!cancelled) &#123; setData(json); &#125; &#125; fetchData(); // æ¸…ç†å‡½æ•° return () =&gt; &#123; cancelled = true; &#125;; &#125;, [userId]); // ä¾èµ–é¡¹æ•°ç»„ return &lt;div&gt;&#123;data ? data.name : &#x27;åŠ è½½ä¸­...&#x27;&#125;&lt;/div&gt;;&#125; useLayoutEffectä¸ useEffect ç±»ä¼¼ï¼Œä½†åœ¨æ‰€æœ‰ DOM å˜æ›´ååŒæ­¥è§¦å‘ï¼Œç”¨äºéœ€è¦åŒæ­¥æµ‹é‡å¸ƒå±€çš„åœºæ™¯ã€‚ 1234567891011121314151617import &#123; useLayoutEffect, useRef, useState &#125; from &#x27;react&#x27;;function MeasureComponent() &#123; const ref = useRef(null); const [height, setHeight] = useState(0); useLayoutEffect(() =&gt; &#123; // åœ¨æµè§ˆå™¨ç»˜åˆ¶å‰æ‰§è¡Œ setHeight(ref.current.offsetHeight); &#125;, []); return ( &lt;div ref=&#123;ref&#125;&gt; &lt;p&gt;ç»„ä»¶é«˜åº¦: &#123;height&#125;px&lt;/p&gt; &lt;/div&gt; );&#125; refref ä¸ä»…å¯ä»¥ä½œä¸º DOM çš„å¼•ç”¨ï¼Œè¿˜å¯ä»¥ä½œä¸ºä¸éœ€è¦å¼•èµ·è§†å›¾æ›´æ–°çš„æ•°æ®å­˜å‚¨ã€‚ ref çš„ä½¿ç”¨åœºæ™¯ è®¿é—® DOM å…ƒç´  å­˜å‚¨ä¸è§¦å‘é‡æ¸²æŸ“çš„å€¼ï¼ˆå¦‚å®šæ—¶å™¨ IDã€å‰ä¸€ä¸ª props å€¼ç­‰ï¼‰ ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆï¼ˆå¦‚è§†é¢‘æ’­æ”¾å™¨ã€å›¾è¡¨åº“ç­‰ï¼‰ 12345678910111213141516import &#123; useRef, useEffect &#125; from &#x27;react&#x27;;function App() &#123; const ref = useRef(null); useEffect(() =&gt; &#123; console.log(ref.current); // è¾“å‡º DOM å…ƒç´  ref.current.focus(); // èšç„¦è¾“å…¥æ¡† &#125;, []); return ( &lt;div ref=&#123;ref&#125;&gt; Ref demo &lt;/div&gt; );&#125; ref çš„å¸¸è§ç”¨æ³•12345678910111213141516171819function VideoPlayer(&#123; src &#125;) &#123; const videoRef = useRef(null); const play = () =&gt; &#123; videoRef.current.play(); &#125;; const pause = () =&gt; &#123; videoRef.current.pause(); &#125;; return ( &lt;div&gt; &lt;video ref=&#123;videoRef&#125; src=&#123;src&#125; /&gt; &lt;button onClick=&#123;play&#125;&gt;æ’­æ”¾&lt;/button&gt; &lt;button onClick=&#123;pause&#125;&gt;æš‚åœ&lt;/button&gt; &lt;/div&gt; );&#125; forwardRefforwardRef å…è®¸ç»„ä»¶å°† ref è½¬å‘ç»™å­ç»„ä»¶ï¼Œä½¿çˆ¶ç»„ä»¶èƒ½å¤Ÿè®¿é—®å­ç»„ä»¶çš„ DOM èŠ‚ç‚¹ã€‚ åŸºæœ¬ç”¨æ³•12345678910111213141516171819202122import &#123; forwardRef, useRef &#125; from &#x27;react&#x27;;// å­ç»„ä»¶ä½¿ç”¨ forwardRef åŒ…è£¹const CustomInput = forwardRef((props, ref) =&gt; &#123; return &lt;input ref=&#123;ref&#125; &#123;...props&#125; /&gt;;&#125;);// çˆ¶ç»„ä»¶function Form() &#123; const inputRef = useRef(null); const handleFocus = () =&gt; &#123; inputRef.current.focus(); &#125;; return ( &lt;div&gt; &lt;CustomInput ref=&#123;inputRef&#125; placeholder=&quot;è¾“å…¥æ–‡æœ¬&quot; /&gt; &lt;button onClick=&#123;handleFocus&#125;&gt;èšç„¦è¾“å…¥æ¡†&lt;/button&gt; &lt;/div&gt; );&#125; ç»“åˆ useImperativeHandleä½¿ç”¨ useImperativeHandle å¯ä»¥è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚ 12345678910111213141516171819202122232425262728293031323334353637import &#123; forwardRef, useRef, useImperativeHandle &#125; from &#x27;react&#x27;;const FancyInput = forwardRef((props, ref) =&gt; &#123; const inputRef = useRef(null); useImperativeHandle(ref, () =&gt; (&#123; // åªæš´éœ²ç‰¹å®šçš„æ–¹æ³• focus: () =&gt; &#123; inputRef.current.focus(); &#125;, clear: () =&gt; &#123; inputRef.current.value = &#x27;&#x27;; &#125;, getValue: () =&gt; &#123; return inputRef.current.value; &#125; &#125;)); return &lt;input ref=&#123;inputRef&#125; &#123;...props&#125; /&gt;;&#125;);function App() &#123; const fancyInputRef = useRef(null); const handleClick = () =&gt; &#123; fancyInputRef.current.focus(); console.log(fancyInputRef.current.getValue()); fancyInputRef.current.clear(); &#125;; return ( &lt;div&gt; &lt;FancyInput ref=&#123;fancyInputRef&#125; placeholder=&quot;è‡ªå®šä¹‰è¾“å…¥æ¡†&quot; /&gt; &lt;button onClick=&#123;handleClick&#125;&gt;æ“ä½œè¾“å…¥æ¡†&lt;/button&gt; &lt;/div&gt; );&#125; SuspenseSuspense å…è®¸ä½ åœ¨ç»„ä»¶æ ‘ä¸­æŒ‡å®šåŠ è½½çŠ¶æ€ï¼Œé€šå¸¸ç”¨äºä»£ç åˆ†å‰²å’Œæ•°æ®è·å–ã€‚ ä¸ lazy é…åˆä½¿ç”¨123456789101112131415import &#123; Suspense, lazy &#125; from &#x27;react&#x27;;// æ‡’åŠ è½½ç»„ä»¶const LazyComponent = lazy(() =&gt; import(&#x27;./LazyComponent&#x27;));function App() &#123; return ( &lt;div&gt; &lt;h1&gt;æˆ‘çš„åº”ç”¨&lt;/h1&gt; &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt; &lt;LazyComponent /&gt; &lt;/Suspense&gt; &lt;/div&gt; );&#125; åµŒå¥— Suspense12345678910111213141516171819import &#123; Suspense, lazy &#125; from &#x27;react&#x27;;const Profile = lazy(() =&gt; import(&#x27;./Profile&#x27;));const Posts = lazy(() =&gt; import(&#x27;./Posts&#x27;));function App() &#123; return ( &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½é¡µé¢...&lt;/div&gt;&#125;&gt; &lt;div&gt; &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸ªäººèµ„æ–™...&lt;/div&gt;&#125;&gt; &lt;Profile /&gt; &lt;/Suspense&gt; &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½æ–‡ç« ...&lt;/div&gt;&#125;&gt; &lt;Posts /&gt; &lt;/Suspense&gt; &lt;/div&gt; &lt;/Suspense&gt; );&#125; React 18 ä¸­çš„æ•°æ®è·å–React 18 æ”¯æŒåœ¨ Suspense ä¸­è¿›è¡Œæ•°æ®è·å–ï¼ˆéœ€è¦é…åˆæ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼‰ã€‚ 123456789101112131415161718192021import &#123; Suspense &#125; from &#x27;react&#x27;;function UserProfile(&#123; userId &#125;) &#123; // ä½¿ç”¨æ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ React Queryã€SWR ç­‰ï¼‰ const user = useUser(userId); // è¿™ä¼šåœ¨æ•°æ®æœªå‡†å¤‡å¥½æ—¶ suspend return ( &lt;div&gt; &lt;h2&gt;&#123;user.name&#125;&lt;/h2&gt; &lt;p&gt;&#123;user.email&#125;&lt;/p&gt; &lt;/div&gt; );&#125;function App() &#123; return ( &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ç”¨æˆ·ä¿¡æ¯...&lt;/div&gt;&#125;&gt; &lt;UserProfile userId=&#123;1&#125; /&gt; &lt;/Suspense&gt; );&#125; lazyReact.lazy ç”¨äºåŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Œå®ç°ä»£ç åˆ†å‰²ï¼Œå‡å°‘åˆå§‹åŠ è½½æ—¶é—´ã€‚ åŸºæœ¬ç”¨æ³•1234567891011121314151617181920212223import &#123; lazy, Suspense &#125; from &#x27;react&#x27;;// åŠ¨æ€å¯¼å…¥ç»„ä»¶const Dashboard = lazy(() =&gt; import(&#x27;./Dashboard&#x27;));const Settings = lazy(() =&gt; import(&#x27;./Settings&#x27;));function App() &#123; const [page, setPage] = useState(&#x27;dashboard&#x27;); return ( &lt;div&gt; &lt;nav&gt; &lt;button onClick=&#123;() =&gt; setPage(&#x27;dashboard&#x27;)&#125;&gt;ä»ªè¡¨æ¿&lt;/button&gt; &lt;button onClick=&#123;() =&gt; setPage(&#x27;settings&#x27;)&#125;&gt;è®¾ç½®&lt;/button&gt; &lt;/nav&gt; &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt; &#123;page === &#x27;dashboard&#x27; &amp;&amp; &lt;Dashboard /&gt;&#125; &#123;page === &#x27;settings&#x27; &amp;&amp; &lt;Settings /&gt;&#125; &lt;/Suspense&gt; &lt;/div&gt; );&#125; è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²1234567891011121314151617181920import &#123; lazy, Suspense &#125; from &#x27;react&#x27;;import &#123; BrowserRouter, Routes, Route &#125; from &#x27;react-router-dom&#x27;;const Home = lazy(() =&gt; import(&#x27;./pages/Home&#x27;));const About = lazy(() =&gt; import(&#x27;./pages/About&#x27;));const Contact = lazy(() =&gt; import(&#x27;./pages/Contact&#x27;));function App() &#123; return ( &lt;BrowserRouter&gt; &lt;Suspense fallback=&#123;&lt;div&gt;é¡µé¢åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt; &lt;Routes&gt; &lt;Route path=&quot;/&quot; element=&#123;&lt;Home /&gt;&#125; /&gt; &lt;Route path=&quot;/about&quot; element=&#123;&lt;About /&gt;&#125; /&gt; &lt;Route path=&quot;/contact&quot; element=&#123;&lt;Contact /&gt;&#125; /&gt; &lt;/Routes&gt; &lt;/Suspense&gt; &lt;/BrowserRouter&gt; );&#125; é”™è¯¯å¤„ç†ç»“åˆ Error Boundary å¤„ç†åŠ è½½å¤±è´¥çš„æƒ…å†µã€‚ 1234567891011121314151617181920212223242526272829303132import &#123; Component, lazy, Suspense &#125; from &#x27;react&#x27;;class ErrorBoundary extends Component &#123; state = &#123; hasError: false &#125;; static getDerivedStateFromError(error) &#123; return &#123; hasError: true &#125;; &#125; componentDidCatch(error, info) &#123; console.error(&#x27;ç»„ä»¶åŠ è½½å¤±è´¥:&#x27;, error, info); &#125; render() &#123; if (this.state.hasError) &#123; return &lt;div&gt;ç»„ä»¶åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•&lt;/div&gt;; &#125; return this.props.children; &#125;&#125;const LazyComponent = lazy(() =&gt; import(&#x27;./LazyComponent&#x27;));function App() &#123; return ( &lt;ErrorBoundary&gt; &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt; &lt;LazyComponent /&gt; &lt;/Suspense&gt; &lt;/ErrorBoundary&gt; );&#125; memoReact.memo æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºä¼˜åŒ–å‡½æ•°ç»„ä»¶çš„æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚ åŸºæœ¬ç”¨æ³•12345678910111213141516171819202122232425import &#123; memo, useState &#125; from &#x27;react&#x27;;// ä½¿ç”¨ memo åŒ…è£¹ç»„ä»¶const ExpensiveComponent = memo((&#123; value &#125;) =&gt; &#123; console.log(&#x27;ExpensiveComponent æ¸²æŸ“&#x27;); return &lt;div&gt;å€¼: &#123;value&#125;&lt;/div&gt;;&#125;);function App() &#123; const [count, setCount] = useState(0); const [text, setText] = useState(&#x27;&#x27;); return ( &lt;div&gt; &lt;ExpensiveComponent value=&#123;count&#125; /&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;å¢åŠ è®¡æ•°&lt;/button&gt; &lt;input value=&#123;text&#125; onChange=&#123;(e) =&gt; setText(e.target.value)&#125; placeholder=&quot;è¾“å…¥ä¸ä¼šè§¦å‘ ExpensiveComponent é‡æ¸²æŸ“&quot; /&gt; &lt;/div&gt; );&#125; è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°1234567891011121314151617181920212223242526272829303132333435import &#123; memo &#125; from &#x27;react&#x27;;const User = memo( (&#123; user &#125;) =&gt; &#123; console.log(&#x27;User ç»„ä»¶æ¸²æŸ“&#x27;); return ( &lt;div&gt; &lt;h3&gt;&#123;user.name&#125;&lt;/h3&gt; &lt;p&gt;&#123;user.email&#125;&lt;/p&gt; &lt;/div&gt; ); &#125;, (prevProps, nextProps) =&gt; &#123; // è¿”å› true è¡¨ç¤ºä¸éœ€è¦é‡æ¸²æŸ“ // è¿”å› false è¡¨ç¤ºéœ€è¦é‡æ¸²æŸ“ return prevProps.user.id === nextProps.user.id; &#125;);function App() &#123; const [user, setUser] = useState(&#123; id: 1, name: &#x27;å¼ ä¸‰&#x27;, email: &#x27;zhang@example.com&#x27; &#125;); const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;User user=&#123;user&#125; /&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; è®¡æ•°: &#123;count&#125; (ä¸ä¼šè§¦å‘ User é‡æ¸²æŸ“) &lt;/button&gt; &lt;button onClick=&#123;() =&gt; setUser(&#123; ...user, name: &#x27;æå››&#x27; &#125;)&#125;&gt; æ”¹å˜ç”¨æˆ· (ä¼šè§¦å‘ User é‡æ¸²æŸ“) &lt;/button&gt; &lt;/div&gt; );&#125; memo çš„ä½¿ç”¨åœºæ™¯ ç»„ä»¶æ¸²æŸ“å¼€é”€å¤§ï¼šç»„ä»¶åŒ…å«å¤æ‚çš„è®¡ç®—æˆ–å¤§é‡çš„ DOM èŠ‚ç‚¹ props ä¸ç»å¸¸å˜åŒ–ï¼šç»„ä»¶çš„ props åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ä¿æŒä¸å˜ çº¯å±•ç¤ºç»„ä»¶ï¼šç»„ä»¶åªä¾èµ– propsï¼Œæ²¡æœ‰å†…éƒ¨çŠ¶æ€ æ³¨æ„äº‹é¡¹12345678910111213141516171819202122232425262728import &#123; memo, useState &#125; from &#x27;react&#x27;;// é”™è¯¯ç¤ºä¾‹ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå¯¼è‡´ memo å¤±æ•ˆfunction App() &#123; const [count, setCount] = useState(0); return ( &lt;MemoChild data=&#123;&#123; value: count &#125;&#125; // æ¯æ¬¡éƒ½æ˜¯æ–°å¯¹è±¡ onClick=&#123;() =&gt; &#123;&#125;&#125; // æ¯æ¬¡éƒ½æ˜¯æ–°å‡½æ•° /&gt; );&#125;// æ­£ç¡®ç¤ºä¾‹ï¼šé…åˆ useMemo å’Œ useCallbackfunction App() &#123; const [count, setCount] = useState(0); const data = useMemo(() =&gt; (&#123; value: count &#125;), [count]); const handleClick = useCallback(() =&gt; &#123;&#125;, []); return ( &lt;MemoChild data=&#123;data&#125; onClick=&#123;handleClick&#125; /&gt; );&#125; React 18 æ–°ç‰¹æ€§React 18 å¼•å…¥äº†å¤šé¡¹é‡å¤§æ›´æ–°ï¼Œæå‡äº†æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚ å¹¶å‘æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰React 18 çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå…è®¸ React åŒæ—¶å‡†å¤‡å¤šä¸ªç‰ˆæœ¬çš„ UIï¼Œå¹¶åœ¨éœ€è¦æ—¶ä¸­æ–­æ¸²æŸ“ã€‚ å…³é”®æ¦‚å¿µï¼š å¯ä¸­æ–­çš„æ¸²æŸ“ï¼šReact å¯ä»¥æš‚åœæ¸²æŸ“å·¥ä½œï¼Œå¤„ç†æ›´é«˜ä¼˜å…ˆçº§çš„æ›´æ–° è‡ªåŠ¨æ‰¹å¤„ç†ï¼šå¤šä¸ªçŠ¶æ€æ›´æ–°ä¼šè‡ªåŠ¨æ‰¹å¤„ç†æˆä¸€æ¬¡é‡æ¸²æŸ“ è¿‡æ¸¡æ›´æ–°ï¼šåŒºåˆ†ç´§æ€¥æ›´æ–°å’Œéç´§æ€¥æ›´æ–° è‡ªåŠ¨æ‰¹å¤„ç†ï¼ˆAutomatic Batchingï¼‰React 18 ä¼šè‡ªåŠ¨æ‰¹å¤„ç†æ‰€æœ‰çŠ¶æ€æ›´æ–°ï¼Œæ— è®ºå®ƒä»¬åœ¨å“ªé‡Œè§¦å‘ã€‚ 1234567891011121314151617181920212223242526272829import &#123; useState &#125; from &#x27;react&#x27;;function App() &#123; const [count, setCount] = useState(0); const [flag, setFlag] = useState(false); function handleClick() &#123; // React 18: è‡ªåŠ¨æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ¸²æŸ“ setCount(c =&gt; c + 1); setFlag(f =&gt; !f); // åœ¨ React 17 ä¸­ï¼Œå¦‚æœåœ¨ Promiseã€setTimeout ä¸­ï¼Œä¼šè§¦å‘ä¸¤æ¬¡æ¸²æŸ“ &#125; setTimeout(() =&gt; &#123; // React 18: è¿™é‡Œä¹Ÿä¼šæ‰¹å¤„ç† setCount(c =&gt; c + 1); setFlag(f =&gt; !f); &#125;, 1000); console.log(&#x27;æ¸²æŸ“&#x27;); // åªè¾“å‡ºä¸€æ¬¡ return ( &lt;div&gt; &lt;button onClick=&#123;handleClick&#125;&gt; Count: &#123;count&#125;, Flag: &#123;flag.toString()&#125; &lt;/button&gt; &lt;/div&gt; );&#125; é€€å‡ºæ‰¹å¤„ç†ï¼š 12345678910111213import &#123; flushSync &#125; from &#x27;react-dom&#x27;;function handleClick() &#123; flushSync(() =&gt; &#123; setCount(c =&gt; c + 1); &#125;); // æ­¤æ—¶ DOM å·²æ›´æ–° flushSync(() =&gt; &#123; setFlag(f =&gt; !f); &#125;); // åˆæ›´æ–°äº†ä¸€æ¬¡&#125; Transitions APIç”¨äºæ ‡è®°éç´§æ€¥çš„çŠ¶æ€æ›´æ–°ï¼Œè®© React çŸ¥é“æŸäº›æ›´æ–°å¯ä»¥è¢«ä¸­æ–­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637import &#123; useState, useTransition &#125; from &#x27;react&#x27;;function SearchResults() &#123; const [isPending, startTransition] = useTransition(); const [query, setQuery] = useState(&#x27;&#x27;); const [results, setResults] = useState([]); function handleChange(e) &#123; const value = e.target.value; // ç´§æ€¥æ›´æ–°ï¼šç«‹å³æ›´æ–°è¾“å…¥æ¡† setQuery(value); // éç´§æ€¥æ›´æ–°ï¼šæœç´¢ç»“æœå¯ä»¥å»¶è¿Ÿ startTransition(() =&gt; &#123; const filtered = largeList.filter(item =&gt; item.includes(value) ); setResults(filtered); &#125;); &#125; return ( &lt;div&gt; &lt;input value=&#123;query&#125; onChange=&#123;handleChange&#125; /&gt; &#123;isPending ? ( &lt;div&gt;æœç´¢ä¸­...&lt;/div&gt; ) : ( &lt;ul&gt; &#123;results.map(item =&gt; ( &lt;li key=&#123;item&#125;&gt;&#123;item&#125;&lt;/li&gt; ))&#125; &lt;/ul&gt; )&#125; &lt;/div&gt; );&#125; useDeferredValueå»¶è¿Ÿæ›´æ–°æŸä¸ªå€¼ï¼Œè®©ç´§æ€¥æ›´æ–°ä¼˜å…ˆå¤„ç†ã€‚ 12345678910111213141516171819202122232425262728import &#123; useState, useDeferredValue, memo &#125; from &#x27;react&#x27;;function App() &#123; const [text, setText] = useState(&#x27;&#x27;); const deferredText = useDeferredValue(text); return ( &lt;div&gt; &lt;input value=&#123;text&#125; onChange=&#123;(e) =&gt; setText(e.target.value)&#125; /&gt; &#123;/* è¾“å…¥æ¡†ç«‹å³å“åº” */&#125; &lt;p&gt;å½“å‰è¾“å…¥: &#123;text&#125;&lt;/p&gt; &#123;/* åˆ—è¡¨æ¸²æŸ“ä½¿ç”¨å»¶è¿Ÿçš„å€¼ */&#125; &lt;SlowList text=&#123;deferredText&#125; /&gt; &lt;/div&gt; );&#125;const SlowList = memo((&#123; text &#125;) =&gt; &#123; const items = []; for (let i = 0; i &lt; 250; i++) &#123; items.push(&lt;li key=&#123;i&#125;&gt;&#123;text&#125; - &#123;i&#125;&lt;/li&gt;); &#125; return &lt;ul&gt;&#123;items&#125;&lt;/ul&gt;;&#125;); useIdç”Ÿæˆå”¯ä¸€çš„ IDï¼Œé€‚ç”¨äºæœåŠ¡ç«¯æ¸²æŸ“ã€‚ 12345678910111213141516171819202122232425import &#123; useId &#125; from &#x27;react&#x27;;function NameFields() &#123; const id = useId(); return ( &lt;div&gt; &lt;label htmlFor=&#123;`$&#123;id&#125;-firstName`&#125;&gt;åå­—ï¼š&lt;/label&gt; &lt;input id=&#123;`$&#123;id&#125;-firstName`&#125; type=&quot;text&quot; /&gt; &lt;label htmlFor=&#123;`$&#123;id&#125;-lastName`&#125;&gt;å§“æ°ï¼š&lt;/label&gt; &lt;input id=&#123;`$&#123;id&#125;-lastName`&#125; type=&quot;text&quot; /&gt; &lt;/div&gt; );&#125;// å³ä½¿æœ‰å¤šä¸ªç»„ä»¶å®ä¾‹ï¼ŒID ä¹Ÿä¸ä¼šå†²çªfunction App() &#123; return ( &lt;&gt; &lt;NameFields /&gt; &lt;NameFields /&gt; &lt;/&gt; );&#125; useSyncExternalStoreç”¨äºè®¢é˜…å¤–éƒ¨æ•°æ®æºï¼Œç¡®ä¿åœ¨å¹¶å‘æ¸²æŸ“ä¸­çš„ä¸€è‡´æ€§ã€‚ 1234567891011121314151617181920212223242526272829303132333435import &#123; useSyncExternalStore &#125; from &#x27;react&#x27;;// å¤–éƒ¨ storeconst store = &#123; state: &#123; count: 0 &#125;, listeners: new Set(), subscribe(listener) &#123; this.listeners.add(listener); return () =&gt; this.listeners.delete(listener); &#125;, getSnapshot() &#123; return this.state; &#125;, increment() &#123; this.state = &#123; count: this.state.count + 1 &#125;; this.listeners.forEach(listener =&gt; listener()); &#125;&#125;;function Counter() &#123; const state = useSyncExternalStore( store.subscribe.bind(store), store.getSnapshot.bind(store) ); return ( &lt;div&gt; &lt;p&gt;Count: &#123;state.count&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; store.increment()&#125;&gt;å¢åŠ &lt;/button&gt; &lt;/div&gt; );&#125; useInsertionEffectä¸“é—¨ç”¨äº CSS-in-JS åº“ï¼Œåœ¨ DOM å˜æ›´å‰åŒæ­¥è§¦å‘ã€‚ 12345678910111213141516171819202122232425import &#123; useInsertionEffect &#125; from &#x27;react&#x27;;function useCSS(rule) &#123; useInsertionEffect(() =&gt; &#123; // åœ¨æµè§ˆå™¨é‡æ–°è®¡ç®—å¸ƒå±€å‰æ’å…¥æ ·å¼ const style = document.createElement(&#x27;style&#x27;); style.textContent = rule; document.head.appendChild(style); return () =&gt; &#123; document.head.removeChild(style); &#125;; &#125;, [rule]);&#125;function App() &#123; useCSS(` .dynamic-class &#123; color: red; font-size: 20px; &#125; `); return &lt;div className=&quot;dynamic-class&quot;&gt;åŠ¨æ€æ ·å¼&lt;/div&gt;;&#125; æ–°çš„æœåŠ¡ç«¯æ¸²æŸ“æ¶æ„React 18 æ”¹è¿›äº† SSR æ€§èƒ½ï¼š æµå¼ SSRï¼šæœåŠ¡å™¨å¯ä»¥åˆ†å—å‘é€ HTML é€‰æ‹©æ€§ Hydrationï¼šä¼˜å…ˆæ°´åŒ–ç”¨æˆ·æ­£åœ¨äº¤äº’çš„éƒ¨åˆ† 123456789101112131415import &#123; renderToPipeableStream &#125; from &#x27;react-dom/server&#x27;;// æœåŠ¡ç«¯function handleRequest(req, res) &#123; const &#123; pipe &#125; = renderToPipeableStream(&lt;App /&gt;, &#123; onShellReady() &#123; res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/html&#x27;); pipe(res); &#125; &#125;);&#125;// å®¢æˆ·ç«¯import &#123; hydrateRoot &#125; from &#x27;react-dom/client&#x27;;hydrateRoot(document.getElementById(&#x27;root&#x27;), &lt;App /&gt;); Strict Mode çš„å˜åŒ–React 18 çš„ä¸¥æ ¼æ¨¡å¼ä¼šåœ¨å¼€å‘ç¯å¢ƒä¸­åŒé‡è°ƒç”¨æŸäº›å‡½æ•°ï¼Œå¸®åŠ©å‘ç°å‰¯ä½œç”¨ï¼š 1234567891011121314import &#123; StrictMode &#125; from &#x27;react&#x27;;// åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä»¥ä¸‹ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ï¼š// - ç»„ä»¶å‡½æ•°ä½“// - useStateã€useMemoã€useReducer çš„åˆå§‹åŒ–å‡½æ•°// - useEffectã€useLayoutEffectã€useInsertionEffect çš„ setup å‡½æ•°function App() &#123; return ( &lt;StrictMode&gt; &lt;MyComponent /&gt; &lt;/StrictMode&gt; );&#125; æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ1. åˆç†ä½¿ç”¨ memoã€useMemoã€useCallback12345678910111213141516171819202122232425// é¿å…è¿‡åº¦ä¼˜åŒ–// é”™è¯¯ï¼šå¯¹ç®€å•ç»„ä»¶ä½¿ç”¨ memoconst SimpleButton = memo((&#123; label &#125;) =&gt; &lt;button&gt;&#123;label&#125;&lt;/button&gt;);// æ­£ç¡®ï¼šå¯¹å¤æ‚ç»„ä»¶ä½¿ç”¨ memoconst ComplexList = memo((&#123; items &#125;) =&gt; &#123; return ( &lt;ul&gt; &#123;items.map(item =&gt; ( &lt;ExpensiveItem key=&#123;item.id&#125; data=&#123;item&#125; /&gt; ))&#125; &lt;/ul&gt; );&#125;);// æ­£ç¡®ï¼šé…åˆä½¿ç”¨ useCallbackfunction Parent() &#123; const [count, setCount] = useState(0); const handleClick = useCallback(() =&gt; &#123; console.log(&#x27;Clicked&#x27;); &#125;, []); return &lt;ComplexList items=&#123;items&#125; onClick=&#123;handleClick&#125; /&gt;;&#125; 2. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½1234567891011121314151617181920212223import &#123; lazy, Suspense &#125; from &#x27;react&#x27;;// è·¯ç”±çº§åˆ«åˆ†å‰²const Dashboard = lazy(() =&gt; import(&#x27;./Dashboard&#x27;));const Profile = lazy(() =&gt; import(&#x27;./Profile&#x27;));// ç»„ä»¶çº§åˆ«åˆ†å‰²const HeavyChart = lazy(() =&gt; import(&#x27;./HeavyChart&#x27;));function App() &#123; const [showChart, setShowChart] = useState(false); return ( &lt;div&gt; &lt;button onClick=&#123;() =&gt; setShowChart(true)&#125;&gt;æ˜¾ç¤ºå›¾è¡¨&lt;/button&gt; &#123;showChart &amp;&amp; ( &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt; &lt;HeavyChart /&gt; &lt;/Suspense&gt; )&#125; &lt;/div&gt; );&#125; 3. è™šæ‹ŸåŒ–é•¿åˆ—è¡¨1234567891011121314151617181920import &#123; FixedSizeList &#125; from &#x27;react-window&#x27;;function VirtualList(&#123; items &#125;) &#123; const Row = (&#123; index, style &#125;) =&gt; ( &lt;div style=&#123;style&#125;&gt; &#123;items[index].name&#125; &lt;/div&gt; ); return ( &lt;FixedSizeList height=&#123;600&#125; itemCount=&#123;items.length&#125; itemSize=&#123;50&#125; width=&quot;100%&quot; &gt; &#123;Row&#125; &lt;/FixedSizeList&gt; );&#125; 4. é¿å…ä¸å¿…è¦çš„æ¸²æŸ“1234567891011121314151617181920212223242526272829// ä½¿ç”¨ key ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“function TodoList(&#123; todos &#125;) &#123; return ( &lt;ul&gt; &#123;todos.map(todo =&gt; ( // ä½¿ç”¨ç¨³å®šçš„ ID ä½œä¸º key &lt;li key=&#123;todo.id&#125;&gt;&#123;todo.text&#125;&lt;/li&gt; ))&#125; &lt;/ul&gt; );&#125;// æå–ä¸å˜çš„å†…å®¹åˆ°ç»„ä»¶å¤–const STATIC_OPTIONS = [ &#123; value: &#x27;1&#x27;, label: &#x27;é€‰é¡¹ 1&#x27; &#125;, &#123; value: &#x27;2&#x27;, label: &#x27;é€‰é¡¹ 2&#x27; &#125;];function Select() &#123; return ( &lt;select&gt; &#123;STATIC_OPTIONS.map(opt =&gt; ( &lt;option key=&#123;opt.value&#125; value=&#123;opt.value&#125;&gt; &#123;opt.label&#125; &lt;/option&gt; ))&#125; &lt;/select&gt; );&#125; 5. ä½¿ç”¨ Transitions ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ1234567891011121314151617181920212223242526272829303132import &#123; useState, useTransition &#125; from &#x27;react&#x27;;function App() &#123; const [isPending, startTransition] = useTransition(); const [tab, setTab] = useState(&#x27;home&#x27;); function selectTab(nextTab) &#123; startTransition(() =&gt; &#123; setTab(nextTab); &#125;); &#125; return ( &lt;div&gt; &lt;TabButton isActive=&#123;tab === &#x27;home&#x27;&#125; onClick=&#123;() =&gt; selectTab(&#x27;home&#x27;)&#125; &gt; é¦–é¡µ &lt;/TabButton&gt; &lt;TabButton isActive=&#123;tab === &#x27;posts&#x27;&#125; onClick=&#123;() =&gt; selectTab(&#x27;posts&#x27;)&#125; &gt; æ–‡ç«  &#123;isPending &amp;&amp; &#x27;(åŠ è½½ä¸­...)&#x27;&#125; &lt;/TabButton&gt; &#123;tab === &#x27;home&#x27; &amp;&amp; &lt;HomePage /&gt;&#125; &#123;tab === &#x27;posts&#x27; &amp;&amp; &lt;PostsPage /&gt;&#125; &lt;/div&gt; );&#125; 6. å›¾ç‰‡ä¼˜åŒ–12345678910111213141516171819202122232425262728// ä½¿ç”¨æ‡’åŠ è½½function LazyImage(&#123; src, alt &#125;) &#123; return ( &lt;img src=&#123;src&#125; alt=&#123;alt&#125; loading=&quot;lazy&quot; decoding=&quot;async&quot; /&gt; );&#125;// å“åº”å¼å›¾ç‰‡function ResponsiveImage(&#123; src, alt &#125;) &#123; return ( &lt;picture&gt; &lt;source media=&quot;(max-width: 600px)&quot; srcSet=&#123;`$&#123;src&#125;-small.jpg`&#125; /&gt; &lt;source media=&quot;(max-width: 1200px)&quot; srcSet=&#123;`$&#123;src&#125;-medium.jpg`&#125; /&gt; &lt;img src=&#123;`$&#123;src&#125;-large.jpg`&#125; alt=&#123;alt&#125; /&gt; &lt;/picture&gt; );&#125; 7. çŠ¶æ€ç®¡ç†ä¼˜åŒ–1234567891011121314151617181920212223// ä½¿ç”¨ Context æ—¶é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“const StateContext = createContext();const DispatchContext = createContext();function Provider(&#123; children &#125;) &#123; const [state, dispatch] = useReducer(reducer, initialState); return ( &lt;StateContext.Provider value=&#123;state&#125;&gt; &lt;DispatchContext.Provider value=&#123;dispatch&#125;&gt; &#123;children&#125; &lt;/DispatchContext.Provider&gt; &lt;/StateContext.Provider&gt; );&#125;// ç»„ä»¶åªè®¢é˜…éœ€è¦çš„éƒ¨åˆ†function Component() &#123; const dispatch = useContext(DispatchContext); // ä¸ä¼šå›  state å˜åŒ–è€Œé‡æ¸²æŸ“ const count = useContext(StateContext).count; // åªåœ¨ count å˜åŒ–æ—¶é‡æ¸²æŸ“ return &lt;div onClick=&#123;() =&gt; dispatch(&#123; type: &#x27;INCREMENT&#x27; &#125;)&#125;&gt;&#123;count&#125;&lt;/div&gt;;&#125; 8. ä½¿ç”¨ Web Workers å¤„ç†å¤æ‚è®¡ç®—1234567891011121314151617181920212223import &#123; useEffect, useState &#125; from &#x27;react&#x27;;function useWorker(workerFn) &#123; const [result, setResult] = useState(null); useEffect(() =&gt; &#123; const worker = new Worker( new URL(&#x27;./worker.js&#x27;, import.meta.url) ); worker.onmessage = (e) =&gt; setResult(e.data); return () =&gt; worker.terminate(); &#125;, []); return result;&#125;// worker.jsself.onmessage = (e) =&gt; &#123; const result = heavyComputation(e.data); self.postMessage(result);&#125;; æ€»ç»“React 18 å¸¦æ¥äº†å¹¶å‘æ¸²æŸ“ã€è‡ªåŠ¨æ‰¹å¤„ç†ã€Transitions ç­‰å¼ºå¤§ç‰¹æ€§ï¼Œæå¤§æå‡äº†åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥ï¼š åˆç†ä½¿ç”¨ Hooksï¼šç†è§£æ¯ä¸ª Hook çš„ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µ æ€§èƒ½ä¼˜åŒ–ï¼šé¿å…è¿‡æ—©ä¼˜åŒ–ï¼Œå…ˆæµ‹é‡å†ä¼˜åŒ– ä»£ç åˆ†å‰²ï¼šä½¿ç”¨ lazy å’Œ Suspense å‡å°‘åˆå§‹åŠ è½½æ—¶é—´ å¹¶å‘ç‰¹æ€§ï¼šåˆ©ç”¨ Transitions å’Œ useDeferredValue ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ ç±»å‹å®‰å…¨ï¼šä½¿ç”¨ TypeScript æé«˜ä»£ç è´¨é‡ æµ‹è¯•ï¼šç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ç¡®ä¿ä»£ç å¯é æ€§","categories":[{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"}],"tags":[{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"},{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"},{"name":"Hooks","slug":"Hooks","permalink":"https://zouhualu.github.io/tags/Hooks/"}]},{"title":"Vue3æºç å‰–æ","slug":"vue3æºç å‰–æ","date":"2024-12-15T11:03:11.000Z","updated":"2025-11-25T06:34:44.773Z","comments":true,"path":"20241215/vue3æºç å‰–æ/","permalink":"https://zouhualu.github.io/20241215/vue3%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/","excerpt":"","text":"æœ¬æ–‡å¯¹åº”çš„Vue3æºç ç‰ˆæœ¬ï¼š3.5.13 å·¥ç¨‹æ¶æ„è®¾è®¡ ã€ç¼–è¯‘å¤„ç†ã€‘å°† vue æ–‡ä»¶ç¼–è¯‘ä¸ºå‡½æ•°æˆ–è€…å¯¹è±¡ compiler-core compiler-dom compiler-sfc compiler-ssr ã€å“åº”å¼ç³»ç»Ÿã€‘å°†çŠ¶æ€æ•°æ®ä¸è§†å›¾æ›´æ–°é“¾æ¥èµ·æ¥ reactivity ã€è¿è¡Œæ—¶æ¸²æŸ“ã€‘æ•°æ®æ›´æ–°æ—¶éœ€è¦é‡æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸­ runtime-core runtime-dom runtime-test // ç”¨äºæµ‹è¯• shared æ–‡ä»¶å¤¹ä¸‹çš„ä»£ç æ˜¯å…¨å±€å…±äº«çš„ï¼Œæ¯”å¦‚ä¸€äº›å·¥å…·å‡½æ•°ã€å¸¸é‡ç­‰ç­‰ ã€å…¥å£åŒ…ã€‘vue æ–‡ä»¶å¤¹ä¸‹çš„ä»£ç æ˜¯å…¥å£æ–‡ä»¶ï¼Œæä¾›å¼€å‘è€…ä½¿ç”¨çš„å†…å®¹ compiler-coreã€compiler-domã€compiler-sfccompiler-corecompiler-core æ˜¯ Vue 3 çš„ç¼–è¯‘å™¨æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£å°† Vue æ¨¡æ¿ç¼–è¯‘ä¸º JavaScript æ¸²æŸ“å‡½æ•°ã€‚ å®ƒæ˜¯åº•å±‚é€šç”¨æ¨¡å—ï¼Œä¸ç›´æ¥å¤„ç† .vue æ–‡ä»¶ï¼Œè€Œæ˜¯ä¸ºå„ç§ Vue ç›¸å…³çš„ç¼–è¯‘åœºæ™¯æä¾›åŸºç¡€èƒ½åŠ›ï¼ˆä¾‹å¦‚ï¼šåœ¨é SFC åœºæ™¯ä¸‹ç¼–è¯‘çº¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰ã€‚ parser è§£æå™¨ï¼ˆParser è´Ÿè´£ â€œè¯»æ‡‚â€ æ¨¡æ¿ç»“æ„ï¼‰ è§£æå™¨çš„ä½œç”¨æ˜¯å°† Vue æ¨¡æ¿å­—ç¬¦ä¸²è§£æä¸º ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ è§£æå™¨çš„è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ª ASTï¼ŒAST ä¸­åŒ…å«äº†æ¨¡æ¿çš„ç»“æ„ä¿¡æ¯ transformer è½¬æ¢å™¨ï¼ˆTransformer è´Ÿè´£ â€œç†è§£â€ æ¨¡æ¿è¯­ä¹‰ï¼‰ è½¬æ¢å™¨çš„ä½œç”¨æ˜¯å¯¹ AST è¿›è¡Œè½¬æ¢ï¼Œå°† AST è½¬æ¢ä¸ºä¸€ä¸ªæ›´ä¼˜åŒ–çš„ AST è½¬æ¢å™¨çš„è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ªä¼˜åŒ–åçš„ ASTï¼Œä¼˜åŒ–åçš„ AST ä¸­åŒ…å«äº†æ›´å¤šçš„å…ƒæ•°æ®ä¿¡æ¯ codegen ä»£ç ç”Ÿæˆå™¨ï¼ˆCodegen è´Ÿè´£ â€œç¿»è¯‘â€ ä¸ºå¯æ‰§è¡Œä»£ç render å‡½æ•°ï¼‰ ä»£ç ç”Ÿæˆå™¨çš„ä½œç”¨æ˜¯å°† AST è½¬æ¢ä¸º JavaScript ä»£ç  ä»£ç ç”Ÿæˆå™¨çš„è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œæ¸²æŸ“å‡½æ•°çš„ä½œç”¨æ˜¯å°†æ•°æ®æ¸²æŸ“åˆ° DOM ä¸­ æ•´ä½“æµç¨‹ é€šè¿‡ viteã€webpack å¯åŠ¨ï¼ˆæ‰“åŒ…ï¼‰vue é¡¹ç›®ï¼Œvite-plugin-vue(webpack vue-loader) åˆ†è¯å™¨ï¼ˆTokenizer è´Ÿè´£ â€œåˆ‡åˆ†â€ æ¨¡æ¿ä¸º tokensï¼‰ è§£æå™¨ï¼ˆParser å°†åˆ†è¯ tokens è½¬æ¢ä¸º astï¼‰ è½¬æ¢å™¨ï¼ˆTransformer è´Ÿè´£ä¼˜åŒ– astï¼‰ ä»£ç ç”Ÿæˆå™¨ï¼ˆCodegen å°† ast è½¬æ¢ä¸º render å‡½æ•°ï¼‰ æ¸²æŸ“å‡½æ•°ï¼ˆRender è´Ÿè´£ â€œæ‰§è¡Œâ€ æ¸²æŸ“å‡½æ•°ï¼Œå°†æ•°æ®æ¸²æŸ“åˆ° DOM ä¸­ï¼‰ æŒ‚è½½ï¼ˆMount è´Ÿè´£å°†æ¸²æŸ“å‡½æ•°æŒ‚è½½åˆ° DOM ä¸­ï¼‰ compiler-dom compiler-dom æ˜¯ Vue 3 çš„ DOM ç¼–è¯‘å™¨ï¼Œå®ƒè´Ÿè´£å°† Vue æ¨¡æ¿ç¼–è¯‘ä¸º DOM æ“ä½œä»£ç ã€‚ compiler-dom æ˜¯åŸºäº compiler-core çš„æµè§ˆå™¨ç¯å¢ƒä¸“ç”¨æ‰©å±•ï¼Œå®ƒåœ¨æ ¸å¿ƒæ¡†æ¶ä¹‹ä¸Šè¡¥å……äº†æµè§ˆå™¨ DOM ç¯å¢ƒç‰¹æœ‰çš„ç¼–è¯‘é€»è¾‘ï¼Œä¾‹å¦‚ï¼š å¤„ç† HTML æ ‡ç­¾ã€å±æ€§ï¼ˆå¦‚ classã€styleï¼‰ã€è‡ªé—­åˆæ ‡ç­¾ç­‰ DOM ç‰¹æ€§ã€‚ æ”¯æŒ v-htmlã€v-text ç­‰æ“ä½œ DOM çš„æŒ‡ä»¤ã€‚ ç”Ÿæˆä¸æµè§ˆå™¨ DOM æ“ä½œåŒ¹é…çš„æ¸²æŸ“å‡½æ•°ä»£ç ï¼ˆå¦‚åˆ›å»ºçœŸå® DOM èŠ‚ç‚¹çš„ API è°ƒç”¨ï¼‰ã€‚ compiler-sfccompiler-sfc æ˜¯ Vue 3 çš„å•æ–‡ä»¶ç»„ä»¶ç¼–è¯‘å™¨ï¼Œå®ƒè´Ÿè´£å°† Vue å•æ–‡ä»¶ç»„ä»¶ç¼–è¯‘ä¸º JavaScript æ¸²æŸ“å‡½æ•°ã€‚ æ˜¯ä¸Šå±‚ä¸“ç”¨æ¨¡å—ï¼ŒåŸºäº compiler-core å®ç°äº†å¯¹ SFC æ ¼å¼çš„å®Œæ•´ç¼–è¯‘æµç¨‹ï¼Œæ˜¯ Vue å•æ–‡ä»¶ç»„ä»¶å¼€å‘çš„æ ¸å¿ƒä¾èµ–ï¼ˆå¦‚ Viteã€Vue CLIç­‰å·¥å…·éƒ½ä¼šç”¨åˆ°å®ƒï¼‰ã€‚ å“åº”å¼å¤„ç† dep ä¾èµ– track trigger notify collection ä¾èµ–æ”¶é›† MutableReactiveHandlerï¼Œå¯è¯»å¯å†™çŠ¶æ€æ•°æ®è·Ÿè¸ª å½“æ•°æ®è¢«è®¿é—®æ—¶ï¼Œè§¦å‘ proxy çš„ getï¼Œtrack ä¾èµ–æ”¶é›† å½“æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œè§¦å‘ proxy çš„ setï¼Œtrigger ä¾èµ–è§¦å‘ refã€reactive watch effect å‰¯ä½œç”¨ è¿è¡Œæ—¶å¤„ç†runtime-coreruntime-core æ˜¯ Vue è¿è¡Œæ—¶çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸å…·ä½“å¹³å°ï¼ˆå¦‚æµè§ˆå™¨ã€Node.jsã€Weex ç­‰ï¼‰æ— å…³ï¼ŒåŒ…å«äº† Vue æœ€æ ¸å¿ƒçš„é€»è¾‘ï¼Œæ˜¯è·¨å¹³å°èƒ½åŠ›çš„åŸºç¡€ã€‚ ä¸»è¦ä½œç”¨ï¼š è™šæ‹Ÿ DOM å¤„ç†ï¼šå®ç°è™šæ‹Ÿ DOM çš„åˆ›å»ºã€æ›´æ–°ã€diff ç®—æ³•ç­‰æ ¸å¿ƒé€»è¾‘ï¼Œæ˜¯ Vue é«˜æ•ˆæ›´æ–°è§†å›¾çš„åŸºç¡€ã€‚ ç»„ä»¶ç³»ç»Ÿï¼šå®šä¹‰ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ setupã€reactiveã€ref ç­‰ï¼‰ã€äº‹ä»¶å¤„ç†ã€Props ä¼ é€’ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚ å“åº”å¼ç³»ç»Ÿé›†æˆï¼šä¸ @vue/reactivity æ¨¡å—åä½œï¼Œå®ç°æ•°æ®å˜åŒ–é©±åŠ¨è§†å›¾æ›´æ–°çš„å“åº”å¼æœºåˆ¶ã€‚ æ¸²æŸ“è°ƒåº¦ï¼šè´Ÿè´£åè°ƒç»„ä»¶æ¸²æŸ“çš„ä¼˜å…ˆçº§ã€å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—ç­‰ï¼Œä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ã€‚ å¹³å°æ— å…³çš„æ¸²æŸ“é€»è¾‘ï¼šå®šä¹‰äº†æ¸²æŸ“å™¨ï¼ˆRendererï¼‰çš„æŠ½è±¡æ¥å£ï¼Œä¸ç›´æ¥æ“ä½œ DOMï¼Œè€Œæ˜¯é€šè¿‡æŠ½è±¡æ¥å£ä¸å…·ä½“å¹³å°äº¤äº’ã€‚ ç®€å•è¯´ï¼Œruntime-core æ˜¯ Vue çš„ â€œçµé­‚â€ï¼ŒåŒ…å«äº†æ‰€æœ‰ä¸ä¾èµ–å…·ä½“å¹³å°çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ˜¯å®ç°è·¨å¹³å°çš„åŸºç¡€ã€‚ diff ç®—æ³• ç®€å• diff ç®—æ³• åŒç«¯ diff ç®—æ³• å¿«é€Ÿ diff ç®—æ³•ï¼ˆç»ˆæç‰ˆæœ¬ï¼‰ runtime-domruntime-dom æ˜¯ é’ˆå¯¹æµè§ˆå™¨å¹³å°çš„è¿è¡Œæ—¶æ‰©å±•ï¼ŒåŸºäº runtime-core å®ç°ï¼Œè´Ÿè´£å°†æ ¸å¿ƒé€»è¾‘ä¸æµè§ˆå™¨çš„ DOM ç¯å¢ƒå¯¹æ¥ã€‚ ä¸»è¦ä½œç”¨ï¼š DOM æ“ä½œå°è£…ï¼šæä¾›æµè§ˆå™¨ç‰¹æœ‰çš„ DOM æ“ä½œæ–¹æ³•ï¼Œå¦‚åˆ›å»ºå…ƒç´ ï¼ˆcreateElementï¼‰ã€æ’å…¥å…ƒç´ ï¼ˆinsertï¼‰ã€è®¾ç½®å±æ€§ï¼ˆsetAttributeï¼‰ã€äº‹ä»¶ç»‘å®šï¼ˆaddEventListenerï¼‰ç­‰ã€‚ å¤„ç†æµè§ˆå™¨ç‰¹æœ‰å±æ€§å’Œäº‹ä»¶ï¼šä¾‹å¦‚ classã€style ç­‰å±æ€§çš„ç‰¹æ®Šå¤„ç†ï¼Œä»¥åŠæµè§ˆå™¨äº‹ä»¶çš„å…¼å®¹å¤„ç†ï¼ˆå¦‚äº‹ä»¶å†’æ³¡ã€é»˜è®¤è¡Œä¸ºç­‰ï¼‰ã€‚ é›†æˆæµè§ˆå™¨ APIï¼šå°† runtime-core çš„æŠ½è±¡æ¥å£æ˜ å°„åˆ°å®é™…çš„æµè§ˆå™¨ APIï¼Œä¾‹å¦‚å°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOMã€‚ æä¾›æµè§ˆå™¨ç¯å¢ƒçš„æ¸²æŸ“å™¨ï¼šåŸºäº runtime-core çš„æ¸²æŸ“å™¨æ¥å£ï¼Œå®ç°æµè§ˆå™¨ç¯å¢ƒä¸‹çš„å…·ä½“æ¸²æŸ“é€»è¾‘ã€‚ ç®€å•è¯´ï¼Œruntime-dom æ˜¯ Vue ä¸æµè§ˆå™¨ DOM äº¤äº’çš„ â€œæ¡¥æ¢â€ï¼Œè®© runtime-core çš„æ ¸å¿ƒé€»è¾‘èƒ½åœ¨æµè§ˆå™¨ä¸­ç”Ÿæ•ˆã€‚ runtime-core è´Ÿè´£ç»„ä»¶çš„çŠ¶æ€ç®¡ç†ã€è™šæ‹Ÿ DOM æ„å»ºå’Œ diff è®¡ç®—ã€‚ runtime-dom è´Ÿè´£å°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOMï¼Œå¹¶å¤„ç†æµè§ˆå™¨ç‰¹æœ‰çš„äº¤äº’ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ã€æ ·å¼æ›´æ–°ç­‰ï¼‰ã€‚ æ‰‹å†™ reactive1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556let targetMap = new weakMap()enum ReactiveFlags &#123; IS_REACTIVE = &#x27;__v_isReactive&#x27;,&#125;const mutableReactiveHandler = &#123; get(target, key, receiver) &#123; // åªè¦è¢«ä»£ç†äº†ä¸”è®¿é—®äº†è¿™ä¸ªå±æ€§å°±è¿”å› true if (key === ReactiveFlags.IS_REACTIVE) &#123; return true &#125; // æ”¶é›†ä¾èµ–ï¼Œå½“å–å€¼çš„æ—¶å€™ï¼Œè®©å“åº”å¼å¯¹è±¡çš„å±æ€§ä¸ effect å…³è”èµ·æ¥ track(target, key) return Reflect.get(target, key, receiver) &#125;, set(target, key, value, receiver) &#123; let oldValue = target[key] // æ—§å€¼ let r = Reflect.set(target, key, value, receiver) // è¿”å›çš„æ˜¯å¸ƒå°”ç±»å‹ // åˆ¤æ–­æ–°æ—§å€¼æ˜¯å¦ä¸€æ · // å½“è®¾ç½®å€¼çš„æ—¶å€™ï¼Œè®©å¯¹åº”çš„ effect æ‰§è¡Œ if (oldValue !== value) &#123; trigger(target, key, value, oldValue) &#125; return r &#125;&#125;export function createReactiveObject(target) &#123; // å¿…é¡»æ˜¯å¯¹è±¡ if (!isObject(target)) &#123; return target &#125; if (target[ReactiveFlags.IS_REACTIVE]) &#123; return target &#125; // é‡å¤ä»£ç† ç›´æ¥è¿”å›ä»£ç†å¯¹è±¡ const existingProxy = targetMap.get(target) if (existingProxy) &#123; return existingProxy &#125; // ä»£ç†å¯¹è±¡ const proxy = new Proxy(target, mutableReactiveHandler) // ç¼“å­˜ä»£ç†å¯¹è±¡ targetMap.set(target, proxy) return proxy&#125;export function reactive(target) &#123; return createReactiveObject(target)&#125; ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¦ç”¨ Reflect è€Œä¸æ˜¯ç›´æ¥ç”¨ target[key]ï¼Ÿä¸ºäº†è§£å†³ this æŒ‡å‘é—®é¢˜ ä¸¾ä¸ªä¾‹å­ï¼š 123456789101112131415161718192021const obj = &#123; name: &#x27;jayhwang&#x27;, age: 18, sex: &#x27;male&#x27;, get aliasName() &#123; return this.name + &#x27;èŠ±é¹¿&#x27; &#125;&#125;const proxy = new Proxy(obj, &#123; get(target, key) &#123; console.log(&#x27;get&#x27;, key) return target[key] &#125;, set(target, key, value) &#123; target[key] = value return true // return Reflect.set(target, key, value) &#125;&#125;)console.log(proxy.aliasName) æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç° åœ¨è¯»å–aliasNameå±æ€§æ—¶ï¼Œä¼šè§¦å‘get aliasName() { return this.name + &#39;èŠ±é¹¿&#39; }ï¼Œè¿™é‡Œé¢æœ‰this.nameï¼Œå¯æ˜¯æˆ‘ä»¬åœ¨è¯»å–this.nameçš„æ—¶å€™ï¼Œæ²¡æœ‰è§¦å‘ä¸‹é¢çš„ proxy çš„ get çš„æ‰“å°ï¼Œè¿™å°±è¯´æ˜è¿™ä¸ª thisæŒ‡å‘å¹¶ä¸å¯¹ï¼Œä»–æ²¡æœ‰è¢«ä»£ç†åˆ°ã€‚ æˆ‘ä»¬å†çœ‹ä¸‹es6ä¸­Reflectçš„getæ–¹æ³• åŸºæœ¬è¯­æ³•ï¼šReflect.get(target, propertyKey[, receiver]) å‚æ•°è¯´æ˜ï¼š targetï¼šè¦è·å–å±æ€§å€¼çš„ç›®æ ‡å¯¹è±¡ propertyKeyï¼šè¦è·å–çš„å±æ€§åç§°ï¼ˆå­—ç¬¦ä¸²æˆ– Symbolï¼‰ receiverï¼ˆå¯é€‰ï¼‰ï¼šå¦‚æœ target å¯¹è±¡ä¸­æŒ‡å®šäº† getterï¼Œreceiver ä¼šä½œä¸º getter å‡½æ•°çš„ this å€¼ è¿”å›å€¼ï¼šè¿”å›è·å–åˆ°çš„å±æ€§å€¼ æ‰‹å†™ effect å‰¯ä½œç”¨å‡½æ•°effect å‡½æ•°æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒè´Ÿè´£åˆ›å»º â€œå‰¯ä½œç”¨â€ï¼ˆeffectï¼‰ï¼Œå¹¶å»ºç«‹å“åº”å¼æ•°æ®ä¸å‰¯ä½œç”¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å½“å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾èµ–å®ƒçš„å‰¯ä½œç”¨ä¼šè‡ªåŠ¨é‡æ–°æ‰§è¡Œï¼Œè¿™æ˜¯Vue 3 å“åº”å¼ç³»ç»Ÿå®ç°è‡ªåŠ¨æ›´æ–°çš„åŸºç¡€æœºåˆ¶ã€‚ åŸºæœ¬æ¦‚å¿µâ€œå‰¯ä½œç”¨â€ æŒ‡çš„æ˜¯ä¸€æ®µä¼šå½±å“å¤–éƒ¨ç¯å¢ƒçš„ä»£ç ï¼ˆä¾‹å¦‚ä¿®æ”¹å…¨å±€å˜é‡ã€æ›´æ–° DOM ç­‰ï¼‰ã€‚åœ¨ Vue ä¸­ï¼Œç»„ä»¶çš„æ¸²æŸ“å‡½æ•°å°±æ˜¯ä¸€ç§å…¸å‹çš„å‰¯ä½œç”¨ï¼ˆå› ä¸ºå®ƒä¼šç”ŸæˆDOMï¼‰ã€‚effect å‡½æ•°çš„ä½œç”¨å°±æ˜¯åŒ…è£¹è¿™æ®µå‰¯ä½œç”¨ä»£ç ï¼Œå¹¶è¿½è¸ªå…¶ä¸­ä½¿ç”¨çš„å“åº”å¼æ•°æ®ï¼Œå½¢æˆ â€œä¾èµ–æ”¶é›†â€ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142export let activeEffect = null // å½“å‰çš„ effect// æ¸…é™¤ä¾èµ–export function cleanupEffect(effect) &#123; const &#123;deps&#125; = effect if (deps.length) &#123; for (let i = 0; i &lt; deps.length; i++) &#123; deps[i].delete(effect) &#125; deps.length = 0 &#125;&#125;export class ReactiveEffect &#123; public active = true // æ˜¯å¦æ˜¯æ¿€æ´»çš„ public deps = [] // ä¾èµ–çš„å“åº”å¼æ•°æ® public parent = null // çˆ¶çº§ effect constructor(public fn, private scheduler) &#123; this.fn = fn &#125; run() &#123; if (!this.active) &#123; return this.fn() // å…³é—­çŠ¶æ€ä¸‹ï¼Œæ¿€æ´»å‰¯ä½œç”¨ &#125; // å…¶ä½™æƒ…å†µä¸‹ï¼Œæ„å‘³ç€å‰¯ä½œç”¨æ˜¯æ¿€æ´»çŠ¶æ€ // å¤„ç† effect åµŒå¥— effect æƒ…å†µ try &#123; // å°†å½“å‰çš„ effect å˜æˆå…¨å±€çš„ï¼Œï¼Œå–å€¼çš„æ—¶å€™å¯ä»¥æ‹¿åˆ°å…¨å±€çš„ effect this.parent = activeEffect activeEffect = this cleanupEffect(this) // æ¸…é™¤ä¾èµ– return this.fn() // æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå‰¯ä½œç”¨å‡½æ•°é‡Œé¢çš„å“åº”å¼æ•°æ®çš„å–å€¼æ“ä½œä¼šè§¦å‘å‰é¢å†™çš„ reactive çš„ get æ–¹æ³• // åœ¨é‚£é‡Œå¯ä»¥æˆ‘ä»¬å–åˆ°å…¨å±€çš„ activeEffect &#125; finally &#123; activeEffect = this.parent this.parent = null &#125; &#125; // åœæ­¢ä¾èµ–æ”¶é›† stop() &#123; this.active = false // å½“å‰çš„ effect æ˜¯æ¿€æ´»çš„ï¼Œè®©ä»–å¤±æ´» cleanupEffect(this) &#125;&#125;export function effect(fn, options = &#123;&#125;) &#123; const _effect = new ReactiveEffect(fn, options.scheduler) _effect.run() // é»˜è®¤æ‰§è¡Œä¸€æ¬¡ const runner = _effect.run.bind(_effect) // ç»‘å®š this æŒ‡å‘ _effect runner.effect = _effect return runner // ç”¨äºå¯åŠ¨ä¾èµ–æ”¶é›†&#125;/** æ”¶é›†ä¾èµ–å…³ç³»ï¼Œå»ºç«‹æ˜ å°„è¡¨ï¼Œä¸€ä¸ªå“åº”å¼çš„ key å¯èƒ½å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ª effect å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ï¼š* effect(()=&gt;&#123;* document.title = obj.name* )* effect(()=&gt;&#123;* console.log(obj.name)* &#125;)* å½“ obj.name å˜åŒ–æ—¶ï¼Œä¸¤ä¸ª effect éƒ½éœ€è¦é‡æ–°æ‰§è¡Œ* */const targetMap = new weakMap() // æ˜ å°„è¡¨/** targetMapçš„æ•°æ®ç»“æ„ä¸¾ä¾‹ï¼š* &#123;* obj: &#123;* name: new Set([effect1, effect2]),* age: new Set([effect1])* &#125;* &#125;* * */// ä¾èµ–æ”¶é›†export function track(target, key) &#123; // å–å€¼æ“ä½œä¸æ˜¯å‘ç”Ÿåœ¨ effect ä¸­ï¼Œå°±ä¸éœ€è¦æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œç›´æ¥ return if (!activeEffect) &#123; return &#125; let depsMap = targetMap.get(target) if (!depsMap) &#123; // weakMapä¸­çš„ key åªèƒ½æ˜¯å¯¹è±¡ targetMap.set(target, depsMap = new Map()) &#125; let dep = depsMap.get(key) if (!dep) &#123; depsMap.set(key, dep = new Set()) &#125; trackEffect(dep)&#125;export function trackEffect(dep) &#123; // ä¾èµ–ä¸å­˜åœ¨ï¼Œé‚£å°±æ”¶é›†ä¾èµ– let shouldTrack = !dep.has(activeEffect) if (shouldTrack) &#123; dep.add(activeEffect) activeEffect.deps.push(dep) &#125;&#125;// ä¾èµ–è§¦å‘export function trigger(target, key, newValue, oldValue) &#123; const depsMap = targetMap.get(target) if (!depsMap) &#123; return &#125; const dep = depsMap.get(key) if (!dep) &#123; return &#125; triggerEffect(dep)&#125;export function triggerEffect(dep) &#123; /* * ä¸ºä»€ä¹ˆè¦ç”¨ effects é‡æ–°æ¥æ”¶ä¸€ä»½ï¼Ÿ * ç­”ï¼šé˜²æ­¢ä¾èµ–è§¦å‘æ—¶ï¼Œä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´æ— é™å¾ªç¯ * dep æ˜¯ set ç±»å‹çš„ï¼Œåœ¨ä¸‹æ–¹æ‰§è¡Œ run æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè§¦å‘ä¾èµ–æ¸…ç©ºæ“ä½œ * æ¥ç€åˆä¼šè§¦å‘ this.fn() æ–¹æ³•ï¼Œè¿™å°±åˆè§¦å‘äº†ä¾èµ–æ”¶é›† * è¿™æ ·ä¸€è¾¹æ¸…ç©ºä¸€è¾¹æ”¶é›†ï¼Œæ“ä½œçš„éƒ½æ˜¯åŒä¸€ä»½ setï¼Œå°±ä¼šå¯¼è‡´æ— é™å¾ªç¯ * æ‰€ä»¥è¦é‡æ–°å®šä¹‰ä¸€ä¸ªæ–°å˜é‡æ¥æ¥æ”¶ * */ const effects = [...dep] // æ–°å˜é‡æ¥æ”¶ä¸€ä»½ effects.forEach(effect =&gt; &#123; if (effect.scheduler) &#123; effect.scheduler() &#125; else &#123; effect.run() &#125; &#125;)&#125; æ‰‹å†™è®¡ç®—å±æ€§ computedcomputed ç¤ºä¾‹ 1234567891011121314151617// é»˜è®¤ä¸ä¼šæ‰§è¡Œï¼Œåªæœ‰è¯»å–çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œlet fullName = computed(() =&gt; &#123; return obj.firstName + obj.lastName&#125;)// å¤šæ¬¡è¯»å– computed å±æ€§ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä¼šæ‰§è¡Œï¼Œåé¢çš„è¯»å–éƒ½ä»ç¼“å­˜ä¸­å–console.log(fullName.value)console.log(fullName.value)console.log(fullName.value)// å½“ä¾èµ–çš„å€¼å˜åŒ–äº†ï¼Œä¼šé‡æ–°æ‰§è¡Œobj.firstName = &#x27;hello&#x27;console.log(fullName.value)// vue3ä¸­è®¡ç®—å±æ€§ä¹Ÿå…·å¤‡ä¾èµ–æ”¶é›†çš„åŠŸèƒ½effect(() =&gt; &#123; console.log(fullName.value)&#125;) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162import &#123;isFunction&#125; from &#x27;@vue/shared&#x27;const noop = () =&gt; &#123;&#125;class ComputedRefImpl &#123; dep = undefined // ä¾èµ–çš„å“åº”å¼æ•°æ® __v_isRef = true // è¡¨ç¤ºéœ€è¦ .value æ¥è°ƒç”¨ _dirty = true; // è¡¨ç¤ºæ˜¯å¦éœ€è¦é‡æ–°è®¡ç®— _value = undefined; // ç¼“å­˜å€¼ effect = undefined; // å‰¯ä½œç”¨å‡½æ•° constructor(getter, setter) &#123; this.getter = getter this.setter = setter this.effect = new ReactiveEffect(this.getter, () =&gt; &#123; this._dirty = true triggerEffect(this.dep) &#125;) &#125; // å±æ€§è®¿é—®å™¨ï¼Œå–å€¼çš„æ—¶å€™ä¾èµ–æ”¶é›† get value() &#123; // å¦‚æœæœ‰å…¨å±€ effectï¼Œæ„å‘³ç€è¿™ä¸ªè®¡ç®—å±æ€§åœ¨ effect ä¸­æ‰§è¡Œçš„ if (activeEffect) &#123; trackEffect(this.dep || (this.dep = new Set())) &#125; // ä¾èµ–æ”¶é›† track(this, &#x27;value&#x27;) if (this._dirty) &#123; this._value = this.effect.run() this._dirty = false &#125; return this._value &#125; // å±æ€§è®¾ç½®å™¨ set value(newValue) &#123; this.setter(newValue) &#125;&#125;export function computed(getterOrOptions) &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯å‡½æ•° let onlyGetter = isFunction(getterOrOptions) let getter let setter // åªæœ‰ getter æ²¡æœ‰ setterï¼Œè¯´æ˜æ˜¯åªè¯»å±æ€§ if (onlyGetter) &#123; getter = getterOrOptions setter = noop &#125; else &#123; // æœ‰ getter æœ‰ setterï¼Œè¯´æ˜æ˜¯å¯è¯»å†™å±æ€§ getter = getterOrOptions.get setter = getterOrOptions.set || noop &#125; return new ComputedRefImpl(getter, setter)&#125; æ‰‹å†™ ref12345678910111213141516171819202122232425262728293031323334export function ref() &#123; return new RefImpl()&#125;function toReactive(value) &#123; return isObject(value) ? reactive(value) : value&#125;class RefImpl &#123; dep = undefined __v_isRef = true // refæ ‡è¯† _value = undefined constructor(value) &#123; this._value = toReactive(value) &#125; get value() &#123; // ä¾èµ–æ”¶é›† if (activeEffect) &#123; trackEffects(this.dep || (this.dep = new Set())) &#125; return this._value &#125; set value(newValue) &#123; if (newValue !== this._value) &#123; // æ›´æ–°å€¼ this._value = toReactive(newValue) // è§¦å‘æ›´æ–° triggerEfect(this.dep) &#125; &#125;&#125; ref å’Œ reactive çš„åŒºåˆ«ref ç”¨äºåˆ›å»ºåŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”å¼æ•°æ®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åŒ…è£…å¼•ç”¨ç±»å‹ï¼ˆobjectã€arrayï¼‰ å¯¹äºåŸºæœ¬ç±»å‹ï¼šåˆ›å»ºä¸€ä¸ª{value:åŸå§‹å€¼}çš„åŒ…è£…å¯¹è±¡ï¼Œé€šè¿‡é‡å†™ value çš„ getterï¼ˆæ”¶é›†ä¾èµ–ï¼‰å’Œ setterï¼ˆè§¦å‘æ›´æ–°ï¼‰å®ç°å“åº”å¼ã€‚ å¯¹äºå¼•ç”¨ç±»å‹ï¼šå†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨ reactive æ–¹æ³•ï¼Œå°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå› æ­¤ ref(obj).value æœ¬è´¨æ˜¯ä¸€ä¸ª reactive å¯¹è±¡ã€‚ åœ¨ js ä¸­å¿…é¡»é€šè¿‡.valueè®¿é—®å’Œä¿®æ”¹å€¼ï¼›åœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥è®¿é—®ï¼Œè‡ªåŠ¨è§£åŒ…ï¼Œä¸éœ€è¦.valueã€‚ å¼•ç”¨ç±»å‹çš„ ref å¦‚æœç›´æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼Œæ–°å¯¹è±¡ä»ä¼šè¢«è½¬ä¸ºå“åº”å¼ï¼Œä¸ä¸¢å¤±å“åº”å¼ reactive ç”¨äºåˆ›å»ºå¼•ç”¨ç±»å‹æ•°æ®çš„å“åº”å¼ä»£ç†ï¼Œæ— æ³•ç›´æ¥å¤„ç†åŸºæœ¬ç±»å‹æ•°æ®ï¼ˆä¼šè­¦å‘Šä¸”ä¸ç”Ÿæ•ˆï¼‰ã€‚ é€šè¿‡Proxyä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œæ‹¦æˆªå¯¹è±¡çš„getå’Œsetæ“ä½œï¼Œå®ç°å“åº”å¼ã€‚å¦‚æœå¯¹è±¡å­˜åœ¨åµŒå¥—å±æ€§ï¼Œåˆ™é€’å½’å¤„ç†ã€‚ æ— è®ºåœ¨æ¨¡æ¿è¿˜æ˜¯è„šæœ¬ä¸­ï¼Œéƒ½å¯ä»¥ç›´æ¥è®¿é—®å’Œä¿®æ”¹å±æ€§ï¼Œæ— éœ€.valueã€‚ ä¸èƒ½ç›´æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šä¸¢å¤±å“åº”å¼ã€‚ è§£æ„ä¼šä¸¢å¤±å“åº”å¼ï¼Œéœ€è¦é€šè¿‡toRefæˆ–toRefså¤„ç†ï¼Œå¦‚ï¼šconst {name,age} = toRefs(user)ã€‚ watch å’Œ watchEffect çš„åŒºåˆ«watch æ˜¾å¼æŒ‡å®šä¾èµ–ï¼Œéœ€è¦æ‰‹åŠ¨å£°æ˜è¦ç›‘å¬çš„æ•°æ®æºï¼Œä»…å½“ä¾èµ–å˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œå›è°ƒã€‚ é»˜è®¤æ‡’æ‰§è¡Œï¼Œåˆå§‹åŒ–çš„æ—¶å€™ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œå›è°ƒï¼Œä»…å½“è¢«ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶æ‰è§¦å‘ã€‚å¦‚æœè¦åˆå§‹åŒ–æ‰§è¡Œä¸€æ¬¡ï¼Œéœ€æ‰‹åŠ¨é…ç½®immediate: trueã€‚ èƒ½è·å¾—æ–°æ—§å€¼ï¼Œå›è°ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šnewVal(å˜åŒ–åçš„å€¼)ã€oldVal(å˜åŒ–å‰çš„å€¼)ï¼Œæ–¹ä¾¿å¯¹æ¯”æ•°æ®å‰åå˜åŒ–çŠ¶æ€ã€‚ å»¶è¿Ÿæ‰§è¡Œï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œwatch ä¼šåœ¨æ•°æ®å˜åŒ–åç«‹å³æ‰§è¡Œå›è°ƒã€‚å¦‚æœè¦å»¶è¿Ÿæ‰§è¡Œï¼Œéœ€é…ç½®flush: &#39;post&#39;ï¼Œåœ¨ Dom æ›´æ–°åæ‰§è¡Œã€‚ watchEffect è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œæ— éœ€æ‰‹åŠ¨å£°æ˜ä¾èµ–ï¼Œè‡ªåŠ¨è¿½è¸ªå›è°ƒå‡½æ•°å†…éƒ¨ä½¿ç”¨çš„æ‰€æœ‰å“åº”å¼æ•°æ®ï¼Œåªè¦å‡½æ•°å†…éƒ¨è®¿é—®çš„åƒåŸå§‹æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘å›è°ƒã€‚ é»˜è®¤ç«‹å³æ‰§è¡Œï¼Œåˆå§‹åŒ–æ—¶ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œæ— éœ€é…ç½®immediate: trueã€‚ æ— å‚æ•°ï¼Œæ— æ³•ç›´æ¥è·å¾—å“åº”å¼æ•°æ®å˜åŒ–å‰åçš„å€¼ã€‚ å¦‚ä½•å°† template è½¬æ¢ä¸º render å‡½æ•°template æ˜¯å£°æ˜å¼çš„æ¨¡æ¿è¯­æ³•ï¼Œæœ€ç»ˆä¼šè¢« vue ç¼–è¯‘å™¨ç¼–è¯‘ä¸º render å‡½æ•°ï¼Œç”¨äºç”Ÿæˆè™šæ‹ŸDOMã€‚ å°† template è½¬æ¢ä¸º render å‡½æ•°ï¼Œæœ¬è´¨æ˜¯å°†æ¨¡æ¿çš„æ ‡ç­¾ã€å±æ€§ã€æŒ‡ä»¤ã€æ’å€¼ç­‰è¯­æ³•ï¼Œè½¬æ¢ä¸ºé€šè¿‡ h å‡½æ•°æè¿°çš„ javascript é€»è¾‘ã€‚ h å‡½æ•°Vue æä¾›çš„åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹çš„å‡½æ•°ï¼Œè¯­æ³•ä¸ºï¼šh(tag,props,children) tagï¼šèŠ‚ç‚¹çš„æ ‡ç­¾åæˆ–ç»„ä»¶ï¼Œå¦‚ &#39;div&#39;ã€&#39;span&#39; ç­‰ã€‚ propsï¼šèŠ‚ç‚¹çš„å±æ€§/æŒ‡ä»¤/äº‹ä»¶ï¼Œå¦‚ {id:&#39;app&#39;,class:&#39;container&#39;} ç­‰ã€‚ childrenï¼šèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œå¦‚ &#39;hello world&#39;ã€[h(&#39;div&#39;,&#39;hello world&#39;)] ç­‰ã€‚ ç¤ºä¾‹123456&lt;template&gt; &lt;div class=&quot;container&quot;&gt; Hello, Vue! &lt;/div&gt;&lt;/template&gt; 12345import &#123;h&#125; from &#x27;vue&#x27;render() &#123;return h(&#x27;div&#x27;, &#123;class: &#x27;container&#x27;&#125;, &#x27;Hello, Vue!&#x27;)&#125; vue çš„ diff ç®—æ³•åŸç†Vue çš„ diff ç®—æ³•æ˜¯è™šæ‹Ÿ DOM çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ ¸å¿ƒç›®çš„æ˜¯é€šè¿‡å¯¹æ¯”æ–°æ—§è™šæ‹Ÿ DOM æ•°çš„å·®å¼‚ï¼Œè®¡ç®—å‡ºæœ€å°åŒ–çš„ DOM æ“ä½œï¼Œä»è€Œæé«˜æ¸²æŸ“æ•ˆç‡ã€‚ patch æ–¹æ³•patch æ–¹æ³•æ˜¯ Vue ä¸­ç”¨äºå¯¹æ¯”æ–°æ—§è™šæ‹Ÿ DOM æ•°å·®å¼‚å¹¶æ›´æ–°çœŸå® DOM çš„æ ¸å¿ƒå‡½æ•°ã€‚ diff ç®—æ³•çš„æ ¸å¿ƒè®¾è®¡åŸåˆ™åŒå±‚æ¯”è¾ƒï¼Œä¸è·¨å±‚çº§è™šæ‹Ÿ DOM æ˜¯æ ‘å½¢ç»“æ„ï¼Œdiff ç®—æ³•åªå¯¹æ¯”åŒä¸€å±‚çº§çš„èŠ‚ç‚¹ï¼Œä¸è·¨å±‚çº§æ¯”è¾ƒï¼Œç®—æ³•å¤æ‚åº¦ä¸º O(n)ã€‚ å…ˆåˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦â€œå¯å¤ç”¨â€å¯¹æ¯”èŠ‚ç‚¹æ—¶ï¼Œé¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºâ€œç›¸åŒèŠ‚ç‚¹â€ï¼Œåªæœ‰å¯å¤ç”¨çš„èŠ‚ç‚¹æ‰éœ€è¦è¿›ä¸€æ­¥æ¯”è¾ƒç»†èŠ‚ï¼Œå¦åˆ™ç›´æ¥é”€æ¯æ—§èŠ‚ç‚¹å¹¶åˆ›å»ºæ–°èŠ‚ç‚¹ã€‚ åˆ¤æ–­æ˜¯å¦ä¸ºâ€œç›¸åŒèŠ‚ç‚¹â€çš„ä¾æ®ï¼š æ ‡ç­¾åç›¸åŒ key ç›¸åŒ æ˜¯å¦ä¸ºæ³¨é‡ŠèŠ‚ç‚¹ï¼ˆisCommentï¼‰ å¯¹æ¯”ç»„ä»¶èŠ‚ç‚¹ï¼Œç»„ä»¶ç±»å‹ç›¸åŒ Vue2çš„ diff ç®—æ³•æ ¸å¿ƒå½“ä¸¤ä¸ªèŠ‚ç‚¹è¢«åˆ¤å®šä¸ºâ€œç›¸åŒèŠ‚ç‚¹â€åï¼Œä¼šè¿›å…¥è¯¦ç»†å¯¹æ¯”æµç¨‹ï¼Œåˆ†ä¸ºå±æ€§å¯¹æ¯”å’Œå­èŠ‚ç‚¹å¯¹æ¯” å±æ€§å¯¹æ¯”å¯¹æ¯”æ–°æ—§èŠ‚ç‚¹çš„å±æ€§ï¼ˆattrsã€classã€style ç­‰ï¼‰ï¼Œæ‰¾å‡ºå·®å¼‚å¹¶æ›´æ–°åˆ°çœŸå® DOMï¼š å­èŠ‚ç‚¹å¯¹æ¯”Vue2é‡‡ç”¨çš„åŒæŒ‡é’ˆæ³•ï¼ˆå¤´å°¾æŒ‡é’ˆï¼‰ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š åˆå§‹åŒ–æŒ‡é’ˆï¼š æ—§èŠ‚ç‚¹çš„å¤´æŒ‡é’ˆï¼ˆoldStartIdxï¼‰ æ—§èŠ‚ç‚¹çš„å°¾æŒ‡é’ˆï¼ˆoldEndIdxï¼‰ æ–°èŠ‚ç‚¹çš„å¤´æŒ‡é’ˆï¼ˆnewStartIdxï¼‰ æ–°èŠ‚ç‚¹çš„å°¾æŒ‡é’ˆï¼ˆnewEndIdxï¼‰ å››ç§å¿«é€Ÿå¯¹æ¯”åœºæ™¯ å¤´å¤´å¯¹æ¯” å°¾å°¾å¯¹æ¯” æ—§å¤´æ–°å°¾å¯¹æ¯” æ—§å°¾æ–°å¤´å¯¹æ¯” key æ˜ å°„è¡¨æŸ¥æ‰¾ï¼ˆå¤„ç†ä¹±åºåœºæ™¯ï¼‰ ä¸ºæ—§èŠ‚ç‚¹åˆ—è¡¨åˆ›å»º key â†’ ç´¢å¼• çš„æ˜ å°„è¡¨ï¼ˆoldKeyToIdxï¼‰ï¼Œå¿«é€Ÿå®šä½æ–°èŠ‚ç‚¹çš„ key åœ¨æ—§åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨ã€‚ è‹¥æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç›¸åŒèŠ‚ç‚¹ï¼ˆé¿å… key é‡å¤å¯¼è‡´è¯¯åˆ¤ï¼‰ï¼Œè‹¥æ˜¯åˆ™å¤ç”¨å¹¶ç§»åŠ¨åˆ°å¯¹åº”ä½ç½®ï¼Œå¦åˆ™åˆ›å»ºæ–°èŠ‚ç‚¹ã€‚ è‹¥æœªæ‰¾åˆ°ï¼šç›´æ¥åˆ›å»ºæ–°èŠ‚ç‚¹æ’å…¥ã€‚ æ¸…ç†å‰©ä½™èŠ‚ç‚¹å½“æŸä¸€ä¾§çš„æŒ‡é’ˆéå†å®Œæˆåï¼š è‹¥æ—§èŠ‚ç‚¹æŒ‡é’ˆæœªéå†å®Œï¼Œå°†å‰©ä½™èŠ‚ç‚¹å…¨éƒ¨åˆ é™¤ è‹¥æ–°èŠ‚ç‚¹æŒ‡é’ˆæœªéå†å®Œï¼Œå°†å‰©ä½™èŠ‚ç‚¹å…¨éƒ¨åˆ›å»ºå¹¶æ’å…¥åˆ°å¯¹åº”ä½ç½® Vue3å¯¹ diff ç®—æ³•çš„ä¼˜åŒ– é™æ€æ ‡è®°ï¼šç¼–è¯‘æ—¶å¯¹èŠ‚ç‚¹è¿›è¡Œäº†æ ‡è®°ï¼Œæ ‡è®°äº†è¯¥èŠ‚ç‚¹å“ªäº›æ˜¯åŠ¨æ€çš„ï¼ˆéœ€è¦å¯¹æ¯”ï¼‰ã€‚diff ç®—æ³•åœ¨å¯¹æ¯”æ—¶ï¼Œä¼šè·³è¿‡é™æ€èŠ‚ç‚¹ï¼Œåªå¯¹æ¯”åŠ¨æ€èŠ‚ç‚¹ï¼Œä»è€Œæé«˜å¯¹æ¯”æ•ˆç‡ã€‚ æœ€é•¿é€’å¢å­åºåˆ—ï¼šå¤„ç†åˆ—è¡¨ä¹±åºæ—¶ï¼Œé€šè¿‡æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•ç®—å‡ºæœ€å°‘çš„ç§»åŠ¨æ¬¡æ•°ï¼Œå‡å°‘ DOM ç§»åŠ¨æ“ä½œã€‚ æ•°ç»“æ„æ‰“å¹³ï¼šå°†è™šæ‹Ÿ DOM æ•°çš„èŠ‚ç‚¹æŒ‰å±‚çº§æ‰“å¹³ä¸ºæ•°ç»„ï¼Œé€šè¿‡ç´¢å¼•å¿«é€Ÿè®¿é—®ï¼Œå‡å°‘é€’å½’éå†çš„å¼€é”€ vue ä¸­ key çš„ä½œç”¨åœ¨ Vue ä¸­ï¼Œkey æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œä¸»è¦ç”¨äºæ ‡è¯†è™šæ‹Ÿ DOMï¼ˆVNodeï¼‰èŠ‚ç‚¹çš„å”¯ä¸€æ€§ï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯å¸®åŠ© Vue çš„ diffç®—æ³•æ›´é«˜æ•ˆã€æ›´å‡†ç¡®åœ°è¯†åˆ«èŠ‚ç‚¹çš„å˜åŒ–ï¼Œä»è€Œä¼˜åŒ– DOM æ›´æ–°æ€§èƒ½å¹¶é¿å…çŠ¶æ€é”™ä¹± ä½œä¸ºèŠ‚ç‚¹çš„ â€œå”¯ä¸€æ ‡è¯†â€ï¼Œè¾…åŠ© diff ç®—æ³•è¯†åˆ«å¯å¤ç”¨èŠ‚ç‚¹Vue çš„ diff ç®—æ³•åœ¨å¯¹æ¯”æ–°æ—§è™šæ‹Ÿ DOM æ—¶ï¼Œé¦–è¦ä»»åŠ¡æ˜¯åˆ¤æ–­ â€œä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºåŒä¸€ä¸ªèŠ‚ç‚¹â€ï¼ˆå³æ˜¯å¦å¯å¤ç”¨ï¼‰ã€‚è€Œ keyæ˜¯åˆ¤æ–­çš„æ ¸å¿ƒä¾æ®ä¹‹ä¸€ï¼ˆé…åˆæ ‡ç­¾åã€ç»„ä»¶ç±»å‹ç­‰ï¼‰ã€‚ å½“ä¸¤ä¸ªèŠ‚ç‚¹çš„ key ç›¸åŒï¼ˆä¸”å…¶ä»–æ¡ä»¶åŒ¹é…ï¼Œå¦‚æ ‡ç­¾åä¸€è‡´ï¼‰æ—¶ï¼ŒVue ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ â€œåŒä¸€ä¸ªèŠ‚ç‚¹â€ï¼Œä¼šå°è¯•å¤ç”¨æ—§èŠ‚ç‚¹å¹¶ä»…æ›´æ–°å·®å¼‚ï¼ˆå¦‚å±æ€§ã€æ–‡æœ¬å†…å®¹ï¼‰ã€‚ å½“ key ä¸åŒæ—¶ï¼ŒVue ä¼šåˆ¤å®šä¸º â€œä¸åŒèŠ‚ç‚¹â€ï¼Œä¼šç›´æ¥é”€æ¯æ—§èŠ‚ç‚¹å¹¶åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œä¸ä¼šå°è¯•å¤ç”¨ã€‚ è¿™ä¸€æœºåˆ¶å¤§å¹…å‡å°‘äº† diff ç®—æ³•çš„å¤æ‚åº¦ï¼šé€šè¿‡ key å¯ä»¥å¿«é€Ÿå®šä½åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œé¿å…å¯¹ â€œçœ‹ä¼¼ä¸åŒä½†å®é™…å¯å¤ç”¨â€ çš„èŠ‚ç‚¹è¿›è¡Œä¸å¿…è¦çš„é”€æ¯å’Œé‡å»ºã€‚ åœ¨åˆ—è¡¨æ¸²æŸ“ä¸­é¿å… â€œèŠ‚ç‚¹å¤ç”¨é”™è¯¯â€ï¼Œä¿è¯çŠ¶æ€æ­£ç¡®åœ¨ä½¿ç”¨ v-for æ¸²æŸ“åˆ—è¡¨æ—¶ï¼Œkey æ˜¯å¿…é¡»çš„ï¼ˆVue å®˜æ–¹å¼ºåˆ¶æ¨èï¼‰ï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯é¿å…å› èŠ‚ç‚¹å¤ç”¨å¯¼è‡´çš„çŠ¶æ€æ··ä¹±ã€‚ é”™è¯¯ä½¿ç”¨ï¼šä¸ä½¿ç”¨ key æˆ–ä½¿ç”¨ç´¢å¼•ï¼ˆindexï¼‰ä½œä¸º key ä¼˜åŒ– DOM æ›´æ–°æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„æ“ä½œå½“åˆ—è¡¨å‘ç”Ÿæ’åºã€æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œæ—¶ï¼Œkey èƒ½å¸®åŠ© diff ç®—æ³•å¿«é€Ÿæ‰¾åˆ° â€œç§»åŠ¨çš„èŠ‚ç‚¹â€ï¼Œä»è€Œä»…é€šè¿‡ DOM ç§»åŠ¨ï¼ˆè€Œéé”€æ¯ +é‡å»ºï¼‰å®Œæˆæ›´æ–°ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚ ä¾‹å¦‚ï¼Œå¯¹åˆ—è¡¨ [A, B, C] æ’åºä¸º [C, B, A]ï¼š æœ‰ key æ—¶ï¼Œdiff ç®—æ³•èƒ½é€šè¿‡ key è¯†åˆ«å‡ºèŠ‚ç‚¹åªæ˜¯ä½ç½®å˜åŒ–ï¼Œç›´æ¥ç§»åŠ¨ DOM å…ƒç´ å³å¯ã€‚ æ—  key æ—¶ï¼Œdiff ç®—æ³•å¯èƒ½æ— æ³•è¯†åˆ«ç§»åŠ¨ï¼Œä¼šé”€æ¯æ‰€æœ‰æ—§èŠ‚ç‚¹å¹¶é‡å»ºæ–°èŠ‚ç‚¹ï¼Œæ€§èƒ½æŸè€—å¤§ã€‚ æ€»ç»“key çš„æ ¸å¿ƒä½œç”¨æ˜¯ç»™èŠ‚ç‚¹ä¸€ä¸ª â€œå”¯ä¸€ä¸”ç¨³å®šçš„èº«ä»½æ ‡è¯†â€ï¼Œå¸®åŠ© Vue çš„ diff ç®—æ³•ï¼š å‡†ç¡®è¯†åˆ«å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œé¿å…çŠ¶æ€é”™ä¹±ï¼› é«˜æ•ˆå¤„ç†åˆ—è¡¨çš„å¢åˆ æ”¹æŸ¥ï¼Œå‡å°‘ DOM æ“ä½œï¼Œä¼˜åŒ–æ€§èƒ½ã€‚ åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆ—è¡¨æ¸²æŸ“å¿…é¡»ä½¿ç”¨å”¯ä¸€ ID ä½œä¸º keyï¼Œè¿™æ˜¯ä¿è¯åˆ—è¡¨çŠ¶æ€æ­£ç¡®å’Œæ€§èƒ½ä¼˜åŒ–çš„å…³é”®å®è·µã€‚","categories":[{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://zouhualu.github.io/tags/Vue/"},{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"},{"name":"å“åº”å¼","slug":"å“åº”å¼","permalink":"https://zouhualu.github.io/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"}]},{"title":"babelå¸¸ç”¨é…ç½®","slug":"babelå¸¸ç”¨é…ç½®","date":"2024-10-16T02:50:05.000Z","updated":"2025-11-25T06:35:35.182Z","comments":true,"path":"20241016/babelå¸¸ç”¨é…ç½®/","permalink":"https://zouhualu.github.io/20241016/babel%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/","excerpt":"","text":"åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼ŒBabel é…ç½®çš„æ ¸å¿ƒä½œç”¨æ˜¯å°†ç°ä»£ JavaScript è¯­æ³•ï¼ˆå¦‚ ES6+ï¼‰ã€JSX ç­‰è½¬æ¢ä¸ºæµè§ˆå™¨å…¼å®¹çš„ä»£ç ã€‚ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„ Babel é…ç½®é¡¹å’Œåœºæ™¯ï¼š ä¸€ã€æ ¸å¿ƒé¢„è®¾ï¼ˆPresetsï¼‰é¢„è®¾æ˜¯é¢„å®šä¹‰çš„æ’ä»¶é›†åˆï¼Œç”¨äºå¤„ç†ç‰¹å®šåœºæ™¯çš„è¯­æ³•è½¬æ¢ï¼Œæ˜¯é…ç½®çš„åŸºç¡€ã€‚ 1. @babel/preset-envï¼ˆå¿…é€‰ï¼‰ ä½œç”¨ï¼šæ ¹æ®ç›®æ ‡æµè§ˆå™¨/ç¯å¢ƒè‡ªåŠ¨è½¬æ¢ ES6+ è¯­æ³•ï¼ˆå¦‚ç®­å¤´å‡½æ•°ã€async/awaitã€ç±»ç­‰ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®å•ä¸ªæ’ä»¶ã€‚ å¸¸ç”¨é…ç½®ï¼š123456789&#123; &quot;presets&quot;: [ [&quot;@babel/preset-env&quot;, &#123; &quot;targets&quot;: &quot;&gt; 0.25%, not dead&quot;, // ç›®æ ‡æµè§ˆå™¨èŒƒå›´ï¼ˆåŸºäº browserslistï¼‰ &quot;useBuiltIns&quot;: &quot;usage&quot;, // è‡ªåŠ¨å¼•å…¥æ‰€éœ€çš„ polyfillï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ &quot;corejs&quot;: 3 // æŒ‡å®š core-js ç‰ˆæœ¬ï¼ˆéœ€å®‰è£… core-js@3ï¼‰ &#125;] ]&#125; targetsï¼šå¯æŒ‡å®šå…·ä½“æµè§ˆå™¨ç‰ˆæœ¬ï¼ˆå¦‚ {&quot;chrome&quot;: &quot;80&quot;, &quot;ie&quot;: &quot;11&quot;}ï¼‰ï¼Œæˆ–ä½¿ç”¨ .browserslistrc æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ã€‚ useBuiltIns: &quot;usage&quot;ï¼šè‡ªåŠ¨æ£€æµ‹ä»£ç ä¸­ä½¿ç”¨çš„ ES6+ ç‰¹æ€§ï¼Œåªå¼•å…¥å¿…è¦çš„ polyfillï¼Œå‡å°ä½“ç§¯ã€‚ 2. @babel/preset-reactï¼ˆReact é¡¹ç›®å¿…é€‰ï¼‰ ä½œç”¨ï¼šè½¬æ¢ JSX è¯­æ³•ä¸º React.createElement è°ƒç”¨ï¼Œå¤„ç† React ç›¸å…³è¯­æ³•ã€‚ å¸¸ç”¨é…ç½®ï¼š1234567&#123; &quot;presets&quot;: [ [&quot;@babel/preset-react&quot;, &#123; &quot;runtime&quot;: &quot;automatic&quot; // è‡ªåŠ¨å¼•å…¥ Reactï¼ˆæ— éœ€æ‰‹åŠ¨å†™ import React from &#x27;react&#x27;ï¼‰ &#125;] ]&#125; runtime: &quot;automatic&quot;ï¼šæ˜¯ React 17+ æ¨èé…ç½®ï¼Œç®€åŒ–ä»£ç ã€‚ 3. @babel/preset-typescriptï¼ˆTypeScript é¡¹ç›®å¿…é€‰ï¼‰ ä½œç”¨ï¼šå°† TypeScript è½¬æ¢ä¸º JavaScriptï¼ˆä»…å¤„ç†è¯­æ³•ï¼Œç±»å‹æ£€æŸ¥ç”± TypeScript è‡ªèº«è´Ÿè´£ï¼‰ã€‚ é…ç½®ï¼š123&#123; &quot;presets&quot;: [&quot;@babel/preset-typescript&quot;]&#125; äºŒã€å¸¸ç”¨æ’ä»¶ï¼ˆPluginsï¼‰æ’ä»¶ç”¨äºå¤„ç†é¢„è®¾æœªè¦†ç›–çš„ç‰¹å®šè¯­æ³•æˆ–åŠŸèƒ½ã€‚ 1. @babel/plugin-transform-runtime + @babel/runtime ä½œç”¨ï¼š å¤ç”¨è¾…åŠ©ä»£ç ï¼ˆå¦‚ _classCallCheckï¼‰ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯ã€‚ é¿å…å…¨å±€æ±¡æŸ“ï¼ˆé€šè¿‡æ²™ç®±æ–¹å¼å¼•å…¥ polyfillï¼‰ã€‚ é…ç½®ï¼š1234567&#123; &quot;plugins&quot;: [ [&quot;@babel/plugin-transform-runtime&quot;, &#123; &quot;corejs&quot;: 3 // éœ€å®‰è£… @babel/runtime-corejs3ï¼Œæä¾› polyfill æ”¯æŒ &#125;] ]&#125; é€šå¸¸ä¸ @babel/preset-env é…åˆä½¿ç”¨ï¼Œå‰è€…å¤„ç†è¯­æ³•è½¬æ¢ï¼Œåè€…å¤„ç†ä»£ç å¤ç”¨ã€‚ 2. @babel/plugin-proposal-decoratorsï¼ˆè£…é¥°å™¨è¯­æ³•ï¼‰ ä½œç”¨ï¼šæ”¯æŒç±»è£…é¥°å™¨ï¼ˆå¦‚ React é«˜é˜¶ç»„ä»¶ã€MobX çš„ @observableï¼‰ã€‚ é…ç½®ï¼š123456&#123; &quot;plugins&quot;: [ [&quot;@babel/plugin-proposal-decorators&quot;, &#123; &quot;version&quot;: &quot;2023-01&quot; &#125;], // æœ€æ–°è£…é¥°å™¨æ ‡å‡† [&quot;@babel/plugin-proposal-class-properties&quot;] // æ”¯æŒç±»å±æ€§ï¼ˆå¦‚ class A &#123; x = 1 &#125;ï¼‰ ]&#125; 3. babel-plugin-importï¼ˆæŒ‰éœ€åŠ è½½ UI åº“ï¼‰ ä½œç”¨ï¼šè‡ªåŠ¨è½¬æ¢ UI åº“çš„å¯¼å…¥æ–¹å¼ï¼Œå®ç°æŒ‰éœ€åŠ è½½ï¼ˆå¦‚ Ant Designã€Element UIï¼‰ã€‚ é…ç½®ï¼ˆä»¥ Ant Design ä¸ºä¾‹ï¼‰ï¼š123456789&#123; &quot;plugins&quot;: [ [&quot;import&quot;, &#123; &quot;libraryName&quot;: &quot;antd&quot;, &quot;libraryDirectory&quot;: &quot;es&quot;, &quot;style&quot;: &quot;css&quot; // è‡ªåŠ¨å¼•å…¥æ ·å¼æ–‡ä»¶ &#125;] ]&#125; æ•ˆæœï¼šimport { Button } from &#39;antd&#39; ä¼šè¢«è½¬æ¢ä¸º import Button from &#39;antd/es/button&#39;ï¼ŒåªåŠ è½½ç”¨åˆ°çš„ç»„ä»¶ã€‚ 4. @babel/plugin-syntax-dynamic-importï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰ ä½œç”¨ï¼šæ”¯æŒ import() åŠ¨æ€å¯¼å…¥è¯­æ³•ï¼ˆç”¨äºä»£ç åˆ†å‰²ï¼‰ã€‚ é…ç½®ï¼š123&#123; &quot;plugins&quot;: [&quot;@babel/plugin-syntax-dynamic-import&quot;]&#125; æ³¨æ„ï¼šè¯¥æ’ä»¶ä»…å…è®¸ Babel è§£æåŠ¨æ€å¯¼å…¥è¯­æ³•ï¼Œå®é™…ä»£ç åˆ†å‰²éœ€é…åˆ Webpack ç­‰å·¥å…·ã€‚ ä¸‰ã€ç¯å¢ƒåŒºåˆ†ï¼ˆenv é…ç½®ï¼‰æ ¹æ®ç¯å¢ƒï¼ˆå¼€å‘/ç”Ÿäº§ï¼‰ä½¿ç”¨ä¸åŒé…ç½®ï¼Œä¼˜åŒ–æ„å»ºæ•ˆç‡æˆ–ä»£ç è´¨é‡ã€‚ 12345678910&#123; &quot;env&quot;: &#123; &quot;development&quot;: &#123; &quot;plugins&quot;: [&quot;react-refresh/babel&quot;] // å¼€å‘ç¯å¢ƒå¯ç”¨ HMR åˆ·æ–°æ’ä»¶ &#125;, &quot;production&quot;: &#123; &quot;plugins&quot;: [&quot;transform-remove-console&quot;] // ç”Ÿäº§ç¯å¢ƒç§»é™¤ console &#125; &#125;&#125; éœ€é€šè¿‡ BABEL_ENV æˆ– NODE_ENV ç¯å¢ƒå˜é‡æŒ‡å®šç¯å¢ƒï¼ˆå¦‚ BABEL_ENV=productionï¼‰ã€‚ å››ã€å…¶ä»–å®ç”¨é…ç½®1. sourceTypeï¼ˆæ¨¡å—ç±»å‹ï¼‰ æŒ‡å®šä»£ç æ¨¡å—ç±»å‹ï¼Œé»˜è®¤ moduleï¼ˆæ”¯æŒ ES6 æ¨¡å—ï¼‰ï¼Œå¦‚éœ€å…¼å®¹ CommonJS å¯é…ç½®ï¼š1&#123; &quot;sourceType&quot;: &quot;unambiguous&quot; &#125; // è‡ªåŠ¨æ£€æµ‹æ¨¡å—ç±»å‹ï¼ˆES6 æˆ– CommonJSï¼‰ 2. ignoreï¼ˆå¿½ç•¥æ–‡ä»¶ï¼‰ æ’é™¤ä¸éœ€è¦è½¬æ¢çš„æ–‡ä»¶ï¼ˆå¦‚ node_modulesï¼‰ï¼š1&#123; &quot;ignore&quot;: [&quot;node_modules/**&quot;] &#125; äº”ã€å…¸å‹é¡¹ç›®é…ç½®ç¤ºä¾‹React + ES6+ é¡¹ç›®12345678910111213141516171819&#123; &quot;presets&quot;: [ [&quot;@babel/preset-env&quot;, &#123; &quot;targets&quot;: &quot;defaults&quot;, &quot;useBuiltIns&quot;: &quot;usage&quot;, &quot;corejs&quot;: 3 &#125;], [&quot;@babel/preset-react&quot;, &#123; &quot;runtime&quot;: &quot;automatic&quot; &#125;] ], &quot;plugins&quot;: [ [&quot;@babel/plugin-transform-runtime&quot;, &#123; &quot;corejs&quot;: 3 &#125;], [&quot;import&quot;, &#123; &quot;libraryName&quot;: &quot;antd&quot;, &quot;style&quot;: &quot;css&quot; &#125;] ], &quot;env&quot;: &#123; &quot;production&quot;: &#123; &quot;plugins&quot;: [&quot;transform-remove-console&quot;] &#125; &#125;&#125; TypeScript + React é¡¹ç›®1234567891011121314151617181920&#123; &quot;presets&quot;: [ &quot;@babel/preset-env&quot;, &quot;@babel/preset-typescript&quot;, [ &quot;@babel/preset-react&quot;, &#123; &quot;runtime&quot;: &quot;automatic&quot; &#125; ] ], &quot;plugins&quot;: [ [ &quot;@babel/plugin-transform-runtime&quot;, &#123; &quot;corejs&quot;: 3 &#125; ] ]&#125; æ€»ç»“æ ¸å¿ƒé…ç½®å›´ç»• è¯­æ³•è½¬æ¢ï¼ˆ@babel/preset-envï¼‰ã€æ¡†æ¶æ”¯æŒï¼ˆ@babel/preset-react/typescriptï¼‰ã€ä½“ç§¯ä¼˜åŒ–ï¼ˆ@babel/plugin-transform-runtimeï¼‰ã€æŒ‰éœ€åŠ è½½ï¼ˆbabel-plugin-importï¼‰å±•å¼€ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œéœ€æ ¹æ®æŠ€æœ¯æ ˆï¼ˆReact/Vue/TypeScriptï¼‰å’Œç›®æ ‡ç¯å¢ƒè°ƒæ•´é…ç½®ï¼Œä¼˜å…ˆä½¿ç”¨é¢„è®¾è€Œéå•ä¸ªæ’ä»¶ï¼Œå‡å°‘é…ç½®å¤æ‚åº¦ã€‚","categories":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"Babel","slug":"Babel","permalink":"https://zouhualu.github.io/tags/Babel/"},{"name":"ç¼–è¯‘å·¥å…·","slug":"ç¼–è¯‘å·¥å…·","permalink":"https://zouhualu.github.io/tags/%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7/"}]},{"title":"reactçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ","slug":"reactçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ","date":"2024-09-15T06:10:18.000Z","updated":"2025-11-25T06:35:08.784Z","comments":true,"path":"20240915/reactçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ/","permalink":"https://zouhualu.github.io/20240915/react%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88/","excerpt":"","text":"zustandä¼˜åŠ¿ï¼š æç®€çš„ apiï¼Œè¾ƒä½çš„å­¦ä¹ æˆæœ¬ã€‚åªéœ€é€šè¿‡ create å‡½æ•°åˆ›å»º storeï¼Œç›´æ¥å®šä¹‰çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼Œæ— éœ€å†—ä½™æ¨¡æ¿ã€‚ æ›´çµæ´»çš„çŠ¶æ€è®¿é—®æ–¹å¼ã€‚æ”¯æŒé€‰æ‹©æ€§è®¢é˜…ï¼ˆåªç›‘å¬éœ€è¦çš„çŠ¶æ€å­—æ®µï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œæ€§èƒ½å¥½ï¼‰ã€‚const count = useStore((state) =&gt; state.count) 123456789101112131415161718192021222324// src/stores/useCounter.ts// å¼•å…¥ zustand åº“import &#123;create&#125; from &#x27;zustand&#x27;type CounterState = &#123; count: number, add: () =&gt; void minus: () =&gt; void&#125;// åˆ›å»ºä¸€ä¸ª zustand çŠ¶æ€ç®¡ç† storeconst useCounter = create&lt;CounterState&gt;((set) =&gt; ( &#123; count: 0, add: () =&gt; set((state: any) =&gt; (&#123;count: state.count + 1&#125;)), minus: () =&gt; set((state: any) =&gt; (&#123; count: state.count - 1 &#125;)) &#125;))export default useCounter åœ¨é¡µé¢ä¸Šä½¿ç”¨ 123456789101112131415161718import useCounter from &#x27;@/stores/useCounter&#x27;function App() &#123; const &#123;count, add, minus&#125; = useCounter() return ( &lt;&gt; &lt;div&gt; &#123;count&#125; &lt;/div&gt; &lt;button onClick=&#123;add&#125;&gt; add &lt;/button&gt; &lt;button onClick=&#123;minus&#125;&gt; minus &lt;/button&gt; &lt;/&gt; )&#125; jotaijotai çš„æ ¸å¿ƒæ˜¯ atomï¼Œatom æ˜¯ jotai ä¸­æœ€åŸºæœ¬çš„çŠ¶æ€å•ä½ï¼Œå¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚atom ä¹‹é—´å¯ä»¥æœ‰ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ª atom çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„ atom éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚ 1234// AgeAtom.tsimport &#123;atom&#125; from &#x27;jotai&#x27;export const ageAtom = atom(0) 1234// NameAtom.tsimport &#123;atom&#125; from &#x27;jotai&#x27;export const nameAtom = atom(&#x27;&#x27;) 1234567// InfoAtom.tsimport &#123;atom&#125; from &#x27;jotai&#x27;import &#123;ageAtom, nameAtom&#125; from &#x27;./Atom&#x27;export const infoAtom = atom((get) =&gt; (&#123; age: get(ageAtom), name: get(nameAtom)&#125;)) åœ¨é¡µé¢ä¸Šä½¿ç”¨ 12345678910111213141516171819import &#123;useAtomValue, useSetAtom&#125; from &#x27;jotai&#x27;import &#123;infoAtom, ageAtom, nameAtom&#125; from &#x27;./Atom&#x27;function App() &#123; const info = useAtomValue(infoAtom) const setAge = useSetAtom(ageAtom) const setName = useSetAtom(nameAtom) return ( &lt;&gt; &lt;div&gt; &#123;info.age&#125; &lt;/div&gt; &lt;div&gt; &#123;info.name&#125; &lt;/div&gt; &lt;button onClick=&#123;() =&gt; setAge((age) =&gt; age + 1)&#125;&gt;+&lt;/button&gt; &lt;button onClick=&#123;() =&gt; setName((name) =&gt; name + &#x27;hualu&#x27;)&#125;&gt;add name&lt;/button&gt; &lt;/&gt; )&#125; reduxè¿™ä¸ªçœ‹å®˜ç½‘å§ï¼Œç”¨æ³•é…ç½®å¤æ‚","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"},{"name":"çŠ¶æ€ç®¡ç†","slug":"çŠ¶æ€ç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/"},{"name":"Zustand","slug":"Zustand","permalink":"https://zouhualu.github.io/tags/Zustand/"}]},{"title":"webpackåŸºç¡€è¿›é˜¶å’ŒåŸç†å‰–æ","slug":"webpackåŸºç¡€è¿›é˜¶å’ŒåŸç†å‰–æ","date":"2024-05-09T13:53:22.000Z","updated":"2025-11-25T06:35:30.220Z","comments":true,"path":"20240509/webpackåŸºç¡€è¿›é˜¶å’ŒåŸç†å‰–æ/","permalink":"https://zouhualu.github.io/20240509/webpack%E5%9F%BA%E7%A1%80%E8%BF%9B%E9%98%B6%E5%92%8C%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90/","excerpt":"","text":"webpackå®˜æ–¹ä¸­æ–‡æ–‡æ¡£ webpack é…ç½®ä¸­çš„ loader å’Œ plugin çš„åŒºåˆ«åœ¨ Webpack ä¸­ï¼Œloader å’Œ plugin æ˜¯å®ç°æ„å»ºèƒ½åŠ›çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä½†å®ƒä»¬çš„ä½œç”¨å’Œå·¥ä½œæ–¹å¼æœ‰æœ¬è´¨åŒºåˆ«ï¼š ä¸€ã€Loaderï¼ˆåŠ è½½å™¨ï¼‰ï¼šå¤„ç†é JS æ¨¡å—çš„â€œç¿»è¯‘å®˜â€Webpack æœ¬è´¨ä¸Šåªèƒ½è¯†åˆ« JavaScript å’Œ JSON æ–‡ä»¶ï¼Œ**loader çš„æ ¸å¿ƒä½œç”¨æ˜¯å°†é JS æ¨¡å—ï¼ˆå¦‚ CSSã€å›¾ç‰‡ã€TS ç­‰ï¼‰è½¬æ¢ä¸º Webpack å¯å¤„ç†çš„æ¨¡å—**ï¼Œä»è€Œçº³å…¥æ„å»ºæµç¨‹ã€‚ 1. å·¥ä½œåŸç† æ‰§è¡Œæ—¶æœºï¼šåœ¨ Webpack è§£æä»£ç çš„è¿‡ç¨‹ä¸­ï¼ˆæ¨¡å—æ‰“åŒ…é˜¶æ®µï¼‰ï¼Œå½“é‡åˆ°é JS æ¨¡å—æ—¶è§¦å‘ã€‚ æ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦ï¼ˆæˆ–ä»ä¸‹åˆ°ä¸Šï¼‰é“¾å¼è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š123456789// å…ˆæ‰§è¡Œ sass-loader å¤„ç† SASSï¼Œå†ç”¨ css-loader å¤„ç† CSSï¼Œæœ€åç”¨ style-loader æ³¨å…¥åˆ° DOMmodule: &#123; rules: [ &#123; test: /\\.s[ac]ss$/i, use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;, &#x27;sass-loader&#x27;] &#125; ]&#125; è¾“å…¥è¾“å‡ºï¼šæ¥æ”¶æºæ–‡ä»¶å†…å®¹ä½œä¸ºå‚æ•°ï¼Œè¿”å›å¤„ç†åçš„å†…å®¹ï¼ˆé€šå¸¸æ˜¯ JS ä»£ç ï¼‰ã€‚ 2. å¸¸è§åœºæ™¯ è¯­è¨€è½¬æ¢ï¼šbabel-loader å°† ES6+ è½¬æ¢ä¸º ES5ï¼›ts-loader å°† TypeScript è½¬æ¢ä¸º JSã€‚ æ ·å¼å¤„ç†ï¼šcss-loader è§£æ CSS ä¸­çš„ @import å’Œ url()ï¼›style-loader å°† CSS æ³¨å…¥åˆ°é¡µé¢ &lt;style&gt; æ ‡ç­¾ï¼›sass-loader ç¼–è¯‘ SASS/SCSS ä¸º CSSã€‚ èµ„æºå¤„ç†ï¼šfile-loader å¤„ç†å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºå¹¶è¾“å‡ºåˆ°æŒ‡å®šç›®å½•ï¼›url-loader åœ¨æ–‡ä»¶ä½“ç§¯è¾ƒå°æ—¶å°†èµ„æºè½¬ä¸º Base64 åµŒå…¥ä»£ç ã€‚ äºŒã€Pluginï¼ˆæ’ä»¶ï¼‰ï¼šæ‰©å±•æ„å»ºæµç¨‹çš„â€œåŠŸèƒ½å¢å¼ºå™¨â€Plugin ç”¨äºæ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œå¯ä»¥ä»‹å…¥æ„å»ºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆä»åˆå§‹åŒ–åˆ°è¾“å‡ºäº§ç‰©ï¼‰ï¼Œå®ç°loaderæ— æ³•å®Œæˆçš„å¤æ‚æ“ä½œï¼ˆå¦‚æ‰“åŒ…ä¼˜åŒ–ã€ç¯å¢ƒå˜é‡æ³¨å…¥ã€èµ„æºç®¡ç†ç­‰ï¼‰ã€‚ 1. å·¥ä½œåŸç† åŸºäºé’©å­æœºåˆ¶ï¼šWebpack åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šè§¦å‘ä¸€ç³»åˆ—ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆå¦‚ entryOptionã€compileã€emit ç­‰ï¼‰ï¼Œpluginé€šè¿‡æ³¨å†Œè¿™äº›é’©å­ï¼Œåœ¨ç‰¹å®šæ—¶æœºæ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ã€‚ çµæ´»æ€§é«˜ï¼šå¯ä»¥ä¿®æ”¹è¾“å‡ºèµ„æºã€è°ƒæ•´æ„å»ºæµç¨‹ã€ç”Ÿæˆé¢å¤–æ–‡ä»¶ç­‰ã€‚ 2. å¸¸è§åœºæ™¯ ä¼˜åŒ–è¾“å‡ºï¼šTerserPlugin å‹ç¼© JS ä»£ç ï¼›MiniCssExtractPlugin å°† CSS æå–ä¸ºå•ç‹¬æ–‡ä»¶ï¼ˆæ›¿ä»£ style-loaderï¼‰ã€‚ ç¯å¢ƒé…ç½®ï¼šDefinePlugin æ³¨å…¥å…¨å±€ç¯å¢ƒå˜é‡ï¼ˆå¦‚ process.env.NODE_ENVï¼‰ã€‚ æ€§èƒ½åˆ†æï¼šBundleAnalyzerPlugin å¯è§†åŒ–æ‰“åŒ…äº§ç‰©ï¼Œåˆ†æä½“ç§¯è¿‡å¤§çš„åŸå› ã€‚ èµ„æºå¤„ç†ï¼šCopyWebpackPlugin å¤åˆ¶é™æ€èµ„æºåˆ°è¾“å‡ºç›®å½•ï¼›HtmlWebpackPlugin è‡ªåŠ¨ç”Ÿæˆ HTML å¹¶å¼•å…¥æ‰“åŒ…åçš„èµ„æºã€‚ ä¸‰ã€æ ¸å¿ƒåŒºåˆ« ç»´åº¦ Loader Plugin ä½œç”¨å¯¹è±¡ é’ˆå¯¹æ¨¡å—æ–‡ä»¶ï¼ˆå¦‚ CSSã€TSï¼‰ é’ˆå¯¹æ•´ä¸ªæ„å»ºæµç¨‹ åŠŸèƒ½èŒƒå›´ ä»…å¤„ç†æ–‡ä»¶è½¬æ¢ï¼ˆè¾“å…¥â†’è¾“å‡ºå†…å®¹ï¼‰ å¯æ‰©å±•ä»»æ„æ„å»ºåŠŸèƒ½ï¼ˆä¼˜åŒ–ã€æ³¨å…¥ã€ç”Ÿæˆç­‰ï¼‰ ç”¨æ³• åœ¨ module.rules ä¸­é…ç½® åœ¨ plugins æ•°ç»„ä¸­å®ä¾‹åŒ– æ‰§è¡Œæ—¶æœº æ¨¡å—è§£æé˜¶æ®µ æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆä»åˆå§‹åŒ–åˆ°è¾“å‡ºï¼‰ å››ã€æ€»ç»“ Loader è§£å†³â€œWebpack ä¸èƒ½è¯†åˆ«é JS æ¨¡å—â€çš„é—®é¢˜ï¼Œä¸“æ³¨äºæ–‡ä»¶å†…å®¹çš„è½¬æ¢ã€‚ Plugin è§£å†³â€œæ‰©å±• Webpack åŠŸèƒ½â€çš„é—®é¢˜ï¼Œé€šè¿‡é’©å­æœºåˆ¶ä»‹å…¥æ„å»ºå…¨æµç¨‹ï¼Œå®ç°æ›´å¤æ‚çš„éœ€æ±‚ã€‚ ä¸¤è€…ç›¸è¾…ç›¸æˆï¼šLoader è´Ÿè´£â€œç¿»è¯‘â€å„ç±»èµ„æºï¼ŒPlugin è´Ÿè´£â€œå¢å¼ºâ€æ„å»ºè¿‡ç¨‹ï¼Œå…±åŒæ„æˆäº† Webpack çµæ´»å¼ºå¤§çš„æ„å»ºèƒ½åŠ›ã€‚ è‡ªå®šä¹‰ loaderå†™ä¸€ä¸ª uppercase-loaderï¼Œå®ç°å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºå¤§å†™ loader æœ¬è´¨æ˜¯å‡½æ•°ï¼Œåšç¼–è¯‘çš„å¢å¼º 1234// /loaders/uppercase-loader.jsexport default function uppercaseLoader (source) &#123; return source.toUpperCase()&#125; 12345678910111213141516// webpack.config.dev.jsexport default &#123; output: &#123; path: path.resolve(__dirname, &#x27;dist&#x27;), filename: &#x27;main.js&#x27; &#125;, entry: &#x27;./src/index.js&#x27;, module:&#123; rules:[ &#123; test: /\\.js$/, use:[&#x27;./loaders/uppercase-loader.js&#x27;] &#125; ] &#125;&#125; è‡ªå®šä¹‰ pluginplugin æœ¬è´¨æ˜¯ç±»ï¼Œåšæ„å»ºçš„å¢å¼º 1234567891011121314151617181920212223242526272829// äº§ç‰©ç»Ÿè®¡// /plugins/AssetsMapPlugin.jsexport default class AssetsMapPlugin &#123; constructor(options)&#123; &#125; apply(compiler)&#123; // compiler æ˜¯ webpack å®ä¾‹ï¼Œé€šè¿‡ compiler å¯ä»¥è®¿é—®åˆ° webpack æ‰€æœ‰çš„é…ç½®å’Œæ’ä»¶ compiler.hooks.initialize.tap(&#x27;AssetsMapPlugin&#x27;, (compilation) =&gt; &#123; // compilation æ˜¯å½“å‰æ‰“åŒ…çš„ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡ compilation å¯ä»¥è®¿é—®åˆ°å½“å‰æ‰“åŒ…çš„æ‰€æœ‰èµ„æº console.log(compilation.assets) &#125;) compiler.hooks.run.tapAsync(&#x27;AssetsMapPlugin&#x27;, (compilation, next) =&gt; &#123; // compilation æ˜¯å½“å‰æ‰“åŒ…çš„ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡ compilation å¯ä»¥è®¿é—®åˆ°å½“å‰æ‰“åŒ…çš„æ‰€æœ‰èµ„æº console.log(compilation.assets) let fileList = &quot;&quot; for (const fileName in compilation.assets) &#123; fileList += fileName + &#x27;\\n&#x27; &#125; compilation.assets[&#x27;file-list.md&#x27;] = &#123; source: () =&gt; fileList, size: () =&gt; fileList.length &#125; next() // å¿…é¡»è°ƒç”¨ next æ‰èƒ½ç»§ç»­æ‰“åŒ…ï¼Œæƒé™äº¤ç»™ä¸‹ä¸€ä¸ªæ’ä»¶ &#125;) &#125;&#125; 12345678// webpack.config.dev.jsexport default &#123; plugins: [ new AssetsMapPlugin() ]&#125; ä¼šè¾“å‡ºä¸€ä¸ª file-list.md æ–‡ä»¶ï¼Œå†…å®¹æ˜¯å½“å‰æ‰“åŒ…çš„æ‰€æœ‰èµ„æºæ–‡ä»¶å webpack åŸç†æ ¸å¿ƒ compiler compilation module chunk dependency resolver loader plugin","categories":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"Webpack","slug":"Webpack","permalink":"https://zouhualu.github.io/tags/Webpack/"},{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://zouhualu.github.io/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"}]},{"title":"vue-router å‰–æå’Œå®ç°","slug":"vueå‰ç«¯è·¯ç”±","date":"2024-04-05T06:13:40.000Z","updated":"2025-11-25T06:34:30.008Z","comments":true,"path":"20240405/vueå‰ç«¯è·¯ç”±/","permalink":"https://zouhualu.github.io/20240405/vue%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1/","excerpt":"","text":"å®ç°ä¸€ä¸ª Vue-Routerï¼Œéœ€è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿ å¦‚ä½•å°†çŠ¶æ€å’Œè·¯ç”±è®°å½•åŒæ­¥ å¦‚ä½•é€šè¿‡åˆ¤æ–­è·¯ç”±è®°å½•å†³å®šæ¸²æŸ“å“ªä¸ªè§†å›¾ å¦‚ä½•å¤„ç†æ›´æ–°é—®é¢˜ BrowserHistoryï¼ŒåŸç”Ÿ API å¯ä»¥ç›‘å¬è·¯æœ‰å˜åŒ–ï¼Ÿ hash history å®ç°ä¸€ä¸ª hash è·¯ç”±HTML éƒ¨åˆ† 123456789101112131415161718192021222324252627282930313233343536373839&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;header&quot;&gt; &lt;div&gt; &lt;a href=&quot;#&quot;&gt;é¦–é¡µ&lt;/a&gt; &lt;/div&gt; &lt;div&gt; &lt;a href=&quot;#about&quot;&gt;å…³äº&lt;/a&gt; &lt;/div&gt; &lt;div&gt;&lt;a href=&quot;#me&quot;&gt;æˆ‘çš„&lt;/a&gt;&lt;/div&gt; &lt;div onclick=&quot;window.history.go(-1)&quot;&gt;è¿”å›&lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;style&gt; .header &#123; background-color: black; height: 100px; line-height: 100px; display: flex; color: #fff; justify-content: space-around; &#125; a:link, a:hover, a:active, a:visited &#123; color: #fff; text-decoration: none; &#125; &lt;/style&gt; &lt;script src=&quot;./hashroutes.js&quot;&gt;&lt;/script&gt;&lt;/html&gt; JS éƒ¨åˆ† 1234567891011121314151617181920212223242526272829303132333435class Route &#123; constructor() &#123; console.log(this); this.routes = &#123;&#125;; this.refresh = this.refresh.bind(this); window.addEventListener(&quot;load&quot;, this.refresh); window.addEventListener(&quot;hashchange&quot;, this.refresh); &#125; route(path, callback) &#123; this.routes[path] = callback || function () &#123;&#125;; &#125; refresh() &#123; console.log(this); let path = `/$&#123;window.location.hash.slice(1) || &quot;&quot;&#125;`; console.log(path); let cb = this.routes[path]; cb &amp;&amp; cb(); &#125;&#125;let Router = new Route();let body = document.querySelector(&quot;body&quot;);Router.route(&quot;/&quot;, function (res) &#123; body.style.backgroundColor = &quot;red&quot;;&#125;);Router.route(&quot;/about&quot;, function () &#123; body.style.backgroundColor = &quot;blue&quot;;&#125;);Router.route(&quot;/me&quot;, function () &#123; body.style.backgroundColor = &quot;green&quot;;&#125;); å®ç°ä¸€ä¸ª history è·¯ç”±hash è™½ç„¶èƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¸¦æœ‰#ä¸å¤ªç¾è§‚ã€‚ æ–¹æ³• window.history.back() window.history.forward() window.history.go(number) window.history.pushState() æ–°å¢=ã€‹A B =ã€‹ A B C window.history.replaceState() è¦†ç›–/æ›¿æ¢ A B =ã€‹ A C history æ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨ Popstate äº‹ä»¶æ¥ç›‘å¬ url çš„å˜åŒ– pushState å’Œ replaceState å¹¶ä¸ä¼šè§¦å‘ Popstate äº‹ä»¶ å“ªäº›æƒ…å†µä¼šè§¦å‘ popstate å‘¢ï¼Ÿ æµè§ˆå™¨çš„å‰è¿›/åé€€æŒ‰é’® history/back/forward/go å‚æ•° state:æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªæŒ‡å®šç½‘å€ç›¸å…³çš„çŠ¶æ€å¯¹è±¡ï¼Œå¦‚æœä¸éœ€è¦ï¼Œå¯ä»¥ä¸º null titleï¼šæ–°é¡µé¢çš„æ ‡é¢˜ï¼Œnull URLï¼šæ–°çš„ç½‘å€ï¼Œå¿…é¡»ä¸å½“å‰é¡µé¢å‡ºäºåŒä¸€ä¸ªåŸŸï¼Œæ‰ä¼šæ˜¾ç¤º éƒ¨ç½² history è·¯ç”±çš„æ—¶å€™ï¼Œè¦ä½¿ä½ çš„è·¯ç”±ä¸­çš„æ‰€æœ‰ path éƒ½è®¿é—®åˆ° index.html æ–‡ä»¶ HTML éƒ¨åˆ†123456789101112131415161718192021222324252627282930313233&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;body&gt; &lt;div class=&quot;header&quot;&gt; &lt;div&gt; &lt;a href=&quot;/gray&quot;&gt;ç°è‰²&lt;/a&gt; &lt;/div&gt; &lt;div&gt; &lt;a href=&quot;/green&quot;&gt;ç»¿è‰²&lt;/a&gt; &lt;/div&gt; &lt;div&gt;&lt;a href=&quot;/&quot;&gt;ç™½è‰²&lt;/a&gt;&lt;/div&gt; &lt;div onclick=&quot;window.history.go(-1)&quot;&gt;è¿”å›&lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;style&gt; .header &#123; background-color: black; height: 100px; line-height: 100px; display: flex; color: #fff; justify-content: space-around; &#125; a:link, a:hover, a:active, a:visited &#123; color: #fff; text-decoration: none; &#125; &lt;/style&gt; &lt;script src=&quot;./hashroutes.js&quot;&gt;&lt;/script&gt;&lt;/html&gt; JS éƒ¨åˆ†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455class Route &#123; constructor() &#123; this.routes = &#123;&#125;; this.bindPopState(); &#125; route(path, callback) &#123; this.routes[path] = callback || function () &#123;&#125;; &#125; init(path) &#123; window.history.replaceState(&#123; path &#125;, null, path); this.execCallbackByPath(path); &#125; bindPopState() &#123; window.addEventListener(&quot;popstate&quot;, (e) =&gt; &#123; const path = e.state &amp;&amp; e.state.path; console.log(path); this.execCallbackByPath(path); &#125;); &#125; go(path) &#123; window.history.pushState( &#123; path, &#125;, null, path ); this.execCallbackByPath(path); &#125; execCallbackByPath(path) &#123; const cb = this.routes[path]; if (cb) &#123; cb(); &#125; &#125;&#125;let Router = new Route();let body = document.querySelector(&quot;body&quot;);Router.route(&quot;/&quot;, function (res) &#123; body.style.backgroundColor = &quot;red&quot;;&#125;);Router.route(&quot;/about&quot;, function () &#123; body.style.backgroundColor = &quot;blue&quot;;&#125;);Router.route(&quot;/me&quot;, function () &#123; body.style.backgroundColor = &quot;green&quot;;&#125;); VueRouter vue router ä»åˆ—è¡¨æµè§ˆäº†ä¸€æ®µæ—¶é—´,ç‚¹å‡»è¿›äº†ä¸€ä¸ªè¯¦æƒ…é¡µ,ç„¶åè¿”å›çš„æ—¶å€™,æˆ‘æœŸæœ›å›åˆ°åˆ—è¡¨é¡µè¿˜æ˜¯åœç•™åœ¨åŸæ¥çš„æµè§ˆä½ç½®,ä½ å¯ä»¥æ€ä¹ˆåš? keep-alive localStorage/sessionStorage + scrollTop + scrollTo scrollBehavior router-view æ˜¯ä»€ä¹ˆ? ç±»ä¼¼äºåŠ¨æ€çš„ç»„ä»¶. æ‰¾åˆ°å½“å‰è·¯å¾„å¯¹åº”çš„ component, å¹¶å±•ç¤ºå‡ºæ¥.","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://zouhualu.github.io/tags/Vue/"},{"name":"Vue Router","slug":"Vue-Router","permalink":"https://zouhualu.github.io/tags/Vue-Router/"},{"name":"è·¯ç”±","slug":"è·¯ç”±","permalink":"https://zouhualu.github.io/tags/%E8%B7%AF%E7%94%B1/"}]},{"title":"NEXT.JSä»å…¥é—¨åˆ°æ”¾å¼ƒ","slug":"NEXT-JSä»å…¥é—¨åˆ°æ”¾å¼ƒ","date":"2024-01-30T06:39:50.000Z","updated":"2025-11-25T06:35:14.391Z","comments":true,"path":"20240130/NEXT-JSä»å…¥é—¨åˆ°æ”¾å¼ƒ/","permalink":"https://zouhualu.github.io/20240130/NEXT-JS%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/","excerpt":"","text":"åŒ…å­¦åŒ…ä¼šï¼çœ‹å®Œä½ ä¹Ÿä¼š NEXT.JS å®˜æ–¹è‹±æ–‡æ–‡æ¡£ï¼šhttps://nextjs.org/ ä¸­æ–‡æ–‡æ¡£ä¸å»ºè®®çœ‹ï¼Œè½åå¤ªå¤šï¼ 1. åˆå§‹ç¯‡1.1 åˆ›å»ºé¡¹ç›®ä½¿ç”¨ create-next-app è„šæ‰‹æ¶ 12npxcreate - next - app å¦‚æœä½ ä¸ä½¿ç”¨ npxï¼Œä¹Ÿæ”¯æŒä½¿ç”¨ yarnã€pnpmã€bunx 12345678910yarncreatenext - apppnpmcreatenext - appbunxcreate - next - app 1.2 è¿è¡Œé¡¹ç›®æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½• package.json æ–‡ä»¶çš„ä»£ç ï¼š 123456&quot;scripts&quot;: &#123;&quot;dev&quot;: &quot;next dev&quot;,&quot;build&quot;: &quot;next build&quot;,&quot;start&quot;: &quot;next start&quot;,&quot;lint&quot;: &quot;next lint&quot;&#125; å¼€å‘çš„æ—¶å€™ä½¿ç”¨ npm run devã€‚éƒ¨ç½²çš„æ—¶å€™å…ˆä½¿ç”¨ npm run buildæ„å»ºç”Ÿäº§ä»£ç ï¼Œå†æ‰§è¡Œ npm run startè¿è¡Œç”Ÿäº§é¡¹ç›®ã€‚è¿è¡Œ npm run lintåˆ™ä¼šæ‰§è¡Œ ESLint è¯­æ³•æ£€æŸ¥ã€‚ 2. è·¯ç”±ç¯‡(App Router)Next.js ç›®å‰æœ‰ä¸¤å¥—è·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œä¹‹å‰çš„æ–¹æ¡ˆç§°ä¹‹ä¸ºâ€œPages Routerâ€ï¼Œç›®å‰çš„æ–¹æ¡ˆç§°ä¹‹ä¸ºâ€œApp Routerâ€ï¼Œä¸¤å¥—æ–¹æ¡ˆæ˜¯å…¼å®¹çš„ï¼Œéƒ½å¯ä»¥åœ¨Next.js ä¸­ä½¿ç”¨ã€‚ ç›®å‰ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ â€œApp Routerâ€ã€‚ 1. æ–‡ä»¶ç³»ç»ŸNext.js çš„è·¯ç”±åŸºäºçš„æ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥æ˜¯ä¸€ä¸ªè·¯ç”±ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ åœ¨ app/pages ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª index.jsæ–‡ä»¶ï¼Œå®ƒä¼šç›´æ¥æ˜ å°„åˆ° / è·¯ç”±åœ°å€ï¼›åœ¨ app/pages ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª about.js æ–‡ä»¶ï¼Œå®ƒä¼šç›´æ¥æ˜ å°„åˆ° /about è·¯ç”±åœ°å€ã€‚ 2. App Router2.1 å®šä¹‰è·¯ç”±æ–‡ä»¶å¤¹è¢«ç”¨æ¥å®šä¹‰è·¯ç”±ã€‚ app/dashboard/settingsç›®å½•å¯¹åº”çš„è·¯ç”±åœ°å€å°±æ˜¯ /dashboard/settings 2.2 å®šä¹‰é¡µé¢ï¼ˆPagesï¼‰ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„åä¸º page.js çš„æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ç§çº¦å®šå’Œè§„èŒƒ åœ¨ä¸Šå›¾è¿™ä¸ªä¾‹å­ä¸­: app/page.js å¯¹åº”è·¯ç”± / app/dashboard/page.js å¯¹åº”è·¯ç”± /dashboard app/dashboard/settings/page.js å¯¹åº”è·¯ç”±/dashboard/settings analytics ç›®å½•ä¸‹å› ä¸ºæ²¡æœ‰ page.js æ–‡ä»¶ï¼Œæ‰€ä»¥æ²¡æœ‰å¯¹åº”çš„è·¯ç”±ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥è¢«ç”¨äºå­˜æ”¾ç»„ä»¶ã€æ ·å¼è¡¨ã€å›¾ç‰‡æˆ–è€…å…¶ä»–æ–‡ä»¶ã€‚ page.js çš„ä»£ç å¦‚ä¸‹ï¼š 1234// app/page.jsexport default function Page() &#123; return &lt;h1&gt;Hello, Next.js!&lt;/h1&gt;&#125; 2.3 å®šä¹‰å¸ƒå±€ï¼ˆLayoutsï¼‰å¸ƒå±€æ˜¯æŒ‡å¤šä¸ªé¡µé¢å…±äº«çš„ UIã€‚åœ¨å¯¼èˆªçš„æ—¶å€™ï¼Œå¸ƒå±€ä¼šä¿ç•™çŠ¶æ€ï¼Œä¿æŒå¯äº¤äº’æ€§å¹¶ä¸”ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œæ¯”å¦‚ç”¨æ¥å®ç°åå°ç®¡ç†ç³»ç»Ÿçš„ä¾§è¾¹å¯¼èˆªæ ã€‚ å®šä¹‰ä¸€ä¸ªå¸ƒå±€ï¼Œä½ éœ€è¦æ–°å»ºä¸€ä¸ªåä¸º layout.jsçš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶é»˜è®¤å¯¼å‡ºä¸€ä¸ª React ç»„ä»¶ï¼Œè¯¥ç»„ä»¶åº”æ¥æ”¶ä¸€ä¸ª childrenpropï¼Œchidren è¡¨ç¤ºå­å¸ƒå±€ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æˆ–è€…å­é¡µé¢ã€‚ 1234567891011// app/dashboard/layout.jsexport default function DashboardLayout(&#123; children, &#125;) &#123; return ( &lt;section&gt; &lt;nav&gt;nav&lt;/nav&gt; &#123;children&#125; &lt;/section&gt; )&#125; 1234// app/dashboard/page.jsexport default function Page() &#123; return &lt;h1&gt;Hello, Dashboard!&lt;/h1&gt;&#125; ä½ å¯ä»¥å‘ç°ï¼šåŒä¸€æ–‡ä»¶å¤¹ä¸‹å¦‚æœæœ‰ layout.js å’Œ page.jsï¼Œpage ä¼šä½œä¸º children å‚æ•°ä¼ å…¥ layoutã€‚æ¢å¥è¯è¯´ï¼Œlayout ä¼šåŒ…è£¹åŒå±‚çº§çš„pageã€‚ æ ¹å¸ƒå±€ï¼ˆRoot Layoutï¼‰å¸ƒå±€æ”¯æŒåµŒå¥—ï¼Œæœ€é¡¶å±‚çš„å¸ƒå±€æˆ‘ä»¬ç§°ä¹‹ä¸ºæ ¹å¸ƒå±€ï¼ˆRoot Layoutï¼‰ï¼Œä¹Ÿå°±æ˜¯ app/layout.jsã€‚å®ƒä¼šåº”ç”¨äºæ‰€æœ‰çš„è·¯ç”±ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªå¸ƒå±€è¿˜æœ‰ç‚¹ç‰¹æ®Šã€‚ ä½¿ç”¨ create-next-app é»˜è®¤åˆ›å»ºçš„ layout.js ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819// app/layout.jsimport &#x27;./globals.css&#x27;import &#123;Inter&#125; from &#x27;next/font/google&#x27;const inter = Inter(&#123;subsets: [&#x27;latin&#x27;]&#125;)export const metadata = &#123; title: &#x27;Create Next App&#x27;, description: &#x27;Generated by create next app&#x27;,&#125;export default function RootLayout(&#123;children&#125;) &#123; return ( &lt;html lang=&quot;en&quot;&gt; &lt;body className=&#123;inter.className&#125;&gt;&#123;children&#125;&lt;/body&gt; &lt;/html&gt; )&#125; app ç›®å½•å¿…é¡»åŒ…å«æ ¹å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯ app/layout.js è¿™ä¸ªæ–‡ä»¶æ˜¯å¿…éœ€çš„ã€‚ æ ¹å¸ƒå±€å¿…é¡»åŒ…å« html å’Œ bodyæ ‡ç­¾ï¼Œå…¶ä»–å¸ƒå±€ä¸èƒ½åŒ…å«è¿™äº›æ ‡ç­¾ã€‚ä½†å¦‚æœä½ è¦æ›´æ”¹è¿™äº›æ ‡ç­¾ï¼Œä¸æ¨èç›´æ¥ä¿®æ”¹ï¼ŒNext.jsæä¾›å†…ç½®å·¥å…·å¸®åŠ©ä½ ç®¡ç†è¯¸å¦‚ &lt;title /&gt; è¿™æ ·çš„ HTML å…ƒç´ ã€‚ ä½ å¯ä»¥ä½¿ç”¨è·¯ç”±ç»„åˆ›å»ºå¤šä¸ªæ ¹å¸ƒå±€ã€‚ é»˜è®¤æ ¹å¸ƒå±€æ˜¯æœåŠ¡ç«¯ç»„ä»¶ï¼Œä¸”ä¸èƒ½è®¾ç½®ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ã€‚ 2.4 å®šä¹‰æ¨¡æ¿ï¼ˆTemplatesï¼‰æ¨¡æ¿ç±»ä¼¼äºå¸ƒå±€ï¼Œå®ƒä¹Ÿä¼šä¼ å…¥æ¯ä¸ªå­å¸ƒå±€æˆ–è€…é¡µé¢ã€‚ä½†ä¸ä¼šåƒå¸ƒå±€é‚£æ ·ç»´æŒçŠ¶æ€ã€‚ æ¨¡æ¿åœ¨è·¯ç”±åˆ‡æ¢æ—¶ä¼šä¸ºæ¯ä¸€ä¸ª children åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚è¿™å°±æ„å‘³ç€å½“ç”¨æˆ·åœ¨å…±äº«ä¸€ä¸ªæ¨¡æ¿çš„è·¯ç”±é—´è·³è½¬çš„æ—¶å€™ï¼Œå°†ä¼šé‡æ–°æŒ‚è½½ç»„ä»¶å®ä¾‹ï¼Œé‡æ–°åˆ›å»ºDOM å…ƒç´ ï¼Œä¸ä¿ç•™çŠ¶æ€ã€‚ å®šä¹‰ä¸€ä¸ªæ¨¡æ¿ï¼Œä½ éœ€è¦æ–°å»ºä¸€ä¸ªåä¸º template.js çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶é»˜è®¤å¯¼å‡ºä¸€ä¸ª React ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ¥æ”¶ä¸€ä¸ª children propã€‚ 1234// app/template.jsexport default function Template(&#123;children&#125;) &#123; return &lt;div&gt;&#123;children&#125;&lt;/div&gt;&#125; ä½ ä¼šå‘ç°ï¼Œè¿™ç”¨æ³•è·Ÿå¸ƒå±€ä¸€æ¨¡ä¸€æ ·ã€‚å®ƒä»¬æœ€å¤§çš„åŒºåˆ«å°±æ˜¯çŠ¶æ€çš„ä¿æŒã€‚å¦‚æœåŒä¸€ç›®å½•ä¸‹æ—¢æœ‰ template.js ä¹Ÿæœ‰ layout.js,layoutä¼šåŒ…è£¹ templateï¼Œtemplate åˆä¼šåŒ…è£¹ page æ¨¡æ¿ä¼šæ¯”å¸ƒå±€æ›´é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š ä¾èµ–äº useEffect å’Œ useState çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è®°å½•é¡µé¢è®¿é—®æ•°ï¼ˆç»´æŒçŠ¶æ€å°±ä¸ä¼šåœ¨è·¯ç”±åˆ‡æ¢æ—¶è®°å½•è®¿é—®æ•°äº†ï¼‰ã€ç”¨æˆ·åé¦ˆè¡¨å•ï¼ˆæ¯æ¬¡é‡æ–°å¡«å†™ï¼‰ç­‰ æ›´æ”¹æ¡†æ¶çš„é»˜è®¤è¡Œä¸ºï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¸ƒå±€å†…çš„ Suspense åªä¼šåœ¨å¸ƒå±€åŠ è½½çš„æ—¶å€™å±•ç¤ºä¸€æ¬¡ fallback UIï¼Œå½“åˆ‡æ¢é¡µé¢çš„æ—¶å€™ä¸ä¼šå±•ç¤ºã€‚ä½†æ˜¯ä½¿ç”¨æ¨¡æ¿ï¼Œfallbackä¼šåœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢çš„æ—¶å€™å±•ç¤ºã€‚ 2.5 å®šä¹‰åŠ è½½é¡µé¢ï¼ˆLoading UIï¼‰App Router æä¾›äº†ç”¨äºå±•ç¤ºåŠ è½½ç•Œé¢çš„ loading.jsã€‚ è¿™ä¸ªåŠŸèƒ½çš„å®ç°å€ŸåŠ©äº† React çš„Suspense APIã€‚å…³äº Suspenseçš„ç”¨æ³•ï¼Œå¯ä»¥æŸ¥çœ‹ ã€ŠReact ä¹‹ Suspenseã€‹ã€‚å®ƒå®ç°çš„æ•ˆæœå°±æ˜¯å½“å‘ç”Ÿè·¯ç”±å˜åŒ–çš„æ—¶å€™ï¼Œç«‹åˆ»å±•ç¤ºfallback UIï¼Œç­‰åŠ è½½å®Œæˆåï¼Œå±•ç¤ºæ•°æ®ã€‚ 1234// åœ¨ ProfilePage ç»„ä»¶å¤„äºåŠ è½½é˜¶æ®µæ—¶æ˜¾ç¤º Spinner&lt;Suspense fallback=&#123;&lt;Spinner/&gt;&#125;&gt; &lt;ProfilePage/&gt;&lt;/Suspense&gt; æ–°å»ºä¸€ä¸ªloading.js æ–‡ä»¶ 1234// app/dashboard/loading.jsexport default function DashboardLoading() &#123; return &lt;&gt;Loading dashboard...&lt;/&gt;&#125; åŒçº§çš„page.jsæ–‡ä»¶ 123456789101112// app/dashboard/page.jsasync function getData() &#123; await new Promise((resolve) =&gt; setTimeout(resolve, 3000)) return &#123; message: &#x27;Hello, Dashboard!&#x27;, &#125;&#125;export default async function DashboardPage(props) &#123; const &#123;message&#125; = await getData() return &lt;h1&gt;&#123;message&#125;&lt;/h1&gt;&#125; è¿™æ ·é¡µé¢çš„åŠ è½½loadingæ•ˆæœå°±å‡ºç°äº†ã€‚ å…¶å…³é”®åœ¨äº page.jså¯¼å‡ºäº†ä¸€ä¸ª async å‡½æ•°ã€‚ loading.js çš„å®ç°åŸç†æ˜¯å°† page.jså’Œä¸‹é¢çš„ children ç”¨ &lt;Suspense&gt; åŒ…è£¹ã€‚å› ä¸ºpage.jså¯¼å‡ºä¸€ä¸ª async å‡½æ•°ï¼ŒSuspenseå¾—ä»¥æ•è·æ•°æ®åŠ è½½çš„ promiseï¼Œå€Ÿæ­¤å®ç°äº† loading ç»„ä»¶çš„å…³é—­ã€‚ 2.6 å®šä¹‰é”™è¯¯å¤„ç†ï¼ˆError Handlingï¼‰error.jsã€‚é¡¾åæ€ä¹‰ï¼Œç”¨æ¥åˆ›å»ºå‘ç”Ÿé”™è¯¯æ—¶çš„å±•ç¤º UIã€‚ å…¶å®ç°å€ŸåŠ©äº† Reactçš„ Error BoundaryåŠŸèƒ½ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç»™ page.js å’Œ children åŒ…äº†ä¸€å±‚ ErrorBoundaryã€‚ æ–°å»ºä¸€ä¸ª error.js æ–‡ä»¶ 1234567891011121314151617181920212223&#x27;use client&#x27; // é”™è¯¯ç»„ä»¶å¿…é¡»æ˜¯å®¢æˆ·ç«¯ç»„ä»¶// dashboard/error.jsimport &#123;useEffect&#125; from &#x27;react&#x27;export default function Error(&#123;error, reset&#125;) &#123; useEffect(() =&gt; &#123; console.error(error) &#125;, [error]) return ( &lt;div&gt; &lt;h2&gt;Something went wrong!&lt;/h2&gt; &lt;button onClick=&#123; // å°è¯•æ¢å¤ () =&gt; reset() &#125; &gt; Try again &lt;/button&gt; &lt;/div&gt; )&#125; åŒçº§ page.js çš„ä»£ç å¦‚ä¸‹ 123456789101112131415&quot;use client&quot;;// dashboard/page.jsimport React from &quot;react&quot;;export default function Page() &#123; const [error, setError] = React.useState(false); const handleGetError = () =&gt; &#123; setError(true); &#125;; return ( &lt;&gt;&#123;error ? Error() : &lt;button onClick=&#123;handleGetError&#125;&gt;Get Error&lt;/button&gt;&#125;&lt;/&gt; );&#125; å½“å‰è¿™äº›ç‰¹æ®Šæ–‡ä»¶çš„å±‚çº§å…³ç³»å¦‚ä¸‹å›¾ï¼š å› ä¸º Layout å’Œ Template åœ¨ ErrorBoundary å¤–é¢ï¼Œè¿™è¯´æ˜é”™è¯¯è¾¹ç•Œä¸èƒ½æ•è·åŒçº§çš„ layout.js æˆ–è€… template.jsä¸­çš„é”™è¯¯ã€‚å¦‚æœä½ æƒ³æ•è·ç‰¹å®šå¸ƒå±€æˆ–è€…æ¨¡æ¿ä¸­çš„é”™è¯¯ï¼Œé‚£å°±åœ¨çˆ¶çº§çš„ error.js é‡Œè¿›è¡Œæ•è·ã€‚ é‚£é—®é¢˜æ¥äº†ï¼Œå¦‚æœå·²ç»åˆ°äº†é¡¶å±‚ï¼Œå°±æ¯”å¦‚æ ¹å¸ƒå±€ä¸­çš„é”™è¯¯å¦‚ä½•æ•è·å‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒNext.js æä¾›äº† global-error.jsæ–‡ä»¶ï¼Œä½¿ç”¨å®ƒæ—¶ï¼Œå°†å…¶æ”¾åœ¨app ç›®å½•ä¸‹ã€‚ global-error.jsä¼šåŒ…è£¹æ•´ä¸ªåº”ç”¨ï¼Œè€Œä¸”å½“å®ƒè§¦å‘çš„æ—¶å€™ï¼Œå®ƒä¼šæ›¿æ¢æ‰æ ¹å¸ƒå±€çš„å†…å®¹ã€‚æ‰€ä»¥ï¼Œglobal-error.js ä¸­ä¹Ÿè¦å®šä¹‰ &lt;html&gt;å’Œ &lt;body&gt;æ ‡ç­¾ã€‚ 123456789101112&#x27;use client&#x27;// app/global-error.jsexport default function GlobalError(&#123;error, reset&#125;) &#123; return ( &lt;html&gt; &lt;body&gt; &lt;h2&gt;Something went wrong!&lt;/h2&gt; &lt;button onClick=&#123;() =&gt; reset()&#125;&gt;Try again&lt;/button&gt; &lt;/body&gt; &lt;/html&gt; )&#125; æ³¨ï¼šglobal-error.js ç”¨æ¥å¤„ç†æ ¹å¸ƒå±€å’Œæ ¹æ¨¡æ¿ä¸­çš„é”™è¯¯ï¼Œapp/error.js å»ºè®®è¿˜æ˜¯è¦å†™çš„ 2.7 å®šä¹‰404é¡µé¢not-found.jsã€‚é¡¾åæ€ä¹‰ï¼Œå½“è¯¥è·¯ç”±ä¸å­˜åœ¨çš„æ—¶å€™å±•ç¤ºçš„å†…å®¹ éœ€è¦åœ¨ app ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª not-found.jsï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ 1234567891011import Link from &#x27;next/link&#x27;export default function NotFound() &#123; return ( &lt;div&gt; &lt;h2&gt;Not Found&lt;/h2&gt; &lt;p&gt;Could not find requested resource&lt;/p&gt; &lt;Link href=&quot;/&quot;&gt;Return Home&lt;/Link&gt; &lt;/div&gt; )&#125; å½“æˆ‘ä»¬è¯·æ±‚ä¸€ä¸ªç”¨æˆ·çš„æ•°æ®æ—¶æˆ–æ˜¯è¯·æ±‚ä¸€ç¯‡æ–‡ç« çš„æ•°æ®æ—¶ï¼Œå¦‚æœè¯¥æ•°æ®ä¸å­˜åœ¨ï¼Œå°±å¯ä»¥ç›´æ¥ä¸¢å‡º notFoundå‡½æ•°ï¼Œæ¸²æŸ“è‡ªå®šä¹‰çš„not-foundç•Œé¢ã€‚ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718// app/dashboard/blog/[id]/page.jsimport &#123;notFound&#125; from &#x27;next/navigation&#x27;async function fetchUser(id) &#123; const res = await fetch(&#x27;https://...&#x27;) if (!res.ok) return undefined return res.json()&#125;export default async function Profile(&#123;params&#125;) &#123; const user = await fetchUser(params.id) if (!user) &#123; notFound() &#125; // ...&#125; é“¾æ¥ä¸å¯¼èˆªçŸ¥é“äº†å¦‚ä½•å®šä¹‰è·¯ç”±ï¼Œæœ€åæˆ‘ä»¬å†è®²è®²å¦‚ä½•åœ¨ Next.js ä¸­å®ç°é“¾æ¥å’Œå¯¼èˆªã€‚Next.js æä¾›äº†ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨ &lt;Link&gt; ç»„ä»¶ ä½¿ç”¨ useRouter Hook &lt;Link&gt;ä½¿ç”¨æ–¹å¼ï¼š 12345import Link from &#x27;next/link&#x27;export default function Page() &#123; return &lt;Link href=&quot;/dashboard&quot;&gt;Dashboard&lt;/Link&gt;&#125; å¦‚æœéœ€è¦å¯¹å½“å‰é“¾æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä½ å¯ä»¥ä½¿ç”¨ usePathname() è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šè¯»å–å½“å‰ URL çš„è·¯å¾„åï¼ˆpathnameï¼‰ï¼Œè¿™æ˜¯ä¸€æ®µç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516171819202122232425&#x27;use client&#x27;import &#123;usePathname&#125; from &#x27;next/navigation&#x27;import Link from &#x27;next/link&#x27;export function Navigation(&#123;navLinks&#125;) &#123; const pathname = usePathname() return ( &lt;&gt; &#123;navLinks.map((link) =&gt; &#123; const isActive = pathname === link.href return ( &lt;Link className=&#123;isActive ? &#x27;text-blue&#x27; : &#x27;text-black&#x27;&#125; href=&#123;link.href&#125; key=&#123;link.name&#125; &gt; &#123;link.name&#125; &lt;/Link&gt; ) &#125;)&#125; &lt;/&gt; )&#125; App Router çš„é»˜è®¤è¡Œä¸ºæ˜¯æ»šåŠ¨åˆ°æ–°è·¯ç”±çš„é¡¶éƒ¨ï¼Œæˆ–è€…åœ¨å‰è¿›åé€€å¯¼èˆªæ—¶ç»´æŒä¹‹å‰çš„æ»šåŠ¨è·ç¦»ã€‚ å¦‚æœä½ æƒ³è¦ç¦ç”¨è¿™ä¸ªè¡Œä¸ºï¼Œä½ å¯ä»¥ç»™ &lt;Link&gt; ç»„ä»¶ä¼ é€’ä¸€ä¸ª scroll={false}ï¼Œæˆ–è€…åœ¨ä½¿ç”¨ router.pushå’Œ router.replaceçš„æ—¶å€™ï¼Œè®¾ç½®scroll: falseã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234// next/link&lt;Link href=&quot;/dashboard&quot; scroll=&#123;false&#125;&gt; Dashboard&lt;/Link&gt; æˆ–è€…ï¼š 123456// useRouterimport &#123;useRouter&#125; from &#x27;next/navigation&#x27;const router = useRouter()router.push(&#x27;/dashboard&#x27;, &#123;scroll: false&#125;) useRouterç¤ºä¾‹ï¼š 12345678910111213&#x27;use client&#x27;import &#123;useRouter&#125; from &#x27;next/navigation&#x27;export default function Page() &#123; const router = useRouter() return ( &lt;button type=&quot;button&quot; onClick=&#123;() =&gt; router.push(&#x27;/dashboard&#x27;)&#125;&gt; Dashboard &lt;/button&gt; )&#125; æ³¨æ„ä½¿ç”¨è¯¥ hook éœ€è¦åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­ã€‚ï¼ˆé¡¶å±‚çš„ use client å°±æ˜¯å£°æ˜è¿™æ˜¯å®¢æˆ·ç«¯ç»„ä»¶ï¼‰ 3. è·¯ç”±ç¯‡ï¼ˆåŠ¨æ€è·¯ç”±ã€è·¯ç”±ç»„ã€å¹³è¡Œè·¯ç”±ã€æ‹¦æˆªè·¯ç”±ï¼‰1. åŠ¨æ€è·¯ç”±æœ‰çš„æ—¶å€™ï¼Œä½ å¹¶ä¸èƒ½æå‰çŸ¥é“è·¯ç”±çš„åœ°å€ï¼Œå°±æ¯”å¦‚æ ¹æ® URL ä¸­çš„ id å‚æ•°å±•ç¤ºè¯¥ id å¯¹åº”çš„æ–‡ç« å†…å®¹ï¼Œæ–‡ç« é‚£ä¹ˆå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸€å®šä¹‰è·¯ç”±ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°åŠ¨æ€è·¯ç”±ã€‚ 1.1 [folderName]ä½¿ç”¨åŠ¨æ€è·¯ç”±ï¼Œä½ éœ€è¦å°†æ–‡ä»¶å¤¹çš„åå­—ç”¨æ–¹æ‹¬å·æ‹¬ä½ï¼Œæ¯”å¦‚ [id]ã€[slug]ã€‚è¿™ä¸ªè·¯ç”±çš„åå­—ä¼šä½œä¸º param prop ä¼ ç»™å¸ƒå±€ï¼ˆlayoutï¼‰ã€ é¡µé¢ï¼ˆpageï¼‰ã€ è·¯ç”±å¤„ç†ç¨‹åºï¼ˆrouteï¼‰ä»¥åŠ generateMetadataï¼ˆç”¨äºç”Ÿæˆé¡µé¢å…ƒæ•°æ®ï¼‰ å‡½æ•°ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ app/blog ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º[slug]çš„æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹æ–°å»ºä¸€ä¸ª page.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234// app/blog/[slug]/page.jsexport default function Page(&#123; params &#125;) &#123; return &lt;div&gt;My Post: &#123;params.slug&#125;&lt;/div&gt;&#125; é¡µé¢æ•ˆæœ ï¼š 1.2 [â€¦folderName]å¦‚æœä½ åœ¨æ–¹æ‹¬å·å†…æ·»åŠ çœç•¥å·ï¼Œæ¯”å¦‚ [...folderName]ï¼Œè¿™è¡¨ç¤ºæ•è·æ‰€æœ‰åé¢æ‰€æœ‰çš„è·¯ç”±ç‰‡æ®µã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œapp/shop/[...slug]/page.jsä¼šåŒ¹é… /shop/clothesï¼Œä¹Ÿä¼šåŒ¹é… /shop/clothes/topsã€/shop/clothes/tops/t-shirtsç­‰ç­‰ã€‚ 1234// app/shop/[...slug]/page.jsexport default function Page(&#123; params &#125;) &#123; return &lt;div&gt;My Shop: &#123;JSON.stringify(params)&#125;&lt;/div&gt;&#125; é¡µé¢æ•ˆæœï¼š å½“ä½ è®¿é—® /shop/açš„æ—¶å€™ï¼Œparams çš„å€¼ä¸º { slug: [&#39;a&#39;] }ã€‚ å½“ä½ è®¿é—® /shop/a/bçš„æ—¶å€™ï¼Œparams çš„å€¼ä¸º { slug: [&#39;a&#39;, &#39;b&#39;] }ã€‚ å½“ä½ è®¿é—® /shop/a/b/cçš„æ—¶å€™ï¼Œparams çš„å€¼ä¸º { slug: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] }ã€‚ 1.3 [[â€¦folderName]]åœ¨å‘½åæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œå¦‚æœä½ åœ¨åŒæ–¹æ‹¬å·å†…æ·»åŠ çœç•¥å·ï¼Œæ¯”å¦‚ [[â€¦folderName]]ï¼Œè¿™è¡¨ç¤ºå¯é€‰çš„æ•è·æ‰€æœ‰åé¢æ‰€æœ‰çš„è·¯ç”±ç‰‡æ®µã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œapp/shop/[[...slug]]/page.jsä¼šåŒ¹é… /shopï¼Œä¹Ÿä¼šåŒ¹é… /shop/clothesã€ /shop/clothes/topsã€/shop/clothes/tops/t-shirtsç­‰ç­‰ã€‚ å®ƒä¸ä¸Šä¸€ç§çš„åŒºåˆ«å°±åœ¨äºï¼Œä¸å¸¦å‚æ•°çš„è·¯ç”±ä¹Ÿä¼šè¢«åŒ¹é…ï¼ˆå°±æ¯”å¦‚ /shopï¼‰ 2. è·¯ç”±ç»„ï¼ˆRoute groupsï¼‰åœ¨ appç›®å½•ä¸‹ï¼Œæ–‡ä»¶å¤¹åç§°é€šå¸¸ä¼šè¢«æ˜ å°„åˆ° URL ä¸­ï¼Œä½†ä½ å¯ä»¥å°†æ–‡ä»¶å¤¹æ ‡è®°ä¸ºè·¯ç”±ç»„ï¼Œé˜»æ­¢æ–‡ä»¶å¤¹åç§°è¢«æ˜ å°„åˆ° URL ä¸­ã€‚ ä½¿ç”¨è·¯ç”±ç»„ï¼Œä½ å¯ä»¥å°†è·¯ç”±å’Œé¡¹ç›®æ–‡ä»¶æŒ‰ç…§é€»è¾‘è¿›è¡Œåˆ†ç»„ï¼Œä½†ä¸ä¼šå½±å“ URL è·¯å¾„ç»“æ„ã€‚è·¯ç”±ç»„å¯ç”¨äºæ¯”å¦‚ï¼š æŒ‰ç«™ç‚¹ã€æ„å›¾ã€å›¢é˜Ÿç­‰å°†è·¯ç”±åˆ†ç»„ åœ¨åŒä¸€å±‚çº§ä¸­åˆ›å»ºå¤šä¸ªå¸ƒå±€ï¼Œç”šè‡³æ˜¯åˆ›å»ºå¤šä¸ªæ ¹å¸ƒå±€ é‚£ä¹ˆè¯¥å¦‚ä½•æ ‡è®°å‘¢ï¼ŸæŠŠæ–‡ä»¶å¤¹ç”¨æ‹¬å·æ‹¬ä½å°±å¯ä»¥äº†ï¼Œå°±æ¯”å¦‚ (dashboard)ã€‚ 2.1 æŒ‰é€»è¾‘åˆ†ç»„ æœ€ç»ˆçš„urlä¸­çœç•¥äº†å¸¦æ‹¬å·çš„æ–‡ä»¶å¤¹ 2.2 åˆ›å»ºä¸åŒå¸ƒå±€å€ŸåŠ©è·¯ç”±ç»„ï¼Œå³ä¾¿åœ¨åŒä¸€å±‚çº§ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸åŒçš„å¸ƒå±€ï¼š åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ/account ã€/cartã€/checkout éƒ½åœ¨åŒä¸€å±‚çº§ã€‚ä½†æ˜¯ /accountå’Œ /cartä½¿ç”¨çš„æ˜¯ /app/(shop)/layout.jså¸ƒå±€å’Œapp/layout.jså¸ƒå±€ï¼Œ/checkoutä½¿ç”¨çš„æ˜¯ app/layout.js 2.3 åˆ›å»ºå¤šä¸ªæ ¹å¸ƒå±€ åˆ›å»ºå¤šä¸ªæ ¹å¸ƒå±€ï¼Œä½ éœ€è¦åˆ é™¤æ‰ app/layout.js æ–‡ä»¶ï¼Œç„¶ååœ¨æ¯ç»„éƒ½åˆ›å»ºä¸€ä¸ª layout.jsæ–‡ä»¶ã€‚åˆ›å»ºçš„æ—¶å€™è¦æ³¨æ„ï¼Œå› ä¸ºæ˜¯æ ¹å¸ƒå±€ï¼Œæ‰€ä»¥è¦æœ‰ &lt;html&gt; å’Œ &lt;body&gt; æ ‡ç­¾ã€‚ è¿™ä¸ªåŠŸèƒ½å¾ˆå®ç”¨ï¼Œæ¯”å¦‚ä½ å°†å‰å°è´­ä¹°é¡µé¢å’Œåå°ç®¡ç†é¡µé¢éƒ½æ”¾åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œï¼Œä¸€ä¸ª C ç«¯ï¼Œä¸€ä¸ª B ç«¯ï¼Œä¸¤ä¸ªé¡¹ç›®çš„å¸ƒå±€è‚¯å®šä¸ä¸€æ ·ï¼Œå€ŸåŠ©è·¯ç”±ç»„ï¼Œå°±å¯ä»¥è½»æ¾å®ç°åŒºåˆ†ã€‚ è·¯ç”±ç»„tipsï¼š è·¯ç”±ç»„çš„å‘½åé™¤äº†ç”¨äºç»„ç»‡ä¹‹å¤–å¹¶æ— ç‰¹æ®Šæ„ä¹‰ã€‚å®ƒä»¬ä¸ä¼šå½±å“ URL è·¯å¾„ã€‚ æ³¨æ„ä¸è¦è§£æä¸ºç›¸åŒçš„ URL è·¯å¾„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå› ä¸ºè·¯ç”±ç»„ä¸å½±å“ URL è·¯å¾„ï¼Œæ‰€ä»¥ (marketing)/about/page.jså’Œ (shop)/about/page.jséƒ½ä¼šè§£æä¸º /aboutï¼Œè¿™ä¼šå¯¼è‡´æŠ¥é”™ã€‚ åˆ›å»ºå¤šä¸ªæ ¹å¸ƒå±€çš„æ—¶å€™ï¼Œå› ä¸ºåˆ é™¤äº†é¡¶å±‚çš„ app/layout.jsæ–‡ä»¶ï¼Œè®¿é—® /ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥app/page.jséœ€è¦å®šä¹‰åœ¨å…¶ä¸­ä¸€ä¸ªè·¯ç”±ç»„ä¸­ã€‚ è·¨æ ¹å¸ƒå±€å¯¼èˆªä¼šå¯¼è‡´é¡µé¢å®Œå…¨é‡æ–°åŠ è½½ï¼Œå°±æ¯”å¦‚ä½¿ç”¨ app/(shop)/layout.jsæ ¹å¸ƒå±€çš„ /cart è·³è½¬åˆ°ä½¿ç”¨ app/(marketing)/layout.jsæ ¹å¸ƒå±€çš„ /blog ä¼šå¯¼è‡´é¡µé¢é‡æ–°åŠ è½½ï¼ˆfull page loadï¼‰ã€‚","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"},{"name":"Next.js","slug":"Next-js","permalink":"https://zouhualu.github.io/tags/Next-js/"},{"name":"SSR","slug":"SSR","permalink":"https://zouhualu.github.io/tags/SSR/"}]},{"title":"TypeScripté€šå…³ç§˜ç±","slug":"TypeScripté€šå…³ç§˜ç±","date":"2023-08-16T02:26:54.000Z","updated":"2025-11-25T06:32:17.097Z","comments":true,"path":"20230816/TypeScripté€šå…³ç§˜ç±/","permalink":"https://zouhualu.github.io/20230816/TypeScript%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D/","excerpt":"","text":"TSç±»å‹ç³»ç»Ÿæ”¯æŒå“ªäº›ç±»å‹å’Œç±»å‹è¿ç®—TSä¸­çš„ç±»å‹é™æ€ç±»å‹ç³»ç»Ÿçš„ç›®çš„æ˜¯æŠŠç±»å‹æ£€æŸ¥ä»è¿è¡Œæ—¶æå‰åˆ°ç¼–è¯‘æ—¶ã€‚ 1234åŸºç¡€ç±»å‹ï¼šnumberã€booleanã€stringã€objectã€symbolã€undefinedã€nullåŒ…è£…ç±»å‹ï¼šNumberã€Booleanã€Stringã€Objectã€Symbolå¤åˆç±»å‹ï¼šclassã€Arrayæ–°å¢äº†ä¸‰ç§ç±»å‹ï¼šTupleï¼ˆå…ƒç»„ï¼‰ã€Enumï¼ˆæšä¸¾ï¼‰ã€Interfaceï¼ˆæ¥å£ï¼‰ å…ƒç»„å…ƒç»„æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„ï¼Œå®ƒé™å®šäº†æ•°ç»„å…ƒç´ çš„ç±»å‹å’Œä¸ªæ•°ã€‚ 1234let tuple: [string, number] = [&#x27;a&#x27;, 1];tuple[0] = &#x27;b&#x27;;tuple[1] = 2;tuple[2] = 3; // Error: ä¸èƒ½å°†ç±»å‹â€œ3â€åˆ†é…ç»™ç±»å‹â€œundefinedâ€ æ¥å£æ¥å£(Interface)æ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒå¯ä»¥æè¿°å‡½æ•°ã€å¯¹è±¡ã€æ„é€ å™¨çš„ç»“æ„ï¼š æè¿°å¯¹è±¡ï¼š 1234567891011interface Person &#123; name: string; age: number;&#125;let person: Person = &#123; name: &#x27;Tom&#x27;, age: 25&#125;;person.name = &#x27;Jerry&#x27;;person.age = &#x27;25&#x27;; // Error: ä¸èƒ½å°†ç±»å‹â€œ&quot;25&quot;â€åˆ†é…ç»™ç±»å‹â€œnumberâ€ æè¿°å‡½æ•°ï¼š 123456789interface SearchFunc &#123; (source: string, subString: string): boolean;&#125;let mySearch: SearchFunc;mySearch = function (source: string, subString: string) &#123; return source.search(subString) !== -1;&#125;;mySearch(&#x27;abc&#x27;, &#x27;a&#x27;); æè¿°æ„é€ å™¨ï¼š 1234567interface PersonConstructor &#123; new(name: string, age: number): IPerson;&#125;function createPerson(ctor: PersonConstructor): IPerson &#123; return new ctor(&#x27;guang&#x27;, 18);&#125; å¯¹è±¡ç±»å‹ã€classç±»å‹åœ¨TSä¸­ä¹Ÿå«åšç´¢å¼•ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬éƒ½å¯ä»¥é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®å±æ€§ã€‚å¯¹è±¡å¯ä»¥åŠ¨æ€æ·»åŠ å±æ€§ï¼Œå¦‚æœä¸çŸ¥é“æœ‰ä»€ä¹ˆå±æ€§ï¼Œå¯ä»¥ç”¨ç´¢å¼•ç­¾åã€‚ 12345678910interface IPerson &#123; name: string; age: number; [propName: string]: string | number;&#125;const obj: IPerson = &#123;&#125;obj.name = &#x27;hualu&#x27;obj.age = 18 æ€»ä¹‹ï¼Œæ¥å£å¯ä»¥ç”¨æ¥æè¿°å‡½æ•°ã€æ„é€ å™¨ã€ç´¢å¼•ç±»å‹ï¼ˆå¯¹è±¡ã€classã€æ•°ç»„ï¼‰ç­‰å¤åˆç±»å‹ã€‚ æšä¸¾æšä¸¾ï¼ˆEnumï¼‰æ˜¯ä¸€ç³»åˆ—å€¼çš„å¤åˆï¼š 1234enum Color &#123;Red, Green, Blue&#125;let c: Color = Color.Green;console.log(c); // 1 æšä¸¾çš„å€¼é»˜è®¤ä»0å¼€å§‹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼š 1234enum Color &#123;Red = 1, Green = 2, Blue = 4&#125;let c: Color = Color.Green;console.log(c); // 2 æšä¸¾çš„å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼š 1234enum Color &#123;Red = &#x27;red&#x27;, Green = &#x27;green&#x27;, Blue = &#x27;blue&#x27;&#125;let c: Color = Color.Green;console.log(c); // green æšä¸¾çš„å€¼å¯ä»¥æ˜¯è®¡ç®—å‡ºæ¥çš„ï¼š 1234enum Color &#123;Red = &#x27;red&#x27;.length, Green = &#x27;green&#x27;.length, Blue = &#x27;blue&#x27;.length&#125;let c: Color = Color.Green;console.log(c); // 5 å­—é¢é‡ç±»å‹TypeScript è¿˜æ”¯æŒå­—é¢é‡ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ 1111ã€â€™aaaaâ€™ã€{ a: 1} è¿™ç§å€¼ä¹Ÿå¯ä»¥åšä¸ºç±»å‹ã€‚ å­—ç¬¦ä¸²çš„å­—é¢é‡ç±»å‹æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ™®é€šçš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæ¯”å¦‚ â€˜aaaâ€™ï¼Œå¦ä¸€ç§æ˜¯æ¨¡ç‰ˆå­—é¢é‡ï¼Œæ¯”å¦‚ aaa${string}ï¼Œå®ƒçš„æ„æ€æ˜¯ä»¥ aaaå¼€å¤´ï¼Œåé¢æ˜¯ä»»æ„ string çš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€‚ 1234567let a: &#x27;aaa&#x27;;a = &#x27;aaa&#x27;;a = &#x27;bbb&#x27;; // Error: ä¸èƒ½å°†ç±»å‹â€œ&quot;bbb&quot;â€åˆ†é…ç»™ç±»å‹â€œ&quot;aaa&quot;â€let b: `aaa$&#123;string&#125;`;b = &#x27;aaa&#x27;;b = &#x27;aaabbb&#x27;; è¿˜æœ‰å››ç§ç‰¹æ®Šçš„ç±»å‹ï¼švoidã€neverã€anyã€unknownï¼š never ä»£è¡¨ä¸å¯è¾¾ï¼Œæ¯”å¦‚å‡½æ•°æŠ›å¼‚å¸¸çš„æ—¶å€™ï¼Œè¿”å›å€¼å°±æ˜¯ neverã€‚ void ä»£è¡¨ç©ºï¼Œå¯ä»¥æ˜¯ undefined æˆ– neverã€‚ any æ˜¯ä»»æ„ç±»å‹ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™å®ƒï¼Œå®ƒä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼ˆé™¤äº† neverï¼‰ã€‚ unknown æ˜¯æœªçŸ¥ç±»å‹ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™å®ƒï¼Œä½†æ˜¯å®ƒä¸å¯ä»¥èµ‹å€¼ç»™åˆ«çš„ç±»å‹ã€‚ è¿™äº›å°±æ˜¯ TypeScript ç±»å‹ç³»ç»Ÿä¸­çš„å…¨éƒ¨ç±»å‹äº†ï¼Œå¤§éƒ¨åˆ†æ˜¯ä» JS ä¸­è¿ç§»è¿‡æ¥çš„ï¼Œæ¯”å¦‚åŸºç¡€ç±»å‹ã€Arrayã€class ç­‰ï¼Œä¹Ÿæ·»åŠ äº†ä¸€äº›ç±»å‹ï¼Œæ¯”å¦‚æšä¸¾ï¼ˆenumï¼‰ã€æ¥å£ï¼ˆinterfaceï¼‰ã€å…ƒç»„ç­‰ï¼Œè¿˜æ”¯æŒäº†å­—é¢é‡ç±»å‹å’Œ voidã€neverã€anyã€unknown çš„ç‰¹æ®Šç±»å‹ã€‚ ç±»å‹çš„è£…é¥°é™¤äº†æè¿°ç±»å‹çš„ç»“æ„å¤–ï¼ŒTypeScript çš„ç±»å‹ç³»ç»Ÿè¿˜æ”¯æŒæè¿°ç±»å‹çš„å±æ€§ï¼Œæ¯”å¦‚æ˜¯å¦å¯é€‰ï¼Œæ˜¯å¦åªè¯»ç­‰ï¼š 123456interface IPerson &#123; readonly name: string; age?: number;&#125;type tuple = [string, number?]; TypeScript ç±»å‹ç³»ç»Ÿä¸­çš„ç±»å‹è¿ç®—æ¡ä»¶ï¼šextends ? :TypeScript é‡Œçš„æ¡ä»¶åˆ¤æ–­æ˜¯ extends ? :ï¼Œå«åšæ¡ä»¶ç±»å‹ï¼ˆConditional Typeï¼‰ã€‚ 1type res = 1 extends 2 ? true : false; è¿™å°±æ˜¯ TypeScript ç±»å‹ç³»ç»Ÿé‡Œçš„ if elseã€‚ ä½†æ˜¯ï¼Œä¸Šé¢è¿™æ ·çš„é€»è¾‘æ²¡å•¥æ„ä¹‰ï¼Œé™æ€çš„å€¼è‡ªå·±å°±èƒ½ç®—å‡ºç»“æœæ¥ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä»£ç å»åˆ¤æ–­å‘¢ï¼Ÿ æ‰€ä»¥ï¼Œç±»å‹è¿ç®—é€»è¾‘éƒ½æ˜¯ç”¨æ¥åšä¸€äº›åŠ¨æ€çš„ç±»å‹çš„è¿ç®—çš„ï¼Œä¹Ÿå°±æ˜¯å¯¹ç±»å‹å‚æ•°çš„è¿ç®—ã€‚ 123type isTwo&lt;T&gt; = T extends 2 ? true : false;type res = isTwo&lt;1&gt;;type res2 = isTwo&lt;2&gt;; è¿™ç§ç±»å‹ä¹Ÿå«åšé«˜çº§ç±»å‹ã€‚ é«˜çº§ç±»å‹çš„ç‰¹ç‚¹æ˜¯ä¼ å…¥ç±»å‹å‚æ•°ï¼Œç»è¿‡ä¸€ç³»åˆ—ç±»å‹è¿ç®—é€»è¾‘åï¼Œè¿”å›æ–°çš„ç±»å‹ã€‚ æ¨å€’ï¼šinferå¦‚ä½•æå–ç±»å‹çš„ä¸€éƒ¨åˆ†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ inferã€‚ æ¯”å¦‚æå–å…ƒç»„ç±»å‹çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š 123type First&lt;Tuple extends unknown[]&gt; = Tuple extends [infer T, ...infer R] ? T : never;type res = First&lt;[1, 2, 3]&gt;; è”åˆï¼š|è”åˆç±»å‹ï¼ˆUnion Typeï¼‰æ˜¯æŒ‡ä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šç§ç±»å‹ï¼Œæ¯”å¦‚ number | stringï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡å¯ä»¥æ˜¯ number ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ string ç±»å‹ã€‚ 1type res = 1 | 2 | 3; äº¤å‰ï¼š&amp;äº¤å‰ç±»å‹ï¼ˆIntersection Typeï¼‰æ˜¯æŒ‡ä¸€ä¸ªå˜é‡å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šç§ç±»å‹çš„å±æ€§ï¼Œæ¯”å¦‚ number &amp; stringï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡æ—¢æ‹¥æœ‰ numberç±»å‹çš„å±æ€§ï¼Œä¹Ÿæ‹¥æœ‰ string ç±»å‹çš„å±æ€§ã€‚ 1type res = &#123; a: 1 &#125; &amp; &#123; b: 2 &#125;; æ³¨æ„ï¼ŒåŒä¸€ç±»å‹å¯ä»¥åˆå¹¶ï¼Œä¸åŒçš„ç±»å‹æ²¡æ³•åˆå¹¶ï¼Œä¼šè¢«èˆå¼ƒï¼š 1type res = &#123; a: 1 &#125; &amp; &#123; a: 2 &#125;; // res:never æ˜ å°„ç±»å‹å¯¹è±¡ã€class åœ¨ TypeScript å¯¹åº”çš„ç±»å‹æ˜¯ç´¢å¼•ç±»å‹ï¼ˆIndex Typeï¼‰ï¼Œé‚£ä¹ˆå¦‚ä½•å¯¹ç´¢å¼•ç±»å‹ä½œä¿®æ”¹å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯æ˜ å°„ç±»å‹ã€‚ 123type MapType&lt;T&gt; = &#123; [Key in keyof T]?: T[Key]&#125; keyof Tæ˜¯æŸ¥è¯¢ç´¢å¼•ç±»å‹ä¸­æ‰€æœ‰çš„ç´¢å¼•ï¼Œå«åšç´¢å¼•æŸ¥è¯¢ T[Key]æ˜¯æŸ¥è¯¢ç´¢å¼•ç±»å‹ä¸­ç´¢å¼•å¯¹åº”çš„ç±»å‹ï¼Œå«åšç´¢å¼•è®¿é—® inæ˜¯ç”¨äºä¾¿åˆ©è”åˆç±»å‹çš„è¿ç®—ç¬¦ã€‚ æ¯”å¦‚æˆ‘ä»¬æŠŠä¸€ä¸ªç´¢å¼•ç±»å‹çš„å€¼å˜æˆ 3 ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š 12345type MapType&lt;T&gt; = &#123; [Key in keyof T]: [T[Key], T[Key], T[Key]]&#125;type res = MapType&lt;&#123; a: 1, b: 2 &#125;&gt;; é™¤äº†å€¼å¯ä»¥å˜åŒ–ï¼Œç´¢å¼•ä¹Ÿå¯ä»¥åšå˜åŒ–ï¼Œç”¨ as è¿ç®—ç¬¦ï¼Œå«åšé‡æ˜ å°„ã€‚ æ¯”å¦‚æˆ‘ä»¬æŠŠä¸€ä¸ªç´¢å¼•ç±»å‹çš„å€¼å˜æˆ 3 ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š 12345type MapType&lt;T&gt; = &#123; [Key in keyof T as `new_$&#123;Key&#125;`]: T[Key]&#125;type res = MapType&lt;&#123; a: 1, b: 2 &#125;&gt;; å¥—è·¯ä¸€ï¼šæ¨¡å¼åŒ¹é…åšæå–æ¨¡å¼åŒ¹é…æ¯”å¦‚è¿™æ ·ä¸€ä¸ª Promise ç±»å‹ï¼š 1type p = Promise&lt;&#x27;guang&#x27;&gt; æˆ‘ä»¬æƒ³æå–valueçš„ç±»å‹ï¼Œå¯ä»¥è¿™æ ·åšï¼š 1type res = p extends Promise&lt;infer T&gt; ? T : never; é€šè¿‡ extends å¯¹ä¼ å…¥çš„ç±»å‹å‚æ•° P åšæ¨¡å¼åŒ¹é…ï¼Œå…¶ä¸­å€¼çš„ç±»å‹æ˜¯éœ€è¦æå–çš„ï¼Œé€šè¿‡ infer å£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡ Value æ¥ä¿å­˜ï¼Œå¦‚æœåŒ¹é…ï¼Œå°±è¿”å›åŒ¹é…åˆ°çš„Valueï¼Œå¦åˆ™å°±è¿”å› never ä»£è¡¨æ²¡åŒ¹é…åˆ°ã€‚ è¿™å°±æ˜¯ Typescript ç±»å‹çš„æ¨¡å¼åŒ¹é…ï¼š Typescript ç±»å‹çš„æ¨¡å¼åŒ¹é…æ˜¯é€šè¿‡ extends å¯¹ç±»å‹å‚æ•°åšåŒ¹é…ï¼Œç»“æœä¿å­˜åˆ°é€šè¿‡ infer å£°æ˜çš„å±€éƒ¨ç±»å‹å˜é‡é‡Œï¼Œå¦‚æœåŒ¹é…å°±èƒ½ä»è¯¥å±€éƒ¨å˜é‡é‡Œæ‹¿åˆ°æå–å‡ºçš„ç±»å‹ã€‚ æ•°ç»„ç±»å‹æ•°ç»„ç±»å‹æƒ³æå–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç±»å‹æ€ä¹ˆåšå‘¢ï¼Ÿ 1type GetArrFirst&lt;Arr extends unknown[]&gt; = Arr extends [infer T, ...infer arr] ? T : never; æ„é€ å™¨æ„é€ å™¨å’Œå‡½æ•°çš„åŒºåˆ«æ˜¯ï¼Œæ„é€ å™¨æ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«newã€‚ å¥—è·¯äºŒï¼šé‡æ–°æ„é€ åšå˜æ¢1234type Zip&lt;One extends [unknown, unknown], Other extends [unknown, unknown]&gt; = One extends [infer OneFirst, infer OneSecond] ? (Other extends [infer OtherFirst, infer OtherSecond] ? [[OneFirst, OtherFirst], [OneSecond, OtherSecond]] : []) : [];type ZipResult = Zip&lt;[1, 2], [&#x27;huang&#x27;, &#x27;jie&#x27;]&gt; 1234// é¦–å­—æ¯å¤§å†™type CapitalizeStr&lt;Str extends string&gt; = Str extends `$&#123;infer first&#125;$&#123;infer left&#125;` ? `$&#123;Uppercase&lt;first&gt;&#125;$&#123;left&#125;` : Strtype UseString = CapitalizeStr&lt;&#x27;huang&#x27;&gt; 12345// å®ç° dong_dong_dong åˆ° dongDongDong çš„å˜æ¢type CamelCase&lt;Str extends string&gt; = Str extends `$&#123;infer left&#125;_$&#123;infer right&#125;$&#123;infer rest&#125;` ? `$&#123;left&#125;$&#123;Uppercase&lt;right&gt;&#125;$&#123;CamelCase&lt;rest&gt;&#125;` : Strtype tryCamelCase = CamelCase&lt;&#x27;dong_dong_dong&#x27;&gt; 12345// åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­ä¸²type DropSubStr&lt;Str extends string, SubStr extends string&gt; = Str extends `$&#123;infer prefix&#125;$&#123;SubStr&#125;$&#123;infer suffix&#125;` ? DropSubStr&lt;`$&#123;prefix&#125;$&#123;suffix&#125;`, SubStr&gt; : Strtype TeyDropSubStr = DropSubStr&lt;&#x27;hello,world&#x27;, &#x27;o&#x27;&gt; 123456789// å‡½æ•°ç±»å‹çš„é‡æ–°æ„é€ type AppendArgument&lt;Func extends Function, Arg&gt; = Func extends (...args: infer Args) =&gt; infer ReturnType ? (...args: [...Args, Arg]) =&gt; ReturnType : neverfunction Add(a: number, b: number): number &#123; return a + b&#125;type TryAppendArgument = AppendArgument&lt;typeof Add, 3&gt; ç´¢å¼•ç±»å‹çš„é‡æ–°æ„é€ ç´¢å¼•ç±»å‹æ˜¯èšåˆå¤šä¸ªå…ƒç´ çš„ç±»å‹ï¼Œclassã€å¯¹è±¡ç­‰éƒ½æ˜¯ç´¢å¼•ç±»å‹ï¼Œæ¯”å¦‚è¿™å°±æ˜¯ä¸€ä¸ªç´¢å¼•ç±»å‹ï¼š 12345type obj = &#123; name: string; age: number; gender: boolean;&#125; ç´¢å¼•ç±»å‹å¯ä»¥æ·»åŠ ä¿®é¥°ç¬¦ readonlyï¼ˆåªè¯»ï¼‰ã€?ï¼ˆå¯é€‰ï¼‰: 12345type obj = &#123; readonly name: string; age?: number; gender: boolean;&#125; Mappingå¯¹å®ƒçš„ä¿®æ”¹å’Œæ„é€ æ–°ç±»å‹æ¶‰åŠåˆ°äº†æ˜ å°„ç±»å‹çš„è¯­æ³•ï¼š 123type Mapping&lt;Obj extends object&gt; = &#123; [Key in keyof Obj]: Obj[Key]&#125; ç”¨ keyof å–å‡º Obj çš„ç´¢å¼•ï¼Œä½œä¸ºæ–°çš„ç´¢å¼•ç±»å‹çš„ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯ Key in keyof Objã€‚ UppercaseKeyé™¤äº†å¯ä»¥å¯¹ Value åšä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥å¯¹ Key åšä¿®æ”¹ï¼Œä½¿ç”¨ asï¼Œè¿™å«åšé‡æ˜ å°„ï¼š 1234// æŠŠç´¢å¼•ç±»å‹çš„keyå˜æˆå¤§å†™type UppercaseKey&lt;Obj extends object&gt; = &#123; [Key in keyof Obj as Uppercase&lt;Key &amp; string&gt;]: Obj[Key]&#125; RecordTypeScript æä¾›äº†å†…ç½®çš„é«˜çº§ç±»å‹ Record æ¥åˆ›å»ºç´¢å¼•ç±»å‹ï¼š 1type Record&lt;K extends string | number | symbol, T&gt; = &#123; [P in K]: T; &#125; æŒ‡å®šç´¢å¼•å’Œå€¼çš„ç±»å‹åˆ†åˆ«ä¸º K å’Œ Tï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ç´¢å¼•ç±»å‹ã€‚ ä¸Šé¢çš„ç´¢å¼•ç±»å‹çš„çº¦æŸæˆ‘ä»¬ç”¨çš„ objectï¼Œå…¶å®æ›´è¯­ä¹‰åŒ–ä¸€ç‚¹æˆ‘æ¨èç”¨ Record&lt;string, any&gt;: 123type UppercaseKey&lt;Obj extends Record&lt;string, any&gt;&gt; = &#123; [Key in keyof Obj as Uppercase&lt;Key &amp; string&gt;]: Obj[Key]&#125; å»æ‰readonlyä¿®é¥°123type RemoveReadonly&lt;Obj extends Record&lt;string, any&gt;&gt; = &#123; -readonly [Key in keyof Obj]: Obj[Key]&#125; å»æ‰å¯é€‰ä¿®é¥°ç¬¦123type RemoveOptional&lt;Obj extends Record&lt;string, any&gt;&gt; = &#123; [Key in keyof Obj]-?: Obj[Key]&#125; FilterByValueTypeå¯ä»¥åœ¨æ„é€ æ–°ç´¢å¼•ç±»å‹çš„æ—¶å€™æ ¹æ®å€¼çš„ç±»å‹åšä¸‹è¿‡æ»¤ï¼š 1234567type FilterByValueType&lt; Obj extends Record&lt;string, any&gt;, ValueType&gt; = &#123; [Key in keyof Obj as Obj[Key] extends ValueType ? Key : never] : Obj[Key]&#125; å¦‚æœåŸæ¥ç´¢å¼•çš„å€¼ Obj[Key] æ˜¯ ValueType ç±»å‹ï¼Œç´¢å¼•ä¾ç„¶ä¸ºä¹‹å‰çš„ç´¢å¼• Keyï¼Œå¦åˆ™ç´¢å¼•è®¾ç½®ä¸º neverï¼Œneverçš„ç´¢å¼•ä¼šåœ¨ç”Ÿæˆæ–°çš„ç´¢å¼•ç±»å‹æ—¶è¢«å»æ‰ã€‚ å€¼ä¿æŒä¸å˜ï¼Œä¾ç„¶ä¸ºåŸæ¥ç´¢å¼•çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ Obj[Key]ã€‚ è¿™æ ·å°±è¾¾åˆ°äº†è¿‡æ»¤ç´¢å¼•ç±»å‹çš„ç´¢å¼•ï¼Œäº§ç”Ÿæ–°çš„ç´¢å¼•ç±»å‹çš„ç›®çš„ã€‚ é€’å½’å¤ç”¨åšå˜æ¢é€’å½’æ˜¯æŠŠé—®é¢˜åˆ†è§£ä¸ºä¸€ç³»åˆ—ç›¸ä¼¼çš„å°é—®é¢˜ï¼Œé€šè¿‡å‡½æ•°ä¸æ–­è°ƒç”¨è‡ªèº«æ¥è§£å†³è¿™ä¸€ä¸ªä¸ªå°é—®é¢˜ï¼Œç›´åˆ°æ»¡è¶³ç»“æŸæ¡ä»¶ï¼Œå°±å®Œæˆäº†é—®é¢˜çš„æ±‚è§£ã€‚ TypeScriptç±»å‹ç³»ç»Ÿä¸æ”¯æŒå¾ªç¯ï¼Œä½†æ”¯æŒé€’å½’ã€‚å½“å¤„ç†æ•°é‡ï¼ˆä¸ªæ•°ã€é•¿åº¦ã€å±‚æ•°ï¼‰ä¸å›ºå®šçš„ç±»å‹çš„æ—¶å€™ï¼Œå¯ä»¥åªå¤„ç†ä¸€ä¸ªç±»å‹ï¼Œç„¶åé€’å½’çš„è°ƒç”¨è‡ªèº«å¤„ç†ä¸‹ä¸€ä¸ªç±»å‹ï¼Œç›´åˆ°ç»“æŸæ¡ä»¶ä¹Ÿå°±æ˜¯æ‰€æœ‰çš„ç±»å‹éƒ½å¤„ç†å®Œäº†ï¼Œå°±å®Œæˆäº†ä¸ç¡®å®šæ•°é‡çš„ç±»å‹ç¼–ç¨‹ï¼Œè¾¾åˆ°å¾ªç¯çš„æ•ˆæœã€‚ Promise çš„é€’å½’å¤ç”¨DeepPromiseValueTypeå…ˆç”¨ Promise çƒ­çƒ­èº«ï¼Œå®ç°ä¸€ä¸ªæå–ä¸ç¡®å®šå±‚æ•°çš„ Promise ä¸­çš„ value ç±»å‹çš„é«˜çº§ç±»å‹ã€‚ 123456 type ttt = Promise&lt;Promise&lt;Promise&lt;Record&lt;string, any&gt;&gt;&gt;&gt;;type DeepPromiseValueType&lt;P extends Promise&lt;unknown&gt;&gt; = P extends Promise&lt;infer ValueType&gt; ? ValueType extends Promise&lt;unknown&gt; ? DeepPromiseValueType&lt;ValueType&gt; : ValueType : never; å…¶å®è¿™ä¸ªç±»å‹çš„å®ç°å¯ä»¥è¿›ä¸€æ­¥çš„ç®€åŒ–ï¼š 123type DeepPromiseValueType&lt;P&gt; =P extends Promise&lt;infer ValueType&gt; ? DeepPromiseValueType&lt;ValueType&gt; : P; æ•°ç»„ç±»å‹çš„é€’å½’ReverseArr1234// å°† type arr = [1,2,3,4,5] å˜æˆ type arr = [5,4,3,2,1]// å‡å¦‚æ•°ç»„é•¿åº¦ä¸ç¡®å®šï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ ç”¨é€’å½’ï¼type ReverseArr&lt;Arr extends Array&lt;unknown&gt;&gt; = Arr extends [infer First, ...infer Rest] ? [...ReverseArr&lt;Rest&gt;, First] : Arr; Includes123// æŸ¥æ‰¾ [1, 2, 3, 4, 5] ä¸­æ˜¯å¦å­˜åœ¨ 4ï¼Œæ˜¯å°±è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚type Includes&lt;Arr extends Array&lt;unknown&gt;, FindItem&gt; = Arr extends [infer First, ...infer Rest] ? (First extends FindItem ? true : Includes&lt;Rest, FindItem&gt;) : false; RemoveItemå¯ä»¥æŸ¥æ‰¾è‡ªç„¶å°±å¯ä»¥åˆ é™¤ï¼Œåªéœ€è¦æ”¹ä¸‹è¿”å›ç»“æœï¼Œæ„é€ ä¸€ä¸ªæ–°çš„æ•°ç»„è¿”å›ã€‚ 123456type RemoveItem&lt;Arr extends unknown[], Item, Result extends unknown[] = []&gt; = Arr extends [infer First, ...infer Rest] ? (First extends Item ? RemoveItem&lt;Rest, Item, Result&gt; : RemoveItem&lt;Rest, Item, [...Result, First]&gt;) : Result; BuildArray1234// ä¼ å…¥ 5 å’Œå…ƒç´ ç±»å‹ï¼Œæ„é€ ä¸€ä¸ªé•¿åº¦ä¸º 5 çš„è¯¥å…ƒç´ ç±»å‹æ„æˆçš„æ•°ç»„ã€‚type BuildArray&lt;Length extends number, Ele = unknown, Arr extends unknown[] = []&gt; = Arr[&#x27;length&#x27;] extends Length ? Arr : BuildArray&lt;Length, Ele, [Ele, ...Arr]&gt;type BuildArrResult = BuildArray&lt;5, string&gt; å­—ç¬¦ä¸²ç±»å‹çš„é€’å½’åœ¨ç±»å‹ä½“æ“é‡Œï¼Œé‡åˆ°æ•°é‡ä¸ç¡®å®šçš„é—®é¢˜ï¼Œå°±è¦æ¡ä»¶åå°„çš„æƒ³åˆ°é€’å½’ã€‚ ReplaceAll123456789type ReplaceAll&lt; Str extends string, From extends string, To extends string&gt; = Str extends `$&#123;infer Left&#125;$&#123;From&#125;$&#123;infer Right&#125;` ? `$&#123;Left&#125;$&#123;To&#125;$&#123;ReplaceAll&lt;Right, From, To&gt;&#125;` : Str;type ReplaceAllResult = ReplaceAll&lt;&#x27;hello,world&#x27;, &#x27;o&#x27;, &#x27;a&#x27;&gt; StringToUnionæŠŠå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çš„æ¯ä¸ªå­—ç¬¦éƒ½æå–å‡ºæ¥ç»„æˆè”åˆç±»å‹ï¼Œä¹Ÿå°±æ˜¯æŠŠ â€˜dongâ€™ è½¬ä¸º â€˜dâ€™ | â€˜oâ€™ | â€˜nâ€™ | â€˜gâ€™ã€‚ 12345// é¦–å­—æ¯æ”¾åˆ°firstå­—æ®µï¼Œå…¶ä½™å­—ç¬¦æ”¾åˆ°Restå­—æ®µtype StringToUnion&lt;Str extends string&gt; = Str extends `$&#123;infer first&#125;$&#123;infer Rest&#125;` ? first | StringToUnion&lt;Rest&gt; : nevertype StringToUnionResult = StringToUnion&lt;&#x27;dong&#x27;&gt; ReverseStr123type ReverseStr&lt;Str extends string, Result extends string = &#x27;&#x27;&gt; = Str extends `$&#123;infer First&#125;$&#123;infer Rest&#125;` ? ReverseStr&lt;Rest, `$&#123;First&#125;$&#123;Result&#125;`&gt; : Resulttype ReverseStrResult = ReverseStr&lt;&#x27;dong&#x27;&gt; å¯¹è±¡ç±»å‹çš„é€’å½’DeepReadonly1234567891011121314151617181920212223242526272829303132// å¦‚æœå¯¹è±¡çš„å±‚æ•°ä¸ç¡®å®šï¼Œå°±éœ€è¦é€’å½’æ¥è§£å†³// type DeepReadonly&lt;Obj extends Record&lt;string, any&gt;&gt; = &#123;// readonly [Key in keyof Obj]:// Obj[Key] extends object// ? Obj[Key] extends Function// ? Obj[Key]// : DeepReadonly&lt;Obj[Key]&gt;// : Obj[Key]// &#125;type DeepReadonly&lt;T extends Record&lt;string, any&gt; = &#123;&#125;&gt; = T extends any ? &#123; readonly [k in keyof T]: T[k] extends Record&lt;string, any&gt; ? DeepReadonly&lt;T[k]&gt; : T[k]&#125; : never;type TestDeepReadonly = DeepReadonly&lt;&#123; a: &#123; b: &#123; c: &#123; f: () =&gt; &#x27;dong&#x27;, d: &#123; e: &#123; guang: string &#125; &#125; &#125; &#125; &#125;, k: 1&#125;&gt; å…ƒç»„é•¿åº¦åšè®¡ç®—**TypeScript ç±»å‹ç³»ç»Ÿä¸­æ²¡æœ‰åŠ å‡ä¹˜é™¤è¿ç®—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ„é€ ä¸åŒçš„å…ƒç»„ç„¶åå– length çš„æ–¹å¼æ¥å®Œæˆæ•°å€¼è®¡ç®—ï¼ŒæŠŠæ•°å€¼çš„åŠ å‡ä¹˜é™¤è½¬åŒ–ä¸ºå¯¹å…ƒç»„çš„æå–å’Œæ„é€ ã€‚** å…ƒç»„é•¿åº¦å®ç°åŠ å‡ä¹˜é™¤AddåŠ æ³•æ„é€ ä¸¤ä¸ªæ•°ç»„ï¼Œç„¶ååˆå¹¶æˆä¸€ä¸ªï¼Œå– lengthã€‚ 1234567type BuildArray&lt; Length extends number, Ele = unknown, Arr extends unknown[] = []&gt; = Arr[&#x27;length&#x27;] extends Length ? Arr : BuildArray&lt;Length, Ele, [...Arr, Ele]&gt;; ç±»å‹å‚æ•° Length æ˜¯è¦æ„é€ çš„æ•°ç»„çš„é•¿åº¦ã€‚ç±»å‹å‚æ•° Ele æ˜¯æ•°ç»„å…ƒç´ ï¼Œé»˜è®¤ä¸º unknownã€‚ç±»å‹å‚æ•° Arr ä¸ºæ„é€ å‡ºçš„æ•°ç»„ï¼Œé»˜è®¤æ˜¯ []ã€‚ åŸºäºå®ƒå°±èƒ½å®ç°åŠ æ³•ï¼š 12type Add&lt;Num1 extends number, Num2 extends number&gt; = [...BuildArray&lt;Num1&gt;, ...BuildArray&lt;Num2&gt;][&#x27;length&#x27;]; Subtractå‡æ³•1234type Subtract&lt;Num1 extends number, Num2 extends number&gt; = BuildArray&lt;Num1&gt; extends [...arr1: BuildArray&lt;Num2&gt;, ...arr2: infer Rest] ? Rest[&#x27;length&#x27;] : never; ç±»å‹å‚æ•° Num1ã€Num2 åˆ†åˆ«æ˜¯è¢«å‡æ•°å’Œå‡æ•°ï¼Œé€šè¿‡ extends çº¦æŸä¸º numberã€‚ æ„é€  Num1 é•¿åº¦çš„æ•°ç»„ï¼Œé€šè¿‡æ¨¡å¼åŒ¹é…æå–å‡º Num2 é•¿åº¦ä¸ªå…ƒç´ ï¼Œå‰©ä¸‹çš„æ”¾åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ Rest é‡Œã€‚ å– Rest çš„é•¿åº¦è¿”å›ï¼Œå°±æ˜¯å‡æ³•çš„ç»“æœã€‚ 1type SubstractResult = Subtract&lt;5, 3&gt; Multiplyä¹˜æ³•1234type Multiply&lt;Num1 extends number, Num2 extends number&gt; = BuildArray&lt;Num2&gt; extends [...arr: BuildArray&lt;Num1&gt;] ? arr[&#x27;length&#x27;] : never; TSå†…ç½®çš„é«˜çº§ç±»å‹æœ‰å“ªäº›ï¼ŸParametersParametersç”¨äºæå–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹ã€‚ 1234type Parameters&lt;T extends (...args: any) =&gt; any&gt; = T extends (...args: infer P) =&gt; any ? P : never; ç±»å‹å‚æ•° T ä¸ºå¾…å¤„ç†çš„ç±»å‹ï¼Œé€šè¿‡ extends çº¦æŸä¸ºå‡½æ•°ï¼Œå‚æ•°å’Œè¿”å›å€¼ä»»æ„ã€‚ é€šè¿‡ extends åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç±»å‹ï¼Œæå–å‚æ•°çš„ç±»å‹åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ P ä¸­è¿”å›ã€‚ ReturnTypeReturnType ç”¨äºæå–å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹ã€‚ æºç æ˜¯è¿™æ ·çš„ï¼š 12type ReturnType&lt;T extends (...args: any) =&gt; any&gt; = T extends (...args: any) =&gt; infer P ? P : any ç±»å‹å‚æ•° T ä¸ºå¾…å¤„ç†çš„ç±»å‹ï¼Œé€šè¿‡ extends çº¦æŸä¸ºå‡½æ•°ç±»å‹ï¼Œå‚æ•°å’Œè¿”å›å€¼ä»»æ„ã€‚ ç”¨ T åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç±»å‹ï¼Œæå–è¿”å›å€¼çš„ç±»å‹åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ P é‡Œè¿”å›ã€‚ ConstructorParametersæ„é€ å™¨ç±»å‹å’Œå‡½æ•°ç±»å‹çš„åŒºåˆ«å°±æ˜¯å¯ä»¥è¢«new Parameters ç”¨äºæå–å‡½æ•°å‚æ•°çš„ç±»å‹ï¼Œè€Œ ConstructorParameters ç”¨äºæå–æ„é€ å™¨å‚æ•°çš„ç±»å‹ã€‚ 12345type ConstructorParameters&lt; T extends abstract new (...args: any) =&gt; any&gt; = T extends abstract new (...args: infer P) =&gt; any ? P : never; ç±»å‹å‚æ•° T æ˜¯å¾…å¤„ç†çš„ç±»å‹ï¼Œé€šè¿‡ extends çº¦æŸä¸ºæ„é€ å™¨ç±»å‹ï¼ŒåŠ ä¸ª abstract ä»£è¡¨ä¸èƒ½ç›´æ¥è¢«å®ä¾‹åŒ–ï¼ˆå…¶å®ä¸åŠ ä¹Ÿè¡Œï¼‰ã€‚ ç”¨ T åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç±»å‹ï¼Œæå–å‚æ•°çš„éƒ¨åˆ†åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ P é‡Œï¼Œè¿”å› Pã€‚ InstanceTypeæå–æ„é€ å™¨è¿”å›å€¼çš„ç±»å‹ï¼Œå°±æ˜¯ InstanceTypeã€‚ 123456type InstanceType&lt; T extends abstract new (...args: any) =&gt; any&gt; = T extends abstract new (...args: any) =&gt; infer R ? R : any;","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"https://zouhualu.github.io/tags/TypeScript/"},{"name":"ç±»å‹ç³»ç»Ÿ","slug":"ç±»å‹ç³»ç»Ÿ","permalink":"https://zouhualu.github.io/tags/%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/"}]},{"title":"Golangç¬”è®°","slug":"Golangç¬”è®°","date":"2023-07-28T02:14:05.000Z","updated":"2025-12-30T10:02:22.253Z","comments":true,"path":"20230728/Golangç¬”è®°/","permalink":"https://zouhualu.github.io/20230728/Golang%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ä¸€ä¸ª Go ç¨‹åºçš„ä¸»å‡½æ•°ï¼ˆmain å‡½æ•°ï¼‰å¿…é¡»å£°æ˜åœ¨ä¸€ä¸ªåä¸º main çš„åŒ…ä¸­ åŸºæœ¬ç±»å‹å†…ç½®å¸ƒå°”ç±»å‹ï¼š bool å†…ç½®æ•´æ•°ç±»å‹ï¼š int8ã€uint8ã€int16ã€uint16ã€int32ã€uint32ã€int64ã€uint64ã€intã€uintã€uintptr å†…ç½®æµ®ç‚¹æ•°ç±»å‹ï¼š float32ã€float64 å†…ç½®å¤æ•°ç±»å‹ï¼š complex64ã€complex128 å†…ç½®å­—ç¬¦ä¸²ç±»å‹ï¼šstring Go ä¸­æœ‰ä¸¤ç§å†…ç½®ç±»å‹åˆ«å byte æ˜¯ uint8 çš„åˆ«å rune æ˜¯ int32 çš„åˆ«å å¯ä»¥å°†ä»–ä»¬çœ‹ä½œæ˜¯åŒä¸€ç±»å‹ ä»¥uå¼€å¤´çš„ç±»å‹æ˜¯æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œæ— ç¬¦å·æ•´æ•°ç±»å‹çš„å€¼éƒ½æ˜¯éè´Ÿçš„ã€‚ 1. æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œèµ‹å€¼å’Œä¼ å‚ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯æŒ‡é’ˆã€‚åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œèµ‹å€¼å’Œä¼ å‚éƒ½ä¼šå¤åˆ¶æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æ•°æ®ã€‚ 2. å‡½æ•°çš„å‚æ•°æœ‰ä¸¤ç§ä¼ é€’æ–¹å¼ï¼ŒæŒ‰å€¼ä¼ é€’å’ŒæŒ‰å¼•ç”¨ä¼ é€’ã€‚æŒ‰å€¼ä¼ é€’æ˜¯æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°å¤åˆ¶ä¸€ä»½ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œè¿™æ ·åœ¨å‡½æ•°ä¸­å¦‚æœå¯¹å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œå°†ä¸ä¼šå½±å“åˆ°åŸæ¥çš„å®é™…å‚æ•°ã€‚æŒ‰å¼•ç”¨ä¼ é€’æ˜¯æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°çš„åœ°å€ç›´æ¥ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œé‚£ä¹ˆåœ¨å‡½æ•°ä¸­å¯¹å‚æ•°æ‰€è¿›è¡Œçš„ä¿®æ”¹ï¼Œå°†å½±å“åˆ°åŸæ¥çš„å®é™…å‚æ•°ã€‚ å¼•ç”¨ç±»å‹ï¼ˆsliceã€mapã€interfaceã€channelï¼‰éƒ½é»˜è®¤ä½¿ç”¨å¼•ç”¨ä¼ é€’ 3. åˆ‡ç‰‡ä¼ å…¥æ–¹æ³•ä¸­ï¼Œå¦‚æœæ–¹æ³•å†…éƒ¨æ²¡æœ‰å¯¹åˆ‡ç‰‡è¿›è¡Œæ‰©å®¹ï¼Œé‚£ä¹ˆåˆ‡ç‰‡çš„ä¿®æ”¹ä¼šå½±å“åˆ°åŸåˆ‡ç‰‡ï¼Œå¦‚æœæ–¹æ³•å†…éƒ¨å¯¹åˆ‡ç‰‡è¿›è¡Œäº†æ‰©å®¹ï¼Œé‚£ä¹ˆåˆ‡ç‰‡çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°åŸåˆ‡ç‰‡ã€‚ defer å»¶è¿Ÿæ‰§è¡Œï¼Œåœ¨å½“å‰æ ˆé€€å‡ºæ—¶æ‰§è¡Œ ä¸€èˆ¬ç”¨äºèµ„æºæ¸…ç†å·¥ä½œ è§£é”ã€å…³é—­æ–‡ä»¶ å¤šæ¬¡è°ƒç”¨deferï¼Œæ‰§è¡Œæ—¶ç±»ä¼¼äºæ ˆçš„æœºåˆ¶ï¼šå…ˆè¿›åå‡º å¾…æ›´æ–°ã€‚ã€‚ã€‚","categories":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zouhualu.github.io/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://zouhualu.github.io/tags/Golang/"},{"name":"åç«¯å¼€å‘","slug":"åç«¯å¼€å‘","permalink":"https://zouhualu.github.io/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"}]},{"title":"Piniaç¬”è®°","slug":"Piniaç¬”è®°","date":"2023-06-19T07:13:48.000Z","updated":"2025-11-25T06:34:32.526Z","comments":true,"path":"20230619/Piniaç¬”è®°/","permalink":"https://zouhualu.github.io/20230619/Pinia%E7%AC%94%E8%AE%B0/","excerpt":"","text":"Piniaçš„ 3 å¤§æ ¸å¿ƒ çŠ¶æ€(state) æ´¾ç”Ÿå‡ºæ–°çŠ¶æ€(getters) æ“ä½œ(actions) åŸºç¡€ä½¿ç”¨123456789101112131415161718192021import &#123;defineStore&#125; from &#x27;pinia&#x27;const useUserStore = defineStore(&#x27;user&#x27;,&#123; // çŠ¶æ€ state:()=&gt;(&#123; name:&#x27;å¼ ä¸‰&#x27;, age:18 &#125;), // æ´¾ç”Ÿ getters:&#123; getAge(state)&#123; return state.age &#125; &#125;, // æ“ä½œ actions:&#123; changeAge()&#123; this.age++ &#125; &#125;&#125;) 1234import &#123;useUserStore&#125; from &#x27;@/stores/user&#x27;const userStore = useUserStore()userStore.age // 18userStore.changeAge() è¿›é˜¶ä½¿ç”¨(æ¨èâœ…)1234567891011121314151617181920212223import &#123;defineStore&#125; from &#x27;pinia&#x27;import &#123;reactive,computed&#125; from &#x27;vue&#x27;export const useUserStore = defineStore(&#x27;user&#x27;,()=&gt;&#123; // çŠ¶æ€ const Person = reactive(&#123; name:&#x27;å¼ ä¸‰&#x27;, age:18 &#125;) // æ´¾ç”Ÿ const getAge = computed(()=&gt;&#123; return Person.age &#125;) // æ“ä½œ const changeAge = ()=&gt;&#123; Person.age++ &#125; return &#123; Person, getAge, changeAge &#125;&#125;) 1234import &#123;useUserStore&#125; from &#x27;@/stores/user&#x27;const userStore = useUserStore()userStore.Person.age // 18userStore.changeAge()","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://zouhualu.github.io/tags/Vue/"},{"name":"Pinia","slug":"Pinia","permalink":"https://zouhualu.github.io/tags/Pinia/"},{"name":"çŠ¶æ€ç®¡ç†","slug":"çŠ¶æ€ç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/"}]},{"title":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","date":"2023-04-20T06:30:43.000Z","updated":"2025-11-25T06:35:37.711Z","comments":true,"path":"20230420/å‰ç«¯å·¥ç¨‹åŒ–/","permalink":"https://zouhualu.github.io/20230420/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/","excerpt":"","text":"å‰ç«¯å·¥ç¨‹åŒ–å‰ç«¯å·¥ç¨‹åŒ–æŒ‡ä½¿ç”¨è½¯ä»¶å·¥ç¨‹çš„æŠ€æœ¯ä¸æ–¹æ³•å¯¹å‰ç«¯å¼€å‘çš„æŠ€æœ¯ã€å·¥å…·ã€æµç¨‹ã€ç»éªŒã€æ–¹æ¡ˆç­‰æŒ‡æ ‡æ ‡å‡†åŒ–ï¼Œå®ƒå…·å¤‡æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€è§„èŒƒåŒ–ã€è‡ªåŠ¨åŒ–å››å¤§ç‰¹æ€§ï¼Œä¸»è¦ç›®çš„æ˜¯é™ä½æˆæœ¬ä¸å¢åŠ æ•ˆç‡ã€‚ æ¨¡å—åŒ–æ¨¡å—åŒ–æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„é‡ä¸­ä¹‹é‡ã€‚å®ƒåœ¨å‰ç«¯å·¥ç¨‹åŒ–ä¸­å…·ä½“è¡¨ç°ä¸ºï¼šåœ¨æ–‡ä»¶å±‚é¢ä¸Šå¯¹ä»£ç ä¸èµ„æºå®ç°æ‹†åˆ†ä¸ç»„è£…ï¼Œå°†ä¸€ä¸ªå¤§æ–‡ä»¶æ‹†åˆ†ä¸ºäº’ç›¸ä¾èµ–çš„å°æ–‡ä»¶ï¼Œå†ç»Ÿä¸€æ‹¼è£…ä¸åŠ è½½ã€‚ ç»„ä»¶åŒ–ç»„ä»¶åŒ–æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„é‡è¦åŸºç¡€ã€‚å®ƒå®ç°äº†ä»£ç æ›´é«˜å±‚æ¬¡çš„å¤ç”¨æ€§ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚ç»„ä»¶çš„å°è£…ä¹Ÿæ˜¯å¯¹è±¡çš„å°è£…ï¼ŒåŒæ ·è¦åšåˆ°**é«˜å†…èšä½è€¦åˆ**ï¼Œç»„ä»¶åŒ–çš„é¡¹ç›®ä¸ä»…åˆ©äºå•å…ƒæµ‹è¯•çš„è¿›è¡Œï¼ŒåŒæ ·ä¹Ÿåˆ©äºéœ€æ±‚è¿­ä»£çš„æ¨è¿›ã€‚ ä¼˜ç§€çš„ç»„ä»¶åŒ–éµå¾ªä»¥ä¸‹è®¾è®¡å“²å­¦ã€‚ å°†è®¾è®¡å›¾åˆ’åˆ†ä¸ºæœ€å°ç»„ä»¶å±‚çº§ ä½¿ç”¨é¢„è®¾è§„èŒƒåˆ›å»ºç»„ä»¶é™æ€ç‰ˆæœ¬ ç¡®å®šç»„ä»¶å†…éƒ¨æœ€å°ä¸”å®Œæ•´çš„çŠ¶æ€çš„è¡¨ç¤ºæ–¹å¼ ç¡®å®šç»„ä»¶å†…éƒ¨æœ€å°ä¸”å®Œæ•´çš„çŠ¶æ€çš„å­˜æ”¾æ–¹å¼ å®ç°æ•°æ®æµçš„æ­£å‘ä¼ é€’ä¸åå‘ä¼ é€’ è§„èŒƒåŒ–è§„èŒƒåŒ–æŒ‡å°†ä¸€ç³»åˆ—é¢„è®¾è§„èŒƒæ¥å…¥å·¥ç¨‹å„ä¸ªé˜¶æ®µï¼Œé€šè¿‡å„é¡¹æŒ‡æ ‡æ ‡å‡†åŒ–å¼€å‘è€…çš„å·¥ä½œæµç¨‹ï¼Œå¼•å¯¼å¼€å‘è€…åœ¨å›¢é˜Ÿåä½œä¸­å¾€æ›´å¥½çš„æ–¹å‘å‘å±•ã€‚ è§„èŒƒåŒ–æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„é‡è¦éƒ¨åˆ†ã€‚å®ƒæœ‰æ•ˆåœ°å°†ä¸€ç›˜æ¾æ•£çš„è§„èŒƒé€šè¿‡æŒ‡å®šæ ‡å‡†å‡èšåœ¨ä¸€èµ·ï¼Œå°†æ‰€æœ‰å·¥ä½œæµç¨‹æ ‡å‡†åŒ–ï¼ŒååŒæ‰€æœ‰å¼€å‘è€…ä»¥æ ‡å‡†åŒ–çš„æ–¹å¼å®šä¹‰å·¥ä½œæµç¨‹ï¼ŒåŒæ—¶ä¹Ÿå½±å“ç€ä»£ç ã€æ–‡æ¡£å’Œæ—¥å¿—ï¼Œç”šè‡³å½±å“ç€æ¯ä¸ªå¼€å‘è€…åŠå…¶å›¢é˜Ÿå‘å±•æ–¹å‘ï¼Œå› æ­¤æ¯ä¸ªæˆç†Ÿçš„å‰ç«¯å›¢é˜Ÿéƒ½æœ‰ä¸€å¥—èº«ç»ç™¾æˆ˜çš„è§„èŒƒåŒ–æ–¹æ¡ˆã€‚ è§„èŒƒåŒ–æ›´å¤šåº”ç”¨åœ¨å›¢é˜Ÿåä½œä¸­ï¼Œä¸ºæ¯ä¸ªå¼€å‘è€…æŒ‡æ˜ä¸€ä¸ªæ–¹å‘ï¼Œå¼•é¢†ç€æˆå‘˜å¾€è¯¥æ–¹å‘èµ°ã€‚è‹¥å›¢é˜Ÿæ— è§„èŒƒåŒ–ï¼Œæ¯ä¸ªå¼€å‘è€…å„åšå„çš„äº‹æƒ…ï¼Œåœ¨åˆå¹¶ä»£ç æ—¶è‚¯å®šä¼šå‘ç”Ÿäº‰åµï¼Œç”šè‡³å½±å“å·¥ä½œæ•ˆç‡ã€‚ è‡ªåŠ¨åŒ–è‡ªåŠ¨åŒ–æŒ‡å°†ä¸€ç³»åˆ—ç¹çé‡å¤çš„å·¥ä½œæµç¨‹äº¤ç”±ç¨‹åºæ ¹æ®é¢„è®¾è„šæœ¬è‡ªåŠ¨å¤„ç†ï¼Œæ•´ä¸ªå·¥ä½œæµç¨‹æ— éœ€äººå·¥å‚ä¸ï¼Œä»¥è§£æ”¾å¼€å‘è€…åŒæ‰‹è®©å…¶æ›´ä¸“æ³¨ä¸šåŠ¡éœ€æ±‚çš„å¼€å‘ã€‚ è‡ªåŠ¨åŒ–æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„æ™ºèƒ½éƒ¨åˆ†ã€‚å®ƒæ—¢å¯è§£æ”¾åŒæ‰‹åˆèƒ½èŠ‚çœå¤§é‡æ—¶é—´åšæ›´å¤šæœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œå¸¸è§è‡ªåŠ¨åŒ–åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºè‡ªåŠ¨åŒ–æ„å»ºã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€è‡ªåŠ¨åŒ–æ‰“åŒ…ã€è‡ªåŠ¨åŒ–å‘å¸ƒå’Œè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ›´é«˜çº§çš„è‡ªåŠ¨åŒ–åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºæŒç»­é›†æˆã€æŒç»­äº¤ä»˜å’ŒæŒç»­éƒ¨ç½²ã€‚ä»¥è‡ªåŠ¨åŒ–æ„å»ºä¸ºä¾‹ï¼Œåˆå¯å°†å…¶åˆ’åˆ†ä¸ºä»¥ä¸‹å­ä»»åŠ¡ï¼Œè¿™äº›å­ä»»åŠ¡åˆ†å¸ƒåœ¨è‡ªåŠ¨åŒ–æ„å»ºä¸åŒé˜¶æ®µï¼Œåœ¨ä¸åŒé˜¶æ®µçš„æœ€ä½³æ—¶åˆ»ä¼šè°ƒç”¨ç›¸å…³å·¥å…·å¤„ç†ç›¸å…³æµç¨‹ã€‚ ä»»åŠ¡ èŒè´£ Stylelint æ ¡éªŒæ ·å¼ä»£ç  Eslint æ ¡éªŒè„šæœ¬ä»£ç  Postcss Postcss â†’ CSS Sass SASS â†’ CSS Less LESS â†’ CSS Babel ES6 â†’ ES5 TypeScript TS â†’ JS å·¥ç¨‹åŒ–çš„è¡¨ç°ä¸€åˆ‡ä»¥æé«˜æ•ˆç‡ã€é™ä½æˆæœ¬ã€è´¨é‡ä¿è¯ä¸ºç›®çš„çš„æ‰‹æ®µéƒ½å±äºå·¥ç¨‹åŒ–","categories":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"https://zouhualu.github.io/tags/%E8%A7%84%E8%8C%83/"},{"name":"æœ€ä½³å®è·µ","slug":"æœ€ä½³å®è·µ","permalink":"https://zouhualu.github.io/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"}]},{"title":"NginxçŸ¥è¯†æ•´ç†&è®°å½•","slug":"NginxçŸ¥è¯†æ•´ç†-è®°å½•","date":"2023-03-03T02:27:55.000Z","updated":"2025-11-25T06:36:02.614Z","comments":true,"path":"20230303/NginxçŸ¥è¯†æ•´ç†-è®°å½•/","permalink":"https://zouhualu.github.io/20230303/Nginx%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-%E8%AE%B0%E5%BD%95/","excerpt":"","text":"Nginxæ˜¯ä»€ä¹ˆï¼ŸNginx (engine x) æ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨,åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªé€šç”¨ä»£ç†æœåŠ¡å™¨(TCP/UDP/IMAP/POP3/SMTP)ã€‚ Nginxæ˜¯ä¸€ä¸ªæ‹¥æœ‰é«˜æ€§èƒ½HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå…¶ç‰¹ç‚¹æ˜¯å ç”¨å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œå¹¶ä¸”åœ¨ç°å®ä¸­ï¼Œnginxçš„å¹¶å‘èƒ½åŠ›è¦æ¯”åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¦å¥½ Nginxä¸“ä¸ºæ€§èƒ½ä¼˜åŒ–è€Œå¼€å‘ï¼Œæœ€é‡è¦çš„è¦æ±‚ä¾¿æ˜¯æ€§èƒ½ï¼Œä¸”ååˆ†æ³¨é‡æ•ˆç‡ï¼Œæœ‰æŠ¥å‘Šnginxèƒ½æ”¯æŒé«˜è¾¾50000ä¸ªå¹¶å‘è¿æ¥æ•° æ­£å‘ä»£ç†ä¸åå‘ä»£ç† æ­£å‘ä»£ç†ï¼Œä»£ç†å®¢æˆ·ç«¯,å®¢æˆ·ç«¯ä¸æƒ³è®©æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯çš„ipï¼Œæ‰€ä»¥è®©ä»£ç†æœåŠ¡å™¨å»è®¿é—®ï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ åå‘ä»£ç†ï¼Œä»£ç†æœåŠ¡å™¨,æœåŠ¡å™¨ä¸æƒ³å®¢æˆ·ç«¯çŸ¥é“æ˜¯å“ªä¸ªæœåŠ¡å™¨å“åº”çš„ï¼Œæ‰€ä»¥è®©ä»£ç†æœåŠ¡å™¨å»åˆ†é…ï¼Œè®©ç©ºé—²çš„æœåŠ¡å™¨å»å“åº”ã€‚ è´Ÿè½½å‡è¡¡è´Ÿè½½å‡è¡¡ï¼šæ˜¯é«˜å¯ç”¨ç½‘ç»œåŸºç¡€æ¶æ„çš„å…³é”®ç»„ä»¶ï¼Œé€šå¸¸ç”¨äºå°†å·¥ä½œè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªæœåŠ¡å™¨æ¥æé«˜ç½‘ç«™ã€åº”ç”¨ã€æ•°æ®åº“æˆ–å…¶ä»–æœåŠ¡çš„æ€§èƒ½å’Œå¯é æ€§ã€‚ åŠ¨é™åˆ†ç¦» æœåŠ¡å™¨ç«¯é…ç½®å’Œä½¿ç”¨Nginxæ­¤æ–‡å†™çš„æ¯”è¾ƒè¯¦ç»†ï¼Œç‚¹å‡»é“¾æ¥è·³è½¬","categories":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zouhualu.github.io/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://zouhualu.github.io/tags/Nginx/"},{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://zouhualu.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"name":"åå‘ä»£ç†","slug":"åå‘ä»£ç†","permalink":"https://zouhualu.github.io/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"}]},{"title":"é¡µé¢å“åº”å¼å¸ƒå±€çš„è¦ç‚¹","slug":"é¡µé¢å“åº”å¼å¸ƒå±€çš„è¦ç‚¹","date":"2022-07-20T08:18:22.000Z","updated":"2025-11-25T06:36:40.642Z","comments":true,"path":"20220720/é¡µé¢å“åº”å¼å¸ƒå±€çš„è¦ç‚¹/","permalink":"https://zouhualu.github.io/20220720/%E9%A1%B5%E9%9D%A2%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80%E7%9A%84%E8%A6%81%E7%82%B9/","excerpt":"","text":"å‚è€ƒæ–‡ç«  å“åº”å¼è®¾è®¡ä¸è‡ªé€‚åº”è®¾è®¡çš„åŒºåˆ«å“åº”å¼å¼€å‘ä¸€å¥—ç•Œé¢ï¼Œé€šè¿‡æ£€æµ‹è§†å£åˆ†è¾¨ç‡ï¼Œé’ˆå¯¹ä¸åŒå®¢æˆ·ç«¯åœ¨å®¢æˆ·ç«¯åšä»£ç å¤„ç†ï¼Œæ¥å±•ç°ä¸åŒçš„å¸ƒå±€å’Œå†…å®¹ï¼›è‡ªé€‚åº”éœ€è¦å¼€å‘å¤šå¥—ç•Œé¢ï¼Œé€šè¿‡æ£€æµ‹è§†å£åˆ†è¾¨ç‡ï¼Œæ¥åˆ¤æ–­å½“å‰è®¿é—®çš„è®¾å¤‡æ˜¯ pc ç«¯ã€å¹³æ¿ã€æ‰‹æœºï¼Œä»è€Œè¯·æ±‚æœåŠ¡å±‚ï¼Œè¿”å›ä¸åŒçš„é¡µé¢ã€‚ å“åº”å¼å¸ƒå±€å®ç°æ–¹æ¡ˆåª’ä½“æŸ¥è¯¢ä¸ç®¡æ˜¯ç§»åŠ¨ä¼˜å…ˆè¿˜æ˜¯ PC ä¼˜å…ˆï¼Œéƒ½æ˜¯ä¾æ®å½“éšç€å±å¹•å®½åº¦å¢å¤§æˆ–å‡å°çš„æ—¶å€™ï¼Œåé¢çš„æ ·å¼ä¼šè¦†ç›–å‰é¢çš„æ ·å¼ã€‚å› æ­¤ï¼Œç§»åŠ¨ç«¯ä¼˜å…ˆé¦–å…ˆä½¿ç”¨çš„æ˜¯ min-widthï¼ŒPC ç«¯ä¼˜å…ˆä½¿ç”¨çš„ max-widthã€‚ 12345678910111213141516171819202122/* iphone6 7 8 */body &#123; background-color: yellow;&#125;/* iphone 5 */@media screen and (max-width: 320px) &#123; body &#123; background-color: red; &#125;&#125;/* iphoneX */@media screen and (min-width: 375px) and (-webkit-device-pixel-ratio: 3) &#123; body &#123; background-color: #0ff000; &#125;&#125;/* iphone6 7 8 plus */@media screen and (min-width: 414px) &#123; body &#123; background-color: blue; &#125;&#125; ç™¾åˆ†æ¯”å¸ƒå±€æˆ‘ä»¬å¿…é¡»è¦å¼„æ¸…æ¥š css ä¸­å­å…ƒç´ çš„ç™¾åˆ†æ¯”åˆ°åº•æ˜¯ç›¸å¯¹è°çš„ç™¾åˆ†æ¯”ã€‚ç›´æ¥ä¸Šç»“è®ºå§ï¼š å­å…ƒç´ çš„ height æˆ– width ä¸­ä½¿ç”¨ç™¾åˆ†æ¯”ï¼Œæ˜¯ç›¸å¯¹äºå­å…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ ã€‚width ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ çš„ widthï¼Œheight ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ çš„ heightã€‚ å­å…ƒç´ çš„ top å’Œ bottom å¦‚æœè®¾ç½®ç™¾åˆ†æ¯”ï¼Œåˆ™ç›¸å¯¹äºç›´æ¥é static å®šä½(é»˜è®¤å®šä½)çš„çˆ¶å…ƒç´ çš„é«˜åº¦ã€‚ åŒæ ·å­å…ƒç´ çš„ left å’Œ right å¦‚æœè®¾ç½®ç™¾åˆ†æ¯”ï¼Œåˆ™ç›¸å¯¹äºç›´æ¥é static å®šä½(é»˜è®¤å®šä½çš„)çˆ¶å…ƒç´ çš„å®½åº¦ã€‚ å­å…ƒç´ çš„ padding å¦‚æœè®¾ç½®ç™¾åˆ†æ¯”ï¼Œä¸è®ºæ˜¯å‚ç›´æ–¹å‘æˆ–è€…æ˜¯æ°´å¹³æ–¹å‘ï¼Œéƒ½ç›¸å¯¹äºç›´æ¥çˆ¶äº²å…ƒç´ çš„ widthï¼Œè€Œä¸çˆ¶å…ƒç´ çš„ height æ— å…³ã€‚ å­å…ƒç´ çš„ margin å¦‚æœè®¾ç½®æˆç™¾åˆ†æ¯”ï¼Œä¸è®ºæ˜¯å‚ç›´æ–¹å‘è¿˜æ˜¯æ°´å¹³æ–¹å‘ï¼Œéƒ½ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ çš„ width border-radius ä¸ä¸€æ ·ï¼Œå¦‚æœè®¾ç½® border-radius ä¸ºç™¾åˆ†æ¯”ï¼Œåˆ™æ˜¯ç›¸å¯¹äºè‡ªèº«çš„å®½åº¦ï¼Œé™¤äº† border-radius å¤–ï¼Œè¿˜æœ‰æ¯”å¦‚ translateã€background-size ç­‰éƒ½æ˜¯ç›¸å¯¹äºè‡ªèº«çš„ã€‚ rem å¸ƒå±€remæ˜¯css3ä¸­æ–°å¢çš„å•ä½ï¼Œå¹¶ä¸”ç§»åŠ¨ç«¯æ”¯æŒåº¦å¾ˆé«˜ã€‚ remå•ä½éƒ½æ˜¯ç›¸å¯¹äºæ ¹å…ƒç´  html çš„font-sizeæ¥å†³å®šå¤§å°çš„,æ ¹å…ƒç´ çš„font-sizeç›¸å½“äºæä¾›äº†ä¸€ä¸ªåŸºå‡†ï¼Œå½“é¡µé¢çš„ size å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªéœ€è¦æ”¹å˜font-sizeçš„å€¼ï¼Œé‚£ä¹ˆä»¥remä¸ºå›ºå®šå•ä½çš„å…ƒç´ çš„å¤§å°ä¹Ÿä¼šå‘ç”Ÿå“åº”çš„å˜åŒ–ã€‚ å› æ­¤ï¼Œå¦‚æœé€šè¿‡remæ¥å®ç°å“åº”å¼çš„å¸ƒå±€ï¼Œåªéœ€è¦æ ¹æ®è§†å›¾å®¹å™¨çš„å¤§å°ï¼ŒåŠ¨æ€çš„æ”¹å˜font-sizeå³å¯ï¼ˆè€Œ em æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„ï¼‰ã€‚ rem å“åº”å¼çš„å¸ƒå±€æ€æƒ³ï¼š ä¸€èˆ¬ä¸è¦ç»™å…ƒç´ è®¾ç½®å…·ä½“çš„å®½åº¦ï¼Œä½†æ˜¯å¯¹äºä¸€äº›å°å›¾æ ‡å¯ä»¥è®¾å®šå…·ä½“å®½åº¦å€¼ é«˜åº¦å€¼å¯ä»¥è®¾ç½®å›ºå®šå€¼ï¼Œè®¾è®¡ç¨¿æœ‰å¤šå¤§ï¼Œæˆ‘ä»¬å°±ä¸¥æ ¼æœ‰å¤šå¤§ æ‰€æœ‰è®¾ç½®çš„å›ºå®šå€¼éƒ½ç”¨ rem åšå•ä½ï¼ˆé¦–å…ˆåœ¨ HTML æ€»è®¾ç½®ä¸€ä¸ªåŸºå‡†å€¼ï¼špx å’Œ rem çš„å¯¹åº”æ¯”ä¾‹ï¼Œç„¶ååœ¨æ•ˆæœå›¾ä¸Šè·å– px å€¼ï¼Œå¸ƒå±€çš„æ—¶å€™è½¬åŒ–ä¸º rem å€¼) js è·å–çœŸå®å±å¹•çš„å®½åº¦ï¼Œè®©å…¶é™¤ä»¥è®¾è®¡ç¨¿çš„å®½åº¦ï¼Œç®—å‡ºæ¯”ä¾‹ï¼ŒæŠŠä¹‹å‰çš„åŸºå‡†å€¼æŒ‰ç…§æ¯”ä¾‹è¿›è¡Œé‡æ–°çš„è®¾å®šï¼Œè¿™æ ·é¡¹ç›®å°±å¯ä»¥åœ¨ç§»åŠ¨ç«¯è‡ªé€‚åº”äº† remå¸ƒå±€ä¹Ÿæ˜¯ç›®å‰å¤šå±å¹•é€‚é…çš„æœ€ä½³æ–¹å¼ã€‚ vw/vh è§†å£å•ä½vwè¡¨ç¤ºç›¸å¯¹äºè§†å›¾çª—å£çš„å®½åº¦ï¼Œvhè¡¨ç¤ºç›¸å¯¹äºè§†å›¾çª—å£é«˜åº¦ï¼Œé™¤äº†vwå’Œvhå¤–ï¼Œè¿˜æœ‰vminå’Œvmaxä¸¤ä¸ªç›¸å…³çš„å•ä½ã€‚ å•ä½ å«ä¹‰ vw ç›¸å¯¹äºè§†çª—çš„å®½åº¦ï¼Œ1vw ç­‰äºè§†å£å®½åº¦çš„ 1%ï¼Œå³è§†çª—å®½åº¦æ˜¯ 100vw vh ç›¸å¯¹äºè§†çª—çš„é«˜åº¦ï¼Œ1vh ç­‰äºè§†å£é«˜åº¦çš„ 1%ï¼Œå³è§†çª—é«˜åº¦æ˜¯ 100vh vmin vw å’Œ vh ä¸­çš„è¾ƒå°å€¼ vmax vw å’Œ vh ä¸­çš„è¾ƒå¤§å€¼ vw å’Œ%çš„åŒºåˆ«ä¸ºï¼š| å•ä½ | å«ä¹‰ || â€”â€“ | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- || % | å¤§éƒ¨åˆ†ç›¸å¯¹äºç¥–å…ˆå…ƒç´ ï¼Œä¹Ÿæœ‰ç›¸å¯¹äºè‡ªèº«çš„æƒ…å†µæ¯”å¦‚ï¼ˆborder-radiusã€translate ç­‰) || vw/vh | ç›¸å¯¹äºè§†çª—çš„å°ºå¯¸ | 1 ç‰©ç†åƒç´ çº¿ï¼ˆä¹Ÿå°±æ˜¯æ™®é€šå±å¹•ä¸‹ 1px,é«˜æ¸…å±å¹•ä¸‹ 0.5px çš„æƒ…å†µï¼‰é‡‡ç”¨ transform å±æ€§ scale å®ç° 1234@media only screen and (-webkit-min-device-pixel-ratio: 2) &#123; -webkit-transform: scaleY(0.5); -webkit-transform-origin: 50% 0%;&#125; å›¾ç‰‡å“åº”å¼ 1.ä½¿ç”¨ max-widthï¼ˆå›¾ç‰‡è‡ªé€‚åº”ï¼‰ å›¾ç‰‡è‡ªé€‚åº”æ„æ€å°±æ˜¯å›¾ç‰‡èƒ½éšç€å®¹å™¨çš„å¤§å°è¿›è¡Œç¼©æ”¾ 12345img &#123; display: inline-block; max-width: 100%; height: auto;&#125; 2.ä½¿ç”¨srcset 1&lt;img srcset=&quot;photo_w350.jpg 1x, photo_w640.jpg 2x&quot; src=&quot;photo_w350.jpg&quot; alt=&quot;&quot;&gt; å¦‚æœå±å¹•çš„ dpi = 1 çš„è¯åˆ™åŠ è½½ 1 å€å›¾ï¼Œè€Œ dpi = 2 åˆ™åŠ è½½ 2 å€å›¾ï¼Œæ‰‹æœºå’Œ mac åŸºæœ¬ä¸Š dpi éƒ½è¾¾åˆ°äº† 2 ä»¥ä¸Šï¼Œè¿™æ ·å­å¯¹äºæ™®é€šå±å¹•æ¥è¯´ä¸ä¼šæµªè´¹æµé‡ï¼Œè€Œå¯¹äºè§†ç½‘è†œå±æ¥è¯´åˆæœ‰é«˜æ¸…çš„ä½“éªŒã€‚ å“åº”å¼å¸ƒå±€çš„æˆå‹æ–¹æ¡ˆç°åœ¨çš„ cssï¼ŒUI æ¡†æ¶ç­‰éƒ½å·²ç»è€ƒè™‘åˆ°äº†é€‚é…ä¸åŒå±å¹•åˆ†è¾¨ç‡çš„é—®é¢˜ï¼Œå®é™…é¡¹ç›®ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ–°ç‰¹æ€§å’Œæ¡†æ¶æ¥å®ç°å“åº”å¼å¸ƒå±€ã€‚å¯ä»¥æœ‰ä»¥ä¸‹é€‰æ‹©æ–¹æ¡ˆï¼š åˆ©ç”¨ä¸Šé¢çš„æ–¹æ³•è‡ªå·±æ¥å®ç°ï¼Œæ¯”å¦‚ CSS3 Media Query,remï¼Œvw ç­‰ Flex å¼¹æ€§å¸ƒå±€ï¼Œå…¼å®¹æ€§è¾ƒå·® Grid ç½‘æ ¼å¸ƒå±€ï¼Œå…¼å®¹æ€§è¾ƒå·® Columns æ …æ ¼ç³»ç»Ÿï¼Œå¾€å¾€éœ€è¦ä¾èµ–æŸä¸ª UI åº“ï¼Œå¦‚ Bootstrap è¦ç‚¹åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç»¼åˆä½¿ç”¨å“åº”å¼å¸ƒå±€æ–¹æ¡ˆï¼Œæ¯”å¦‚ç”¨ rem æ¥åšå­—ä½“çš„é€‚é…ï¼Œç”¨ srcset æ¥åšå›¾ç‰‡çš„å“åº”å¼ï¼Œå®½åº¦å¯ä»¥ç”¨ remï¼Œflexï¼Œæ …æ ¼ç³»ç»Ÿç­‰æ¥å®ç°å“åº”å¼ï¼Œç„¶åå¯èƒ½è¿˜éœ€è¦åˆ©ç”¨åª’ä½“æŸ¥è¯¢æ¥ä½œä¸ºå“åº”å¼å¸ƒå±€çš„åŸºç¡€ï¼Œå› æ­¤ç»¼åˆä¸Šé¢çš„å®ç°æ–¹æ¡ˆï¼Œé¡¹ç›®ä¸­å®ç°å“åº”å¼å¸ƒå±€éœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š è®¾ç½® viewport åª’ä½“æŸ¥è¯¢ å­—ä½“çš„é€‚é…ï¼ˆå­—ä½“å•ä½ï¼‰ ç™¾åˆ†æ¯”å¸ƒå±€ å›¾ç‰‡çš„é€‚é…ï¼ˆå›¾ç‰‡çš„å“åº”å¼ï¼‰ ç»“åˆ flexï¼Œgridï¼ŒBFCï¼Œæ …æ ¼ç³»ç»Ÿç­‰å·²ç»æˆå‹çš„æ–¹æ¡ˆ","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://zouhualu.github.io/tags/%E9%9D%A2%E8%AF%95/"},{"name":"CSS","slug":"CSS","permalink":"https://zouhualu.github.io/tags/CSS/"},{"name":"å“åº”å¼å¸ƒå±€","slug":"å“åº”å¼å¸ƒå±€","permalink":"https://zouhualu.github.io/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/"}]},{"title":"2022å¹´ä¸­æ€»ç»“","slug":"2022å¹´ä¸­æ€»ç»“","date":"2022-07-15T10:33:09.000Z","updated":"2025-11-25T06:37:33.005Z","comments":true,"path":"20220715/2022å¹´ä¸­æ€»ç»“/","permalink":"https://zouhualu.github.io/20220715/2022%E5%B9%B4%E4%B8%AD%E6%80%BB%E7%BB%93/","excerpt":"","text":"ä»Šå¹´ä¸ŠåŠå¹´ä¸€ç›´åœ¨ç‹¬ç«‹è´Ÿè´£â€œUTen é¡¹ç›®â€çš„å‰ç«¯å¼€å‘å·¥ä½œã€‚è¯¥é¡¹ç›®åŸºäº vue2 å…¨å®¶æ¡¶ï¼Œæä¾›æµ·å¤–å®¢æˆ·åœ¨çº¿é€‰å“çš„åŠŸèƒ½ï¼Œæ”¶å…¥åœ¨äºåŠŸèƒ½ä»˜è´¹ã€‚","categories":[{"name":"ç”Ÿæ´»éšç¬”","slug":"ç”Ÿæ´»éšç¬”","permalink":"https://zouhualu.github.io/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"https://zouhualu.github.io/tags/%E6%80%BB%E7%BB%93/"},{"name":"å¹´åº¦æ€»ç»“","slug":"å¹´åº¦æ€»ç»“","permalink":"https://zouhualu.github.io/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"}]},{"title":"Promiseè¾“å‡ºé¡ºåºç›¸å…³é—®é¢˜","slug":"Promiseè¾“å‡ºé¡ºåºç›¸å…³é—®é¢˜","date":"2022-03-29T10:06:06.000Z","updated":"2025-11-25T06:34:03.212Z","comments":true,"path":"20220329/Promiseè¾“å‡ºé¡ºåºç›¸å…³é—®é¢˜/","permalink":"https://zouhualu.github.io/20220329/Promise%E8%BE%93%E5%87%BA%E9%A1%BA%E5%BA%8F%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/","excerpt":"","text":"é¢˜ï¼š1234567891011121314151617181920212223242526272829303132333435Promise.resolve() .then(() =&gt; &#123; console.log(0); setTimeout(() =&gt; &#123; console.log(&quot;å®ä»»åŠ¡&quot;); &#125;, 0); // return 4 return Promise.resolve(4); // æ­¤å¤„æ˜¯è¿·æƒ‘ç‚¹ &#125;) .then((res) =&gt; &#123; console.log(res); &#125;);Promise.resolve() .then(() =&gt; &#123; console.log(1); &#125;) .then(() =&gt; &#123; console.log(2); &#125;) .then(() =&gt; &#123; console.log(3); &#125;) .then(() =&gt; &#123; console.log(5); &#125;) .then(() =&gt; &#123; console.log(6); &#125;) .then(() =&gt; &#123; console.log(7); &#125;) .then(() =&gt; &#123; console.log(8); &#125;); ç­”ï¼š1234567891011// è¾“å‡ºç»“æœ0;1;2;3;4;5;6;7;8;å®ä»»åŠ¡; è§£æï¼š| return Promise.resolve(4)ä¼šäº§ç”Ÿä¸€ä¸ªå« job çš„å‡½æ•°ï¼Œç­‰åˆ°å½“å‰æ‰§è¡Œæ ˆä¸ºç©ºçš„æ—¶å€™ä¼šå»æ‰§è¡Œ | å¾®ä»»åŠ¡çš„æ‰§è¡Œä¸­ç”Ÿæˆäº†å¾®ä»»åŠ¡ï¼Œé‚£ä¹ˆä¼šç»§ç»­æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºã€‚ å®ä»»åŠ¡é˜Ÿåˆ— 1,æ‰§è¡ŒPromise.resolve() é‡åˆ°then()å›è°ƒ,å¾€å¾®ä»»åŠ¡é˜Ÿåˆ—æ¨å…¥ä»¥ä¸‹ä»£ç ï¼š 1234567// å¾®ä»»åŠ¡é˜Ÿåˆ—åŠ å…¥äº†ä»¥ä¸‹ä»£ç // å¾®ä»»åŠ¡é˜Ÿåˆ—1console.log(0);setTimeout(() =&gt; &#123; console.log(&quot;å®ä»»åŠ¡&quot;);&#125;, 0);return Promise.resolve(4); ä»ç„¶åœ¨å½“å‰å®ä»»åŠ¡å¾€ä¸‹æ‰§è¡Œï¼Œæ‰§è¡Œç¬¬äºŒä¸ªPromise.resolve() é‡åˆ°then()å›è°ƒ,å¾€å¾®ä»»åŠ¡é˜Ÿåˆ—æ¨å…¥ä»¥ä¸‹ä»£ç : 1console.log(1); æ‰€ä»¥æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œæœ‰ä¸¤ä¸ªä»£ç å—å¾…æ‰§è¡Œã€‚é˜Ÿåˆ—å°±æ˜¯å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ 123456789// ç¬¬ä¸€ä¸ª:Aconsole.log(0);setTimeout(() =&gt; &#123; console.log(&quot;å®ä»»åŠ¡&quot;);&#125;, 0);return Promise.resolve(4);// ç¬¬äºŒä¸ª:Bconsole.log(1); æ­¤æ—¶ä»£ç æ¨¡å—é‡Œçš„å®ä»»åŠ¡éƒ½å·²ç»æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æå–å¾®ä»»åŠ¡åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚é˜Ÿåˆ—é‡Œç¬¬ä¸€ä¸ªå‡ºæ¥çš„ä¹Ÿå°±æ˜¯ä»£ç ï¼š 12345console.log(0);setTimeout(() =&gt; &#123; console.log(&quot;å®ä»»åŠ¡&quot;);&#125;, 0);return Promise.resolve(4); è¾“å‡º 0ã€‚ æ³¨å†Œä¸€ä¸ª jobï¼Œå½“æ‰§è¡Œæ ˆä¸ºç©ºçš„æ—¶å€™ï¼Œjob è¿›å…¥é˜Ÿåˆ—ã€‚æ­¤æ—¶æ‰§è¡Œæ ˆå¹¶ä¸ä¸ºç©ºã€‚A å‡ºæ ˆ B å…¥æ ˆ 6. 1console.log(1); è¾“å‡º 1ã€‚then çš„å›è°ƒæ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚B å‡ºæ ˆã€‚æ‰§è¡Œæ ˆä¸ºç©ºã€‚job ä¹Ÿè¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— å‡½æ•°æ˜¯:æ­¤æ—¶çš„å¾®ä»»åŠ¡é˜Ÿåˆ—å°±æœ‰ä¸¤ä¸ªå‡½æ•° 123456789// ç¬¬ä¸€ä¸ª.then(() =&gt; &#123; console.log(2); &#125;)// ç¬¬äºŒä¸ªï¼Œjob(4) =&gt; &#123; this.resolvePromise(promise2, 4, resolve, reject);&#125;; è¾“å‡º 2 å°†å®ƒçš„å›è°ƒå‡½æ•°æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 123.then(() =&gt; &#123; console.log(3); &#125;) å†å»æ‰§è¡Œ 123(4) =&gt; &#123; this.resolvePromise(promise2, 4, resolve, reject);&#125;; è¿™ä¸ªå‡½æ•°ä¼šå°† 123(res) =&gt; &#123; console.log(res);&#125;; æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— è¾“å‡º 3 å’Œ 4 è¾“å‡º 3 çš„å›è°ƒå†æ¬¡æ¨å…¥å¾®ä»»åŠ¡ 123.then(() =&gt; &#123; console.log(5); &#125;) è¾“å‡º 5 åç»­è¾“å‡ºåŸç†ç›¸åŒï¼Œè¾“å‡º 6,7,8 æ­¤æ—¶æ²¡æœ‰å›è°ƒå¾®ä»»åŠ¡è¿›æ ˆäº†ï¼Œå¼€å§‹æ¸…ç©ºå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯ setTimeoutï¼Œè¾“å‡ºå®ä»»åŠ¡","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","permalink":"https://zouhualu.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"name":"Promise","slug":"Promise","permalink":"https://zouhualu.github.io/tags/Promise/"}]},{"title":"Vue2æºç ","slug":"vue2æºç ","date":"2022-02-22T03:36:51.000Z","updated":"2025-11-25T06:34:35.238Z","comments":true,"path":"20220222/vue2æºç /","permalink":"https://zouhualu.github.io/20220222/vue2%E6%BA%90%E7%A0%81/","excerpt":"","text":"ä¸ºä»€ä¹ˆdataæ˜¯å‡½æ•°ï¼Œè€Œcomponentsæ˜¯å¯¹è±¡ï¼Ÿdataå‡½æ•°å¦‚æœæ²¡æœ‰è¿”å›å€¼ä¼šæŠ¥é”™å—ï¼Ÿç­”ï¼šä¼š vueæºç ä½ç½®ï¼šsrc\\core\\instance\\state.js 1234567891011121314151617181920function initData (vm: Component) &#123; let data = vm.$options.data data = vm._data = typeof data === &#x27;function&#x27; ? getData(data, vm) : data || &#123;&#125; // // çœ‹è¿™é‡Œï¼è¿™é‡Œæœ‰ä¸€ä¸ªåˆ¤æ–­ isPlainObject(data) if (!isPlainObject(data)) &#123; data = &#123;&#125; process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; warn( &#x27;data functions should return an object:\\n&#x27; + &#x27;https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function&#x27;, vm ) &#125; // ... // ... // ... // observe data observe(data, true /* asRootData */)&#125; Vueæºç ä½ç½®ï¼špackages\\weex-template-compiler\\build.js 123function isPlainObject (obj) &#123; return _toString.call(obj) === &#x27;[object Object]&#x27;&#125; dataå‡½æ•°æ‰§è¡Œä¹‹åå°†è¿”å›å€¼é‡æ–°èµ‹å€¼ç»™dataï¼Œå¦‚æœdataä¸æ˜¯ä¸ªobjectï¼Œnameå°±ä¼šæŠ¥å‡ºä¸€ä¸ªè­¦å‘Š ä¸ºä»€ä¹ˆpropså®šä¹‰çš„æ•°æ®ä¸èƒ½å’ŒdataåŒå? vueæºç è·¯å¾„ï¼švue\\src\\core\\instance\\state.js 1234567891011121314151617181920212223242526// proxy data on instance const keys = Object.keys(data) const props = vm.$options.props const methods = vm.$options.methods let i = keys.length while (i--) &#123; const key = keys[i] if (process.env.NODE_ENV !== &#x27;production&#x27;) &#123; if (methods &amp;&amp; hasOwn(methods, key)) &#123; warn( `Method &quot;$&#123;key&#125;&quot; has already been defined as a data property.`, vm ) &#125; &#125; if (props &amp;&amp; hasOwn(props, key)) &#123; process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; warn( `The data property &quot;$&#123;key&#125;&quot; is already declared as a prop. ` + `Use prop default value instead.`, vm ) &#125; else if (!isReserved(key)) &#123; proxy(vm, `_data`, key) &#125; &#125; å¯ä»¥çœ‹åˆ°å…ˆè·å–dataçš„keyï¼Œç„¶åå†å»è°ƒç”¨hasOwnæ–¹æ³•å»åˆ¤æ–­methodså’Œpropsé‡Œé¢æ˜¯å¦æœ‰é‡å¤çš„keyï¼Œæœ‰çš„è¯å°±ä¼šå‘å‡ºè­¦å‘Šã€‚æœ€åéƒ½é€šè¿‡äº†ä¹‹åå°±ä¼šè°ƒç”¨proxy(vm, &#39;_data&#39;, key)ï¼Œç”¨å°è£…çš„proxyæ–¹æ³•å¯¹vmå®ä¾‹åšäº†ä¸€å±‚ä»£ç†ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡thisç›´æ¥è°ƒç”¨key vue2ä»£ç†çš„å®ç°123456789101112131415161718const sharedPropertyDefinition = &#123; enumerable: true, configurable: true, get: noop, set: noop&#125;export function proxy (target: Object, sourceKey: string, key: string) &#123; // å»æ‰_propsï¼Œvm._props.xxx =&gt; vm.xxxï¼Œå¯ä»¥ç›´æ¥è®¿é—® sharedPropertyDefinition.get = function proxyGetter () &#123; return this[sourceKey][key] &#125; sharedPropertyDefinition.set = function proxySetter (val) &#123; this[sourceKey][key] = val &#125; // ä»£ç†ï¼Œ Object.defineProperty(target, key, sharedPropertyDefinition)&#125; ä½¿ç”¨çš„æ˜¯Object.definePropertyæ¥å®ç°çš„ Vueçš„åˆå§‹åŒ– Vueæºç ä½ç½®ï¼šsrc\\core\\instance\\index.js 12345initMixin(Vue)stateMixin(Vue)eventsMixin(Vue)lifecycleMixin(Vue)renderMixin(Vue) æœ€å…ˆæ‰§è¡Œçš„æ˜¯initMixin()ï¼Œæˆ‘ä»¬çœ‹çœ‹é‡Œé¢æœ‰å•¥ã€‚ Vueæºç ä½ç½®ï¼šsrc\\core\\instance\\init.js 1234567891011121314151617181920//init.js // åˆå§‹åŒ– vm._self = vm // ç”Ÿå‘½å‘¨æœŸ initLifecycle(vm) // äº‹ä»¶ initEvents(vm) // æ¸²æŸ“ initRender(vm) // é¢è¯•é¢˜ï¼šbeforeCreaeå’Œcreatedä¹‹é—´åšäº†ä»€ä¹ˆï¼Ÿæˆ–è€…è¯´äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ // ç­”ï¼šåˆå§‹åŒ–injectedï¼Œåˆå§‹åŒ–stateï¼Œåˆå§‹åŒ–provide callHook(vm, &#x27;beforeCreate&#x27;) // åˆå§‹åŒ–inject initInjections(vm) // resolve injections before data/props // åˆå§‹åŒ–stateï¼Œstateé‡Œé¢æœ‰dataï¼Œcomputedï¼Œmethodï¼Œpropsï¼Œwatch initState(vm) // åˆå§‹åŒ–provide initProvide(vm) // resolve provide after data/props callHook(vm, &#x27;created&#x27;) initState()æ˜¯ä»state.jsæ–‡ä»¶é‡Œé¢å¯¼å…¥çš„ï¼Œæˆ‘ä»¬å†å»çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆã€‚ src\\core\\instance\\state.js 1234567891011121314151617181920export function initState (vm: Component) &#123; vm._watchers = [] const opts = vm.$options // åˆå§‹åŒ–props if (opts.props) initProps(vm, opts.props) // åˆå§‹åŒ–æ–¹æ³• if (opts.methods) initMethods(vm, opts.methods) // åˆå§‹åŒ–data if (opts.data) &#123; initData(vm) &#125; else &#123; observe(vm._data = &#123;&#125;, true /* asRootData */) &#125; // åˆå§‹åŒ–computed if (opts.computed) initComputed(vm, opts.computed) // åˆå§‹åŒ–watch if (opts.watch &amp;&amp; opts.watch !== nativeWatch) &#123; initWatch(vm, opts.watch) &#125;&#125; å¯è§åœ¨beforeCreateä¸createdä¹‹é—´åˆå§‹åŒ–äº†inject,props,methods,data,computed,watch åŸºäºVue2çš„proxyï¼Œè‡ªå·±å®ç°ä¸€ä¸ªä»£ç†1234567891011121314151617181920212223242526272829303132333435const noop = &#123;&#125; const propertyDefinition = &#123; enumerable:true, configurable:true, get:noop, set:noop&#125;const Proxy = function(target,sourceKey,key)&#123; propertyDefinition.get = function getter() &#123; return target[sourceKey][key] &#125; propertyDefinition.set = function setter (val) &#123; target[sourceKey][key] = val &#125; Object.defineProperty(target,key,propertyDefinition)&#125;function Vue(data)&#123; this._data = data Object.keys(this._data).forEach(key =&gt; &#123; Proxy(this,&#x27;_data&#x27;,key) &#125;)&#125;const vueIns = new Vue(&#123;a:1,b:2&#125;)vueIns._data.b = &#x27;hhh&#x27;vueIns.a = 2222console.log(vueIns._data.a)console.log(vueIns.b) Vueçš„å®ä¾‹ä¸ºä»€ä¹ˆä¸èƒ½æŒ‚è½½åœ¨bodyæˆ–æ ¹èŠ‚ç‚¹ä¸Šï¼ŸæŒ‚è½½äº†ä¼šæŠ¥é”™å—ï¼Ÿç­”ï¼šæŒ‚è½½èŠ‚ç‚¹ä¼šè¢«è™šæ‹Ÿdomç”Ÿæˆçš„Domæ›¿æ¢ï¼Œä¼šæŠ¥é”™ Vueæºç ä½ç½®ï¼šsrc\\platforms\\web\\entry-runtime-with-compiler.js 123456if (el === document.body || el === document.documentElement) &#123; process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; warn( `Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.` ) return this &#125; Vue.setæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„åœ¨ Vue2ä¸­ç”±äºObject.definePropertyçš„å±€é™æ€§ï¼Œæ— æ³•åŸç”Ÿç›‘å¬å¯¹è±¡æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§æˆ–è€…æ•°ç»„ç´¢å¼•æ“ä½œï¼Œæ‰€ä»¥æä¾›äº† Vue.set æ–¹æ³•ä½œä¸ºè¡¥å¿ apiæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ Vue.setçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼š ä¸ºå“åº”å¼å¯¹è±¡æ–°å¢å±æ€§ï¼Œå¹¶è®©è¯¥å±æ€§ä¹Ÿå…·å¤‡å“åº”å¼èƒ½åŠ›ï¼ˆå³è¢« getterã€setter æ‹¦æˆªï¼‰ è§¦å‘è¯¥å¯¹è±¡çš„ä¾èµ–æ›´æ–°ï¼ˆå³é€šçŸ¥æ‰€æœ‰ä¾èµ–è¯¥å±æ€§çš„ watcher æ‰§è¡Œæ›´æ–°ï¼‰ å®ç°çš„æ ¸å¿ƒé€»è¾‘ å‚æ•°æ ¡éªŒä¸è¾¹ç•Œå¤„ç† æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štargetï¼ˆç›®æ ‡å¯¹è±¡/æ•°ç»„ï¼‰ã€keyï¼ˆæ–°å¢å±æ€§å/ç´¢å¼•ï¼‰ã€valueï¼ˆæ–°å¢å±æ€§å€¼ï¼‰ å¦‚æœ target æ˜¯ vue å®ä¾‹æˆ–è€… $data(æ ¹æ•°æ®å¯¹è±¡)ï¼Œç›´æ¥æŠ¥é”™ã€‚vue ä¸å…è®¸ç»™å®ä¾‹æ·»åŠ æ ¹çº§å“åº”å¼å±æ€§ å¦‚æœ target ä¸æ˜¯å“åº”å¼å¯¹è±¡(æœªè¢« Observer å¤„ç†è¿‡)ï¼Œç›´æ¥èµ‹å€¼target[key] = valueï¼Œç„¶åè¿”å›ã€‚éå“åº”å¼æ•°æ®æ— éœ€åŠ«æŒã€‚ å¤„ç†æ•°ç»„çš„æƒ…å†µ å¦‚æœ target æ˜¯æ•°ç»„ä¸” key æ˜¯æœ‰æ•ˆçš„ç´¢å¼•ï¼š è®¡ç®—å®é™…ç´¢å¼•ï¼ˆå¤„ç†è´Ÿæ•°ç´¢å¼•ï¼Œå¦‚ key=-1 å¯¹åº” target.length-1ï¼‰ ä½¿ç”¨ splice æ–¹æ³•åœ¨æŒ‡å®šç´¢å¼•ä½ç½®æ–°å¢å…ƒç´  æ ¸å¿ƒæ“ä½œï¼š è°ƒç”¨æ•°ç»„çš„ splice æ–¹æ³•æ›¿æ¢å…ƒç´ (target.splice(key,1,val))ã€‚å› ä¸º Vue å·²ç»é‡å†™äº†æ•°ç»„çš„ splice æ–¹æ³•ï¼Œä½¿å…¶æ‰§è¡Œçš„æ—¶å€™ä¼šè§¦å‘ä¾èµ–æ›´æ–°ï¼ˆdep.notify()ï¼‰ï¼ŒåŒæ—¶æ–°æ’å…¥çš„ val ä¼šè¢«è½¬ä¸ºå“åº”å¼ã€‚ å¤„ç†å¯¹è±¡çš„æƒ…å†µ å¦‚æœ target æ˜¯å¯¹è±¡ï¼š å¦‚æœ key å·²å­˜åœ¨ä¸ targetï¼Œé‚£ä¹ˆæ—§ç›´æ¥èµ‹å€¼target[key] = valueï¼Œä¼šè§¦å‘ setterï¼Œè‡ªåŠ¨æ›´æ–°ä¾èµ–ã€‚ å¦‚æœ key æ˜¯æ–°å±æ€§ï¼š è·å– target å¯¹è±¡çš„ Observer å®ä¾‹ï¼ˆVue å†…éƒ¨ç”¨äºç®¡ç†å“åº”å¼çš„å¯¹è±¡ï¼Œæ¯ä¸ªå“åº”å¼æ•°æ®éƒ½æœ‰ä¸€ä¸ª Observer å®ä¾‹ï¼‰ è°ƒç”¨ Observer å®ä¾‹çš„ defineReactive æ–¹æ³•ï¼Œä¸ºæ–°å±æ€§key æ·»åŠ  getter/setterï¼Œä½¿å…¶å…·å¤‡å“åº”å¼å±æ€§ã€‚ è§¦å‘ target å¯¹è±¡çš„ä¾èµ–æ›´æ–°ï¼Œé€šè¿‡ Observer å®ä¾‹çš„ dep.notify() æ–¹æ³•é€šçŸ¥æ‰€æœ‰ä¾èµ–è¯¥å¯¹è±¡çš„ watcher æ‰§è¡Œæ›´æ–°ã€‚ computed å’Œ watch çš„åŒºåˆ«computedä»ç°æœ‰å“åº”å¼æ•°æ®ä¸­åŠ¨æ€æ´¾ç”Ÿæ–°å€¼ã€‚ æ˜¾å¼ä¾èµ–å“åº”å¼æ•°æ®ï¼ˆdataã€propsï¼‰ï¼Œä¾èµ–å…³ç³»æ˜¯â€œå¤šå¯¹ä¸€â€ï¼Œå¯ä»å¤šä¸ªæ•°æ®æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°å€¼ã€‚ åªæœ‰å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ï¼Œè‹¥ä¾èµ–æœªå˜ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„ç»“æœã€‚ è§¦å‘æ—¶æœºæ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰å½“è®¡ç®—ç»“æœè¢«æ¨¡æ¿æˆ–è€…å…¶ä»–å“åº”å¼æ•°æ®ä½¿ç”¨æ—¶æ‰ä¼šè§¦å‘è®¡ç®—ã€‚ watch ç›‘å¬å“åº”å¼æ•°æ®å˜åŒ–å¹¶æ‰§è¡Œå‰¯ä½œç”¨ã€‚ å¯ä»¥ç›‘å¬å•ä¸ªæˆ–å¤šä¸ªå“åº”å¼æ•°æ®ï¼ˆdataã€propsã€computedï¼‰ï¼Œä¾èµ–å…³ç³»æ˜¯â€œä¸€å¯¹å¤šâ€æˆ–è€…â€œå¤šå¯¹å¤šâ€ï¼ˆä¸€ä¸ªæ•°æ®å˜åŒ–å¯ä»¥è§¦å‘å¤šä¸ªæ“ä½œï¼‰ è§¦å‘æ—¶æœºæ˜¯ä¸»åŠ¨çš„ï¼Œå½“ç›‘å¬çš„å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šç«‹å³æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ å½“ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä¸ä¼šç¼“å­˜æ‰§è¡Œç»“æœã€‚ é…ç½®çµæ´»ï¼Œæ”¯æŒdeep: trueæ·±åº¦ç›‘å¬ï¼Œä»¥åŠimmediate: trueç«‹å³æ‰§è¡Œå›è°ƒï¼Œhandlerï¼ˆå›è°ƒå‡½æ•°ï¼‰ç­‰é€‰é¡¹ã€‚ new Vue()è¿‡ç¨‹ä¸­åšäº†äº›ä»€ä¹ˆnew Vue(options)çš„è¿‡ç¨‹æ˜¯å®ä¾‹åˆå§‹åŒ–çš„æ ¸å¿ƒæµç¨‹ï¼Œæœ¬è´¨æ˜¯é€šè¿‡ä¸€ç³»åˆ—åˆå§‹åŒ–æ­¥éª¤å°†ä¼ å…¥çš„é…ç½®ï¼ˆoptionsï¼‰è½¬åŒ–ä¸ºä¸€ä¸ªå¯å“åº”ã€å¯æ¸²æŸ“çš„ Vue å®ä¾‹ã€‚ æ•´ä¸ªè¿‡ç¨‹å¯åˆ†ä¸ºé€‰é¡¹åˆå¹¶ã€åˆå§‹åŒ–æ ¸å¿ƒæ¨¡å—ã€æ¨¡æ¿ç¼–è¯‘ä¸æŒ‚è½½ä¸‰å¤§é˜¶æ®µã€‚ é€‰é¡¹åˆå¹¶Vue å®ä¾‹æ¥æ”¶çš„ optionsï¼ˆå¦‚ dataã€methodsã€components ç­‰ï¼‰å¹¶éç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯éœ€è¦ä¸å…¨å±€é…ç½®ï¼ˆVue.configï¼‰ã€ç»„ä»¶ç»§æ‰¿çš„é…ç½®ï¼ˆè‹¥ä¸ºç»„ä»¶å®ä¾‹ï¼‰è¿›è¡Œåˆå¹¶ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªç»Ÿä¸€çš„é…ç½®å¯¹è±¡ã€‚ åˆå§‹åŒ–æ ¸å¿ƒæ¨¡å— åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ åˆå§‹åŒ–äº‹ä»¶ç³»ç»Ÿï¼ˆ$onã€$emitã€$offç­‰ï¼‰ åˆå§‹åŒ–æ³¨å…¥ï¼ˆinjectï¼‰ï¼Œä»çˆ¶ç»„ä»¶çš„ provide ä¸­è·å–å¯¹åº”çš„å€¼ åˆå§‹åŒ–çŠ¶æ€ï¼Œå¤„ç† dataã€propsã€computedã€watch ç­‰æ ¸å¿ƒæ•°æ® åˆå§‹åŒ– props åˆå§‹åŒ– methods åˆå§‹åŒ– data åˆå§‹åŒ– computed åˆå§‹åŒ– watch åˆå§‹åŒ– provide æ¨¡æ¿ç¼–è¯‘ä¸æŒ‚è½½ æ¨¡æ¿ç¼–è¯‘ å°†æ¨¡æ¿è½¬æ¢ä¸º render æ¸²æŸ“å‡½æ•° è§£æï¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²è§£æä¸º ASTï¼ˆæŠ½è±¡è¯­æ³•æ•°ï¼‰ ä¼˜åŒ–ï¼šä¼˜åŒ– ASTï¼Œæ ‡è®° AST ä¸­çš„é™æ€èŠ‚ç‚¹ï¼Œé¿å…æ¯æ¬¡æ›´æ–°æ—¶é‡æ–°æ¸²æŸ“ ç”Ÿæˆï¼šå°† AST è½¬æ¢ä¸º render å‡½æ•° æŒ‚è½½ é€šè¿‡ render å‡½æ•°ç”Ÿæˆè™šæ‹Ÿ DOMï¼Œå†å°†è™šæ‹Ÿ DOM æ¸²æŸ“ä¸ºçœŸå® DOM å¹¶æ’å…¥åˆ° el å¯¹åº”çš„å®¹å™¨ä¸­ Vue.observableçš„äº†è§£åœ¨ Vue 2 ä¸­ï¼ŒVue.observable æ˜¯ä¸€ä¸ªå…¨å±€ APIï¼Œå®šä¹‰åœ¨ Vue æ„é€ å‡½æ•°ä¸Šï¼Œæºç åŸºäºå“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘å®ç°ã€‚ æ ¸å¿ƒä½œç”¨å°†ä¸€ä¸ªæ™®é€šå¯¹è±¡è½¬æ¢ä¸ºå“åº”å¼å¯¹è±¡ï¼Œä½¿å…¶å…·å¤‡ â€œæ•°æ®å˜åŒ–æ—¶è§¦å‘ä¾èµ–æ›´æ–°â€ çš„èƒ½åŠ›ã€‚è½¬æ¢åçš„å¯¹è±¡å¯ä»¥è¢«ç»„ä»¶å¼•ç”¨ï¼Œå½“å¯¹è±¡å±æ€§å˜åŒ–æ—¶ï¼Œå¼•ç”¨å®ƒçš„ç»„ä»¶ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚ å®ç°åŸç†ä¸ç»„ä»¶å†… data çš„å“åº”å¼å¤„ç†é€»è¾‘ä¸€è‡´ï¼šé€šè¿‡ Object.defineProperty å¯¹å¯¹è±¡çš„å±æ€§é€’å½’æ·»åŠ  getter/setterï¼Œå®ç°ä¾èµ–æ”¶é›†ï¼ˆgetter æ—¶ï¼‰å’Œæ›´æ–°è§¦å‘ï¼ˆsetter æ—¶ï¼‰ï¼Œæœ¬è´¨æ˜¯åˆ›å»ºäº†ä¸€ä¸ª Observer å®ä¾‹æ¥ç®¡ç†è¯¥å¯¹è±¡çš„å“åº”å¼ã€‚ ç¤ºä¾‹123456789101112131415161718// store.jsimport Vue from &#x27;vue&#x27;// åˆ›å»ºå“åº”å¼çŠ¶æ€å¯¹è±¡export const store = Vue.observable(&#123; count: 0, user: &#123; name: &#x27;Alice&#x27; &#125;&#125;)// å®šä¹‰ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•export const mutations = &#123; increment() &#123; store.count++ &#125;, setName(name) &#123; store.user.name = name &#125;&#125;","categories":[{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://zouhualu.github.io/tags/Vue/"},{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"}]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","date":"2022-01-27T02:48:53.000Z","updated":"2025-11-25T06:36:24.907Z","comments":true,"path":"20220127/æ•°æ®ç»“æ„ä¸ç®—æ³•/","permalink":"https://zouhualu.github.io/20220127/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","excerpt":"","text":"1.çº¿æ€§è¡¨å®šä¹‰ çº¿æ€§è¡¨æ˜¯å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„ n(nâ‰¥0)ä¸ªæ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ã€‚å…¶ä¸­ n ä¸ºè¡¨é•¿ï¼Œå½“ n=0 æ—¶è¯¥çº¿æ€§è¡¨æ˜¯ä¸€ä¸ªç©ºè¡¨ã€‚ è‹¥ç”¨ L å‘½åçº¿æ€§è¡¨ï¼Œåˆ™å…¶ä¸€èˆ¬è¡¨ç¤ºå¦‚ä¸‹ï¼š L=(a1,a2,...ai,ai+1,...,an) å…¶ä¸­ï¼Œa1 æ˜¯å”¯ä¸€çš„â€œç¬¬ä¸€ä¸ªâ€æ•°æ®å…ƒç´ ï¼Œåˆç§°ä¸ºè¡¨å¤´å…ƒç´ ï¼›an æ˜¯å”¯ä¸€çš„â€œæœ€åä¸€ä¸ªâ€æ•°æ®å…ƒç´ ï¼Œåˆç§°ä¸ºè¡¨å°¾å…ƒç´ ã€‚é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç›´æ¥å‰é©±ï¼›é™¤æœ€åä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç›´æ¥åç»§ã€‚ ç‰¹ç‚¹çº¿æ€§è¡¨å¸¸è§çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°æ˜¯æœ‰é™çš„ï¼› è¡¨ä¸­å…ƒç´ å…·æœ‰é€»è¾‘ä¸Šçš„é¡ºåºæ€§ï¼Œåœ¨åºåˆ—ä¸­å„å…ƒç´ æ’åˆ—æœ‰å…ˆåæ¬¡åºï¼› è¡¨ä¸­å…ƒç´ éƒ½æ˜¯æ•°æ®å…ƒç´ ï¼Œæ¯ä¸€ä¸ªè¡¨å…ƒç´ éƒ½æ˜¯å•ä¸ªå…ƒç´ ï¼› è¡¨ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹éƒ½ç›¸åŒï¼Œè¿™æ„å‘³ç€æ¯ä¸€ä¸ªè¡¨å…ƒç´ å æœ‰ç›¸åŒæ•°é‡çš„å­˜å‚¨ç©ºé—´ï¼› è¡¨ä¸­å…ƒç´ å…·æœ‰æŠ½è±¡æ€§ï¼Œå°±æ˜¯è¯´ï¼Œä»…è®¨è®ºè¡¨å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œä¸è€ƒè™‘è¡¨å…ƒç´ ç©¶ç«Ÿè¡¨ç¤ºä»€ä¹ˆå†…å®¹ åˆ†ç±» çº¿æ€§è¡¨çš„åŸºæœ¬æ“ä½œ12345678InitList(L); //åˆå§‹åŒ–è¡¨ã€‚æ„é€ ä¸€ä¸ªç©ºçš„çº¿æ€§è¡¨ï¼›Legnth(L); //æ±‚è¡¨é•¿åº¦ã€‚è¿”å›çº¿æ€§è¡¨Lçš„é•¿åº¦ï¼Œå³Lä¸­æ•°æ®å…ƒç´ çš„ä¸ªæ•°ï¼›LocateElem(L, e); //æŒ‰å€¼æŸ¥æ‰¾æ“ä½œã€‚åœ¨è¡¨Lä¸­æŸ¥æ‰¾å…·æœ‰ç»™å®šå…³é”®å­—å€¼çš„å…ƒç´ ï¼›GetElem(L, i); //æŒ‰ä½æŸ¥æ‰¾æ“ä½œã€‚è·å–è¡¨Lä¸­ç¬¬iä¸ªä½ç½®çš„å…ƒç´ çš„å€¼ï¼›ListInsert(L, i, e); //æ’å…¥æ“ä½œã€‚åœ¨è¡¨Lä¸­ç¬¬iä¸ªä½ç½®ä¸Šæ’å…¥åˆ¶å®šå…ƒç´ ï¼›ListDelete(L, i, e); //åˆ é™¤æ“ä½œã€‚åˆ é™¤è¡¨Lä¸­ç¬¬iä¸ªä½ç½®ä¸Šçš„å…ƒç´ ï¼›PrintList(L); //è¾“å‡ºæ“ä½œã€‚æŒ‰å‰åé¡ºåºè¾“å‡ºçº¿æ€§è¡¨Lçš„æ‰€æœ‰å…ƒç´ çš„å€¼ï¼›Empty(L); //åˆ¤ç©ºæ“ä½œ 1.1 çº¿æ€§è¡¨çš„é¡ºåºè¡¨ç¤º(é¡ºåºè¡¨) çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨åˆç§°ä¹‹ä¸ºé¡ºåºè¡¨ã€‚ å®ƒæ˜¯ç”¨ä¸€ç»„è¿ç»­åœ°å€çš„å­˜å‚¨å•å…ƒï¼Œä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ï¼Œä»è€Œä½¿å¾—é€»è¾‘ä¸Šç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ åœ¨ç‰©ç†ä¸Šä¹Ÿç›¸é‚»ã€‚ ç‰¹ç‚¹ é¡ºåºè¡¨ä¸­å…ƒç´ çš„é€»è¾‘é¡ºåºä¸ç‰©ç†é¡ºåºç›¸åŒ 2. é“¾è¡¨","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://zouhualu.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://zouhualu.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ES6éšç¬”","slug":"ES6éšç¬”","date":"2022-01-14T02:34:45.000Z","updated":"2025-11-25T06:34:00.613Z","comments":true,"path":"20220114/ES6éšç¬”/","permalink":"https://zouhualu.github.io/20220114/ES6%E9%9A%8F%E7%AC%94/","excerpt":"","text":"å‚è€ƒèµ„æ–™ï¼šé˜®ä¸€å³° ES6 æ ‡å‡†å…¥é—¨æ•™ç¨‹ç¬¬ä¸‰ç‰ˆ æœ¬æ–‡ç”¨äºè®°å½•æˆ‘è§‰å¾— ES6 ä¸­é‡è¦çš„åŸç†å’Œä½¿ç”¨æŠ€å·§ class çš„ç»§æ‰¿Class å¯ä»¥é€šè¿‡ extends å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œè¿™æ¯” ES5 çš„é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ï¼Œè¦æ¸…æ™°å’Œæ–¹ä¾¿å¾ˆå¤šã€‚ 123456789class ColorPoint extends Point &#123; constructor(x, y, color) &#123; super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y) this.color = color; &#125; toString() &#123; return this.color + &quot; &quot; + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString() &#125;&#125; å­ç±»å¿…é¡»åœ¨ constructor æ–¹æ³•ä¸­è°ƒç”¨ super æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„ this å¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨ super æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ° this å¯¹è±¡ã€‚ ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡ thisï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ° this ä¸Šé¢ï¼ˆParent.apply(this)ï¼‰ã€‚ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ° this ä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨ super æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹ thisã€‚ 20220502 æ›´æ–° æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼Œåœ¨ ES6 çš„â€œç±»â€ä¸Šé¢ç»§ç»­å­˜åœ¨ã€‚äº‹å®ä¸Šï¼Œç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„ prototype å±æ€§ä¸Šé¢ã€‚ â€“é˜®ä¸€å³°ã€ŠES6ã€‹ 1234567891011121314151617class Point &#123; constructor() &#123; // ... &#125; toString() &#123; // ... &#125; toValue() &#123; // ... &#125;&#125;// ç­‰åŒäºPoint.prototype = &#123; constructor() &#123;&#125;, toString() &#123;&#125;, toValue() &#123;&#125;,&#125;; å½“æˆ‘æƒ³æ‰“å°è¾“å‡ºçœ‹ä¸€ä¸‹console.log(Point.prototype)çš„æ—¶å€™è¾“å‡ºå´æ˜¯{},æ„Ÿåˆ°å¾ˆå¥‡æ€ªï¼Œæ˜æ˜æ–¹æ³•æ˜¯å®šä¹‰åœ¨prototypeå±æ€§ä¸Šçš„ï¼Œä¸ºä»€ä¹ˆè¾“å‡ºç¡®å®ç©ºçš„å‘¢ï¼Ÿ æŸ¥äº†ä¸€ä¸‹å‘ç°ï¼š è¿™æ˜¯å› ä¸º console.log()ä½¿ç”¨äº† util.inspect()ï¼Œå®ƒä½¿ç”¨äº† Objectã€‚å¯¹è±¡ä¸Šçš„keys()ï¼Œå®ƒåªè¿”å›å¯æšä¸¾çš„å±æ€§ã€‚å¹¶ä¸” Object.prototype åŒ…å«éå¯æšä¸¾å±æ€§ï¼Œè¿™å°±æ˜¯å®ƒè¿”å›ç©ºèŠ‚ç‚¹çš„åŸå› ã€‚ å› ä¸ºé‚£äº›æ–¹æ³•éƒ½é»˜è®¤æ˜¯ä¸å¯æšä¸¾çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªå¯æšä¸¾çš„å±æ€§æ—¶å¯ä»¥ä½¿ç”¨Object.defineProperty() 12345678Object.defineProperty(Point.prototype, &quot;hh&quot;, &#123; value: function () &#123; console.log(3); &#125;, // å¯æšä¸¾ enumerable: true,&#125;);console.log(Point.prototype); è¿™ä¸‹æ‰“å°å‡ºäº†{ hh: [Function: value] }","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"https://zouhualu.github.io/tags/ES6/"}]},{"title":"è£…é¥°å™¨çš„ä½¿ç”¨","slug":"è£…é¥°å™¨çš„ä½¿ç”¨","date":"2021-12-23T06:37:11.000Z","updated":"2025-11-25T06:33:59.563Z","comments":true,"path":"20211223/è£…é¥°å™¨çš„ä½¿ç”¨/","permalink":"https://zouhualu.github.io/20211223/%E8%A3%85%E9%A5%B0%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"åœ¨ create-react-app æ­å»ºçš„é¡¹ç›®ä¸­ä½¿ç”¨è£…é¥°å™¨ æ‰§è¡Œyarn ejectå‘½ä»¤ï¼Œæš´éœ²å‡ºé…ç½®é¡¹ å› ä¸ºè£…é¥°å™¨æ˜¯æ–°çš„ææ¡ˆï¼Œè®¸å¤šæµè§ˆå™¨å’Œ Node ç¯å¢ƒå¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…æ’ä»¶ï¼š@babel/plugin-proposal-decoratorsã€‚ä½¿ç”¨create-react-appåˆ›å»ºçš„é¡¹ç›®è‡ªå¸¦è¿™ä¸ªæ’ä»¶ï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸‹ï¼Œæ‰¾åˆ°package.jsonæ–‡ä»¶åŠ å…¥ä¸€ä¸‹ä»£ç ï¼š 1234567&#123; &quot;babel&quot;: &#123; &quot;presets&quot;: [&quot;react-app&quot;], &quot;plugins&quot;: [[&quot;@babel/plugin-proposal-decorators&quot;, &#123; &quot;legacy&quot;: true &#125;]] &#125;&#125; å¦å¤– vscode å¯èƒ½ä¼šæç¤ºä½ éœ€è¦é…ç½®tsconfigæˆ–jsconfigæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºjsconfig.jsï¼Œå¹¶å†™å…¥ï¼š 12345&#123; &quot;compilerOptions&quot;: &#123; &quot;experimentalDecorators&quot;: true &#125;&#125; è¿™æ ·å°±èƒ½æ„‰å¿«çš„åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è£…é¥°å™¨äº† è£…é¥°å™¨çš„ä½¿ç”¨ä½¿ç”¨è£…é¥°å™¨ä¿®é¥°ç±»1234567891011121314151617//å£°æ˜ä¸€ä¸ªè£…é¥°å™¨function fn(target) &#123; //è¿™ä¸ªå‡½æ•°çš„`target`æŒ‡çš„å°±æ˜¯è£…é¥°å™¨è¦ä¿®é¥°çš„ç±» target.test = false;&#125;@fn //ä½¿ç”¨è£…é¥°å™¨class Person &#123; //å£°æ˜ä¸€ä¸ªç±»&#125;@fnclass Dog &#123; //å£°æ˜å¦ä¸€ä¸ªç±»&#125;console.log(Person.test); //falseconsole.log(Dog.test); //false å¯ä»¥çœ‹åˆ°Personç±»å’ŒDogç±»ä¸‹é¢å¤šå‡ºäº†ä¸€ä¸ªtestå±æ€§ï¼Œè¿™å°±ä½“ç°äº†è£…é¥°å™¨çš„ä¼˜ç‚¹ï¼Œæ— éœ€æ›´æ”¹ç±»çš„å†…éƒ¨ä»£ç ä¹Ÿæ— éœ€å»ç»§æ‰¿å°±å¯ä»¥ç»™ç±»æ·»åŠ æ–°åŠŸèƒ½ ä½¿ç”¨è£…é¥°å™¨ä¼ å‚1234567891011121314151617@fn@fn2(5)class Person &#123;&#125;function fn(target) &#123; target.test = false;&#125;function fn2(value) &#123; return function (target) &#123; //è¿™ä¸ªå‡½æ•°çš„`target`æŒ‡çš„å°±æ˜¯è£…é¥°å™¨è¦ä¿®é¥°çš„ç±» target.count = value; &#125;;&#125;console.log(Person.test);console.log(Person.count); å£°æ˜ä¸€ä¸ªè£…é¥°å™¨fn2ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„targetæŒ‡çš„å°±æ˜¯è£…é¥°å™¨è¦ä¿®é¥°çš„ç±» ä½¿ç”¨è£…é¥°å™¨æ·»åŠ å®ä¾‹å±æ€§123456789101112131415161718192021@fn@fn2(5)@fn3class Person &#123;&#125;function fn(target) &#123; target.test = false;&#125;function fn2(value) &#123; return function (target) &#123; target.count = value; &#125;;&#125;function fn3(target) &#123; target.prototype.foo = &quot;hhh&quot;; // targetæŒ‡çš„å°±æ˜¯è£…é¥°çš„ç±»ï¼Œåœ¨ç±»çš„åŸå‹å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§foo&#125;const test1 = new Person(); // newä¸€ä¸ªå®ä¾‹å‡ºæ¥console.log(test1.foo); å®ç°ä¸€ä¸ªæ··å…¥ mixins åŠŸèƒ½1234567891011121314151617181920// å®ç°ä¸€ä¸ªmixinsåŠŸèƒ½export function mixins(...list) &#123; return function (target) &#123; Object.assign(target.prototype, ...list); &#125;;&#125;import &#123; mixins &#125; from &quot;./mixins&quot;;const Test = &#123; test() &#123; console.log(&quot;è¿™æ˜¯æµ‹è¯•&quot;); &#125;,&#125;;@mixins(Test)class Myclass &#123;&#125;const newMyclass = new Myclass();newMyclass.test(); //è¿™æ˜¯æµ‹è¯• ä½¿ç”¨è£…é¥°å™¨ä¿®é¥°ç±»çš„æˆå‘˜12345678910111213141516171819202122232425262728293031323334353637@fn@fn2(5)@fn3class Person &#123; @readonly message = &quot;hello&quot;;&#125;function fn(target) &#123; target.test = false;&#125;function fn2(value) &#123; return function (target) &#123; target.count = value; &#125;;&#125;function fn3(target) &#123; target.prototype.foo = &quot;hhh&quot;;&#125;function readonly(target, name, descriptor) &#123; console.log(target); //ç›®æ ‡ç±»çš„åŸå‹å¯¹è±¡ xxx.prototype console.log(name); // è¢«ä¿®é¥°çš„ç±»çš„æˆå‘˜åç§° console.log(descriptor); /*è¢«ä¿®é¥°çš„ç±»çš„æˆå‘˜çš„æè¿°å¯¹è±¡ï¼š configurable: èƒ½å¦ä½¿ç”¨deleteã€èƒ½å¦éœ€æ”¹å±æ€§ç‰¹æ€§ã€æˆ–èƒ½å¦ä¿®æ”¹è®¿é—®å™¨å±æ€§ã€ï¼Œfalseä¸ºä¸å¯é‡æ–°å®šä¹‰ï¼Œé»˜è®¤å€¼ä¸ºtrue enumerable: æ˜¯å¦è¢«éå†ï¼Œå¯¹è±¡å±æ€§æ˜¯å¦å¯é€šè¿‡for-inå¾ªç¯ï¼Œflaseä¸ºä¸å¯å¾ªç¯ï¼Œé»˜è®¤å€¼ä¸ºtrue initializer: å¯¹è±¡å±æ€§çš„é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined writable: å¯¹è±¡å±æ€§æ˜¯å¦å¯ä¿®æ”¹,flaseä¸ºä¸å¯ä¿®æ”¹ï¼Œé»˜è®¤å€¼ä¸ºtrue */ descriptor.writable = false;&#125;const test1 = new Person();test1.message = &quot;ä½ å¥½&quot;; å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œå…·ä½“çœ‹ä»¥ä¸Šä»£ç æ³¨é‡Š","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"https://zouhualu.github.io/tags/ES6/"},{"name":"è£…é¥°å™¨","slug":"è£…é¥°å™¨","permalink":"https://zouhualu.github.io/tags/%E8%A3%85%E9%A5%B0%E5%99%A8/"}]},{"title":"Reactéšç¬”","slug":"Reactéšç¬”","date":"2021-12-18T11:08:44.000Z","updated":"2025-11-25T06:35:01.239Z","comments":true,"path":"20211218/Reactéšç¬”/","permalink":"https://zouhualu.github.io/20211218/React%E9%9A%8F%E7%AC%94/","excerpt":"","text":"React ä¸­çš„thisReact çš„å®˜æ–¹æ–‡æ¡£é‡Œå†™çš„è‡ªå®šä¹‰çš„æ–¹æ³•éƒ½éœ€è¦ç”¨ bind æ–¹æ³•ç»‘å®šä¸€ä¸‹æ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™ this ä¼šå‡ºç°æŒ‡å‘é—®é¢˜ï¼Œé‚£ç©¶ç«Ÿæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æ¢è®¨ä¸€12345678910111213141516class Person &#123; constructor(props)&#123; this.state = &#123; ...... &#125; &#125; render()&#123; return &lt;div onClick=&#123;demo&#125;&gt;ä½ å¥½ï¼ŒDexterHwang&lt;/div&gt; &#125;&#125;function demo()&#123; console.log(this.state) // ä¼šæŠ¥é”™ï¼Œæ³¨æ„æ­¤å¤„çš„this&#125;ReactDom.render(&lt;Person /&gt;,document.getElementById(&#x27;app&#x27;)) React ä¸­çš„ Babel ä½¿ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥å†™çš„å…¨å±€çš„ thisæŒ‡å‘çš„æ˜¯undefined è€Œä¸” demo æ–¹æ³•å¹¶ä¸å†™åœ¨ Person ç±»ä¸­ï¼Œæ‰€ä»¥è¿™ä¸ª this ä¹Ÿä¸ä¼šæŒ‡å‘ Person çš„å®ä¾‹å¯¹è±¡ æ¢è®¨äºŒ123456789101112131415161718class Person &#123; constructor(props)&#123; this.state = &#123; ...... &#125; &#125; render()&#123; return &lt;div onClick=&#123;demo&#125;&gt;ä½ å¥½ï¼ŒDexterHwang&lt;/div&gt; // ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯ä¸ºï¼š`demo is not defined`ã€‚`onClick=&#123;demo&#125;`æ˜¯æ‰¾ä¸åˆ° `demo` æ–¹æ³•çš„ // return &lt;div onClick=&#123;this.demo&#125;&gt;ä½ å¥½ï¼ŒDexterHwang&lt;/div&gt; // è¿™æ ·å†™ä¹Ÿä¼šæŠ¥é”™ï¼Œå› ä¸ºå¹¶ä¸æ˜¯é€šè¿‡å®ä¾‹å¯¹è±¡å»è°ƒç”¨demoæ–¹æ³•ã€‚ç”±äºdemoæ˜¯ä½œä¸ºonClickçš„å›è°ƒï¼Œä¸æ˜¯é€šè¿‡å®ä¾‹è°ƒç”¨çš„ï¼Œæ˜¯ç›´æ¥è°ƒç”¨ã€‚ç±»ä¸­çš„æ–¹æ³•é»˜è®¤å¼€å¯äº†å±€éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥thiså€¼æ˜¯undefined &#125; // demoæ–¹æ³•åœ¨Personçš„åŸå‹å¯¹è±¡(prototype)ä¸Šï¼Œä¹Ÿå°±æ˜¯åœ¨Personçš„å®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Š(_proto_) // åªæœ‰é€šè¿‡Personå®ä¾‹å¯¹è±¡è°ƒç”¨demoæ–¹æ³•æ—¶ï¼Œdemoé‡Œé¢çš„thisæŒ‡å‘çš„å°±æ˜¯Personçš„å®ä¾‹å¯¹è±¡ demo()&#123; console.log(this) &#125;&#125;ReactDom.render(&lt;Person /&gt;,document.getElementById(&#x27;app&#x27;)) æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ 1234567891011121314class Person &#123; constructor(name, age) &#123; this.name = name; this.age = age; &#125; study() &#123; console.log(this); &#125;&#125;const p1 = new Person(&quot;DexterHwang&quot;, 18);p1.study(); //&#123;name:&#x27;DexterHwang&#x27;,age:18&#125;const x = p1.study;x(); // è¾“å‡ºundefined p1 çš„åŸå‹é“¾ä¸Šæ˜¯å¯ä»¥æ‰¾åˆ° study æ–¹æ³•çš„ï¼Œç„¶åæŠŠ study æ–¹æ³•èµ‹å€¼ç»™äº† xã€‚ä¹Ÿå°±ç›¸å½“äºåœ¨æ ˆä¸Šå¤šäº†ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº† study æ–¹æ³•ï¼Œè¿™ä¸‹ x å°±å½»åº•å’Œ p1 æ²¡æœ‰å…³ç³»äº† å¦å¤–ï¼Œå†æ˜ç¡®ä¸€ç‚¹ï¼š_ç±»ä¸­è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šå¯ç”¨å±€éƒ¨ä¸¥æ ¼æ¨¡å¼_ã€‚ä¹Ÿå°±æ˜¯è¯´ this çš„å€¼æ˜¯ undefined ä¹Ÿå°±æ˜¯è¯´ x æ‰§è¡Œå this å€¼å°±æ˜¯ undefined éªŒè¯ï¼šç±»ä¸­è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šå¯ç”¨å±€éƒ¨ä¸¥æ ¼æ¨¡å¼ 1234567891011function test() &#123; console.log(this);&#125;function test2() &#123; &quot;use strict&quot;; console.log(this);&#125;test(); // windowtest2(); // undefined åˆ†æ this.demo = this.demo.bind(this)ä¸ºä»€ä¹ˆç”¨ bind()å°±å¯ä»¥è§£å†³ this æŒ‡å‘é—®é¢˜å‘¢ï¼Ÿ 12345678910111213141516171819 class Person &#123; constructor(props)&#123; this.state = &#123; ...... &#125; this.demo = this.demo.bind(this) &#125; render()&#123; return &lt;div onClick=&#123;this.demo&#125;&gt;ä½ å¥½ï¼ŒDexterHwang&lt;/div&gt; &#125; demo()&#123; console.log(this) &#125;&#125;ReactDom.render(&lt;Person /&gt;,document.getElementById(&#x27;app&#x27;))// ç‚¹å‡»åä¼šè¾“å‡ºï¼šPerson&#123;...&#125; åˆ†æthis.demo = this.demo.bind(this) ç­‰å·å³ä¾§çš„ç¬¬ä¸€ä¸ª this æŒ‡å‘çš„æ˜¯å®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªå®ä¾‹å¯¹è±¡ä¸Šæœ‰ demo æ–¹æ³•å—ï¼Ÿæœ‰ï¼Œä½†æ˜¯å®åœ¨åŸå‹é“¾ä¸Šçš„ã€‚ bind æ–¹æ³•åšä¸¤ä»¶äº‹ï¼š å°† this ç‰¢ç‰¢çš„ç»‘å®šåˆ°ä¼ å…¥çš„å‚æ•°ä¸Š è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° ç­‰å·å³è¾¹ç¬¬äºŒä¸ª thisï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œè¿™ä¸ª this æŒ‡çš„å°±æ˜¯å®ä¾‹å¯¹è±¡ è¿™æ ·çš„è¯è¿”å›äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°ç‰¢ç‰¢çš„ç»‘å®šåˆ°äº†å®ä¾‹å¯¹è±¡ä¸Šï¼Œå¹¶ä¸éœ€è¦å»åŸå‹é“¾ä¸Šæ‰¾äº† å†çœ‹ç­‰å·å·¦ä¾§ï¼Œå°†è¿”å›çš„æ–°å‡½æ•°èµ‹å€¼ç»™äº† thisï¼Œè¿™ä¸ª this ä¹Ÿæ˜¯ Person å®ä¾‹å¯¹è±¡ï¼Œç”¨ç›¸åŒçš„æ–¹æ³•åæ¥æ”¶ä¸€ä¸‹ è¿™æ ·å°±å¯ä»¥ä½¿ç”¨äº† æˆ‘ä»¬è¿™æ ·å†å»çœ‹onClick={this.demo},è¿™ä¸‹å†ç‚¹å‡»åæ‰§è¡Œçš„å°±æ˜¯å®ä¾‹è‡ªèº«ä¸Šçš„ demo æ–¹æ³•äº†ã€‚ 2021-12-25 æ›´æ–°â€”â€” React17 å¯¹æ¯”æ–°æ—§ç”Ÿå‘½å‘¨æœŸæ–°çš„ç”Ÿå‘½å‘¨æœŸå’Œæ—§çš„ç”Ÿå‘½å‘¨æœŸç›¸æ¯”ï¼Œå³å°†åºŸå¼ƒä¸‰ä¸ªé’©å­ï¼šcomponentWillMountã€componentWillUpdateã€componentWillReceiveProps æ–°å¢äº†ä¸¤ä¸ªæ–°çš„é’©å­ï¼šgetDerivedStateFromPropsã€getSnapshotBeforeUpdate å‰©ä¸‹çš„éƒ½å’Œä¹‹å‰çš„ä¸€æ ·çš„ 2021-12-16 æ›´æ–°â€”â€” React é…ç½®ä»£ç†å•ä¸ªä»£ç†å¯ä»¥ç›´æ¥åœ¨package.jsonæ–‡ä»¶ä¸­é…ç½®proxy å¤šä¸ªä»£ç†åˆ™éœ€è¦æ–°å»ºä¸€ä¸ªsetupProxy.jsæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š 1234567891011121314151617const proxy = require(&quot;http-proxy-middleware&quot;);module.exports = function (app) &#123; app.use( proxy(&quot;/api1&quot;, &#123; //é‡è§api1å‰ç¼€çš„è¯·æ±‚ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªä»£ç†é…ç½® target: &quot;http://localhost:5000&quot;, // è¯·æ±‚è½¬å‘ç»™è°ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨åœ°å€ changeOrigin: true, // æ§åˆ¶æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­Hostçš„å€¼ï¼Œè¿™é‡Œæ˜¯localhost:5000 pathRewrite: &#123; &quot;^/api1&quot;: &quot;&quot; &#125;, // é‡å†™è¯·æ±‚è·¯å¾„ &#125;), proxy(&quot;/api2&quot;, &#123; target: &quot;http://localhost:5001&quot;, changeOrigin: true, pathRewrite: &#123; &quot;^/api2&quot;: &quot;&quot; &#125;, &#125;) );&#125;; create-react-appè„šæ‰‹æ¶ä¼šè‡ªåŠ¨æ‰¾åˆ°setupProxy.jsæ–‡ä»¶ï¼Œå¹¶å°†é…ç½®åŠ å…¥åˆ° webpack ä¸­ 2021-12-27 æ›´æ–°â€”â€” React è·¯ç”±åŸç†é çš„æ˜¯ H5 æ¨å‡ºçš„ history ä¸Šçš„ API 12345678910111213141516171819202122232425//è·¯ç”±è·³è½¬function push(path) &#123; history.push(path); return false;&#125;// è·¯ç”±æ›¿æ¢function replace(path) &#123; history.replace(path);&#125;// è·¯ç”±å›é€€function back() &#123; history.goBack();&#125;// è·¯ç”±å‰è¿›function forword() &#123; history.goForward();&#125;// ç›‘å¬è·¯ç”±å˜åŒ–history.listen((location) =&gt; &#123; console.log(&quot;ç›‘å¬è·¯ç”±å˜åŒ–&quot;);&#125;); 2021-12-28 æ›´æ–°â€”â€” å…¨å±€äº‹ä»¶æ€»çº¿ç”¨ç¬¬ä¸‰æ–¹åº“mittæˆ–è€…pubsubï¼Œå¯ä»¥å®ç°å¤šå±‚çº§çš„ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ 2021-12-30 æ›´æ–°â€”â€” React çš„ setState()å¼‚æ­¥æ‰§è¡Œ å¤šä¸ª setState()ä¼šæ¨åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ï¼Œå°†å¤šæ¬¡æ‰§è¡Œåˆå¹¶ä¸ºä¸€ä¸ªæ¥æ‰§è¡Œã€‚ setState()çš„å‡ ç§å†™æ³• 1234567891011121314151617181920212223242526//å¸¸è§„å†™æ³•ï¼Œè¿™ç§å†™æ³•ä¼šå°†å¤šæ¬¡setState()æ–¹æ³•åˆå¹¶// counterçš„åˆå§‹å€¼ä¸º1this.setState(&#123; counter: this.state.counter + 1,&#125;);this.setState(&#123; counter: this.state.counter + 1,&#125;);this.setState(&#123; counter: this.state.counter + 1,&#125;);// counterçš„å€¼æ˜¯2// ----------------------------------------// è¿™ç§å†™æ³•å’Œä¸Šé¢æ‰§è¡Œç»“æœä¸åŒï¼ŒpreStateæ‹¿åˆ°çš„æ˜¯æœ€æ–°çš„è®¾ç½®åçš„å€¼ï¼ˆä¸Šä¸€ä¸ªsetStateè®¾ç½®çš„å€¼ï¼‰this.setState((preState) =&gt; (&#123; counter: preState.counter + 1,&#125;));this.setState((preState) =&gt; (&#123; counter: preState.counter + 1,&#125;));this.setState((preState) =&gt; (&#123; counter: preState.counter + 1,&#125;));// counterçš„å€¼æ˜¯4 setState()æ–¹æ³•é‡Œçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°èƒ½æ‹¿åˆ°è®¾ç½®ä¹‹åçš„å€¼ 2021-12-31 æ›´æ–°â€”â€” æ— å‰¯ä½œç”¨åœ¨ React é‡Œç»å¸¸çœ‹åˆ°æ— å‰¯ä½œç”¨è¿™ä¸ªè¯ï¼Œå®ƒè¡¨ç¤ºå®ƒåªå¯¹è‡ªèº«æœ‰å½±å“å¯¹è‡ªèº«ä»¥å¤–çš„æ— å½±å“ï¼Œæ‰€æœ‰çš„è¾“å‡ºéƒ½æ˜¯ç”±æˆ‘çš„è¾“å…¥æ¥å†³å®šçš„ã€‚ å‘ä¸€ä¸ªè¯·æ±‚ï¼Œè®¾ç½®äº† localstorageï¼Œå¯¹å¤–éƒ¨è¿›è¡Œäº†æ“ä½œè¿™éƒ½å«åšå‰¯ä½œç”¨ React ç”Ÿå‘½å‘¨æœŸ ç»„ä»¶åˆå§‹åŒ–é˜¶æ®µ initialization, æ¯”å¦‚ constructor ç»„ä»¶æŒ‚è½½é˜¶æ®µ mount componentWillMount ç»„ä»¶æŒ‚è½½åˆ° DOM å‰è°ƒç”¨,åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡, è¿™é‡Œå†™ setState ä¸ä¼šå¼•èµ·ç»„ä»¶é‡æ–°æ¸²æŸ“ render è¿”å›ä¸€ä¸ª react å…ƒç´ , react æ ¹æ®æ­¤å‡½æ•°çš„è¿”å›å€¼æ¸²æŸ“ DOM. ä¸èƒ½åœ¨è¿™é‡Œ setState componentDidMount ç»„ä»¶æŒ‚è½½åˆ° DOM åè°ƒç”¨, ä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ ç»„ä»¶çš„æ›´æ–°é˜¶æ®µ update componentWillReceiveProps(nextProps) è§¦å‘äº props å¼•èµ·çš„ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ shouldComponentUpdate(nextProps, nextState) æ¯”è¾ƒä¹‹å‰å’Œå½“å‰çš„ props state æ˜¯å¦æœ‰å˜åŒ– componentWillUpdate(nextProps, nextState) render æ–¹æ³•å‰æ‰§è¡Œ render componentDidUpdate(preProps, preState) ç»„ä»¶çš„å¸è½½é˜¶æ®µ unmount componentWillUnmount å¸è½½å‰è°ƒç”¨, åœ¨è¿™é‡Œå¯ä»¥æ¸…ç†ä¸€äº›å®šæ—¶å™¨ componentWillMount,componentWillReceiveProps,componentWillUnmountåœ¨ React17 ä¸å»ºè®®ä½¿ç”¨ï¼Œå³å°†è¢«åºŸå¼ƒ 2022-06-30 æ›´æ–° React çš„è™šæ‹Ÿ DOMåœ¨ Reactï¼Œæˆ‘ä»¬æ“ä½œçš„å…ƒç´ è¢«ç§°ä¸º React å…ƒç´ ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„åŸç”Ÿ DOM å…ƒç´ ã€‚ React é€šè¿‡è™šæ‹Ÿ DOMï¼Œå°† React å…ƒç´ å’ŒåŸç”Ÿ DOMï¼Œè¿›è¡Œæ˜ å°„ï¼Œè™½ç„¶æ“ä½œçš„æ˜¯ React å…ƒç´ ï¼Œä½†æ˜¯è¿™äº›æ“ä½œæœ€ç»ˆéƒ½ä¼šåœ¨çœŸå®çš„ DOM ä¸­ä½“ç°ã€‚ è™šæ‹Ÿ DOM çš„å¥½å¤„ï¼š é™ä½ api å¤æ‚åº¦ï¼ˆè¿œç¦»åŸç”Ÿçš„å¤æ‚çš„ dom æ“ä½œï¼‰ è§£å†³å…¼å®¹æ€§é—®é¢˜ æå‡æ€§èƒ½ï¼ˆå‡å°‘ DOM çš„ä¸å¿…è¦æ“ä½œï¼‰ æ¯å½“æˆ‘ä»¬è°ƒç”¨ root.render()æ—¶ï¼Œé¡µé¢å°±ä¼šå‘ç”Ÿé‡æ–°æ¸²æŸ“ React ä¼šé€šè¿‡ diffing ç®—æ³•ï¼Œå°†æ–°çš„å…ƒç´ å’Œæ—§çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒ é€šè¿‡æ¯”è¾ƒæ‰¾åˆ°å‘ç”Ÿå˜åŒ–çš„å…ƒç´ ï¼Œå¹¶ä¸”åªå¯¹å˜åŒ–çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œæ²¡æœ‰å‘ç”Ÿçš„å˜åŒ–ä¸äºˆå¤„ç†ã€‚ æ¯”è¾ƒä¸¤æ¬¡æ•°æ®æ—¶ï¼ŒReact ä¼šå…ˆæ¯”è¾ƒçˆ¶å…ƒç´ ï¼Œçˆ¶å…ƒç´ å¦‚æœä¸åŒï¼Œç›´æ¥æ‰€æœ‰å…ƒç´ å…¨éƒ¨æ›¿æ¢ã€‚çˆ¶å…ƒç´ ä¸€è‡´ï¼Œå†å»é€ä¸ªæ¯”è¾ƒå­å…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰å‘ç”Ÿå˜åŒ–çš„å…ƒç´ ä¸ºæ­¢ã€‚ åœ¨ JSX ä¸­æ˜¾ç¤ºæ•°ç»„æ—¶ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„ keyï¼Œå¦åˆ™æ§åˆ¶å°ä¼šæŠ¥è­¦å‘Šã€‚ é‡æ–°æ¸²æŸ“é¡µé¢æ—¶ï¼ŒReact ä¼šæŒ‰ç…§é¡ºåºä¾æ¬¡æ¯”è¾ƒå¯¹åº”çš„å…ƒç´ ï¼Œå½“æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨æ—¶å¦‚æœä¸æŒ‡å®š keyï¼ŒåŒæ ·ä¹Ÿä¼šæŒ‰ç…§é¡ºåºè¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœåˆ—è¡¨çš„é¡ºåºæ°¸è¿œä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸åŠ  key æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœåˆ—è¡¨çš„é¡ºåºä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ å°½é‡ç”¨å…ƒç´ çš„ id æ¥åš key ç”¨éå†çš„ ç´¢å¼• index æ¥åš keyï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œä»ç„¶ä¼šå…¨éƒ¨æ›´æ–° å½“å…ƒç´ çš„é¡ºåºä¸ä¼šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œç”¨ç´¢å¼• index åš keyï¼Œæ²¡æœ‰é—®é¢˜","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://zouhualu.github.io/tags/%E7%AC%94%E8%AE%B0/"},{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"}]},{"title":"JavaScriptçš„åŒæ­¥ä¸å¼‚æ­¥","slug":"JavaScriptçš„åŒæ­¥ä¸å¼‚æ­¥","date":"2021-12-14T07:10:10.000Z","updated":"2025-11-25T06:33:55.492Z","comments":true,"path":"20211214/JavaScriptçš„åŒæ­¥ä¸å¼‚æ­¥/","permalink":"https://zouhualu.github.io/20211214/JavaScript%E7%9A%84%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5/","excerpt":"","text":"æ›´è¯¦ç»†çš„å¯ä»¥ç‚¹è¿™é‡Œ å¼‚æ­¥JavaScriptå¼‚æ­¥æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„å¯¹è±¡æˆ–äº‹ä»¶ä¸åŒæ—¶å­˜åœ¨æˆ–å‘ç”Ÿï¼ˆæˆ–å¤šä¸ªç›¸å…³äº‹ç‰©çš„å‘ç”Ÿæ— éœ€ç­‰å¾…å…¶å‰ä¸€äº‹ç‰©çš„å®Œæˆï¼‰ åŒæ­¥JavaScriptå„æ–¹éƒ½å®æ—¶ï¼ˆæˆ–è€…å°½å¯èƒ½å®æ—¶ï¼‰åœ°æ”¶å–ï¼ˆè€Œä¸”å¿…è¦çš„è¯ä¹Ÿå¤„ç†æˆ–è€…å›å¤ï¼‰ä¿¡æ¯çš„å³æ—¶æ²Ÿé€šæ–¹å¼ï¼Œå³ä¸ºåŒæ­¥ã€‚ ç”µè¯å³ä¸ºä¸€ä¸ªæ—¥å¸¸çš„ä¾‹å­ï¼šäººä»¬éƒ½å€¾å‘äºåœ¨ä½¿ç”¨ç”µè¯æ—¶å³æ—¶åœ°ä½œå‡ºå›åº”ã€‚ è®¸å¤šç¨‹åºæŒ‡ä»¤ä¹Ÿæ˜¯å®æ—¶çš„ï¼šä¾‹å¦‚å½“è¾“å…¥ä¸€ä¸ªç®—å¼æ—¶ï¼Œé™¤éç¼–ç¨‹äººå‘˜æœ‰æ„ä¸ºæ­¢ï¼Œå¦åˆ™ç¯å¢ƒéƒ½ä¼šç«‹å³å°†ç»“æœåé¦ˆå›æ¥ã€‚ äº‹ä»¶é˜Ÿåˆ—åƒpromiseè¿™æ ·çš„å¼‚æ­¥æ“ä½œè¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œäº‹ä»¶é˜Ÿåˆ—åœ¨ä¸»çº¿ç¨‹å®Œæˆå¤„ç†åè¿è¡Œï¼Œè¿™æ ·å®ƒä»¬å°±ä¸ä¼šé˜»æ­¢åç»­JavaScriptä»£ç çš„è¿è¡Œã€‚æ’é˜Ÿæ“ä½œå°†å°½å¿«å®Œæˆï¼Œç„¶åå°†ç»“æœè¿”å›åˆ°JavaScriptç¯å¢ƒã€‚ Promises å¯¹æ¯” callbackspromisesä¸æ—§å¼callbacksæœ‰ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ã€‚å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿”å›çš„å¯¹è±¡ï¼Œæ‚¨å¯ä»¥å°†å›è°ƒå‡½æ•°é™„åŠ åˆ°è¯¥å¯¹è±¡ä¸Šï¼Œè€Œä¸å¿…å°†å›è°ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚ ç„¶è€Œï¼ŒPromiseæ˜¯ä¸“é—¨ä¸ºå¼‚æ­¥æ“ä½œè€Œè®¾è®¡çš„ï¼Œä¸æ—§å¼å›è°ƒç›¸æ¯”å…·æœ‰è®¸å¤šä¼˜ç‚¹: æ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªthen()æ“ä½œå°†å¤šä¸ªå¼‚æ­¥æ“ä½œé“¾æ¥åœ¨ä¸€èµ·ï¼Œå¹¶å°†å…¶ä¸­ä¸€ä¸ªæ“ä½œçš„ç»“æœä½œä¸ºè¾“å…¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ“ä½œã€‚è¿™ç§é“¾æ¥æ–¹å¼å¯¹å›è°ƒæ¥è¯´è¦éš¾å¾—å¤šï¼Œä¼šä½¿å›è°ƒä»¥æ··ä¹±çš„â€œæœ«æ—¥é‡‘å­—å¡”â€å‘Šç»ˆã€‚ (ä¹Ÿç§°ä¸ºå›è°ƒåœ°ç‹±)ã€‚ Promiseæ€»æ˜¯ä¸¥æ ¼æŒ‰ç…§å®ƒä»¬æ”¾ç½®åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­çš„é¡ºåºè°ƒç”¨ã€‚ é”™è¯¯å¤„ç†è¦å¥½å¾—å¤šâ€”â€”æ‰€æœ‰çš„é”™è¯¯éƒ½ç”±å—æœ«å°¾çš„ä¸€ä¸ª.catch()å—å¤„ç†ï¼Œè€Œä¸æ˜¯åœ¨â€œé‡‘å­—å¡”â€çš„æ¯ä¸€å±‚å•ç‹¬å¤„ç†ã€‚ å¼‚æ­¥ä»£ç çš„æœ¬è´¨è®©æˆ‘ä»¬ç ”ç©¶ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒè¿›ä¸€æ­¥è¯´æ˜äº†å¼‚æ­¥ä»£ç çš„æœ¬è´¨ï¼Œå±•ç¤ºäº†å½“æˆ‘ä»¬ä¸å®Œå…¨äº†è§£ä»£ç æ‰§è¡Œé¡ºåºä»¥åŠå°†å¼‚æ­¥ä»£ç è§†ä¸ºåŒæ­¥ä»£ç æ—¶å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ 12345678910111213141516console.log (&#x27;Starting&#x27;);let image;fetch(&#x27;coffee.jpg&#x27;).then((response) =&gt; &#123; console.log(&#x27;It worked :)&#x27;) return response.blob();&#125;).then((myBlob) =&gt; &#123; let objectURL = URL.createObjectURL(myBlob); image = document.createElement(&#x27;img&#x27;); image.src = objectURL; document.body.appendChild(image);&#125;).catch((error) =&gt; &#123; console.log(&#x27;There has been a problem with your fetch operation: &#x27; + error.message);&#125;);console.log (&#x27;All done!&#x27;); æµè§ˆå™¨å°†ä¼šæ‰§è¡Œä»£ç ï¼Œçœ‹è§ç¬¬ä¸€ä¸ªconsole.log() è¾“å‡ºStarting ï¼Œç„¶ååˆ›å»ºimageå˜é‡ã€‚ ç„¶åï¼Œå®ƒå°†ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œå¹¶å¼€å§‹æ‰§è¡Œfetch()å—ï¼Œä½†æ˜¯ï¼Œå› ä¸ºfetch()æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ²¡æœ‰é˜»å¡ï¼Œæ‰€ä»¥åœ¨promiseç›¸å…³ä»£ç ä¹‹åç¨‹åºç»§ç»­æ‰§è¡Œï¼Œä»è€Œåˆ°è¾¾æœ€åçš„console.log()è¯­å¥All done!å¹¶å°†å…¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ åªæœ‰å½“fetch() å—å®Œæˆè¿è¡Œè¿”å›ç»“æœç»™.then()ï¼Œæˆ‘ä»¬æ‰æœ€åçœ‹åˆ°ç¬¬äºŒä¸ªconsole.log()æ¶ˆæ¯ It worked ;)ã€‚æ‰€ä»¥ è¿™äº›æ¶ˆæ¯å¯èƒ½ä»¥å’Œä½ é¢„æœŸä¸åŒçš„é¡ºåºå‡ºç°ï¼š Starting All done! It worked :) å¦‚æœä½ æ„Ÿåˆ°ç–‘æƒ‘ï¼Œè€ƒè™‘ä¸‹é¢è¿™ä¸ªå°ä¾‹å­ï¼š 1234567console.log(&quot;registering click handler&quot;);button.addEventListener(&#x27;click&#x27;, () =&gt; &#123; console.log(&quot;get click&quot;);&#125;);console.log(&quot;all done&quot;); è¿™åœ¨è¡Œä¸ºä¸Šéå¸¸ç›¸ä¼¼â€”â€”ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªconsole.log()æ¶ˆæ¯å°†ç«‹å³æ˜¾ç¤ºï¼Œä½†æ˜¯ç¬¬äºŒä¸ªæ¶ˆæ¯å°†è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰äººå•å‡»é¼ æ ‡æŒ‰é’®ã€‚å‰é¢çš„ç¤ºä¾‹ä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œï¼Œåªæ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬äºŒä¸ªæ¶ˆæ¯åœ¨promiseé“¾ä¸Šè¢«é˜»å¡ï¼Œç›´åˆ°è·å–èµ„æºåå†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œè€Œä¸æ˜¯å•å‡»ã€‚ è¦æŸ¥çœ‹å®é™…æƒ…å†µï¼Œå¹¶å°†ç¬¬ä¸‰ä¸ªconsole.log()è°ƒç”¨æ›´æ”¹ä¸ºä»¥ä¸‹å‘½ä»¤ï¼š 1console.log (&#x27;All done! &#x27; + image.src + &#x27;displayed.&#x27;); æ­¤æ—¶æ§åˆ¶å°å°†ä¼šæŠ¥é”™ï¼Œè€Œä¸ä¼šæ˜¾ç¤ºç¬¬ä¸‰ä¸ª console.log çš„ä¿¡æ¯ï¼š 1TypeError: image is undefined; can&#x27;t access its &quot;src&quot; property è¿™æ˜¯å› ä¸ºï¼šæµè§ˆå™¨è¿è¡Œç¬¬ä¸‰ä¸ªconsole.log()çš„æ—¶å€™ï¼Œfetch() è¯­å¥å—è¿˜æ²¡æœ‰å®Œæˆï¼Œå› æ­¤imageè¿˜æ²¡æœ‰èµ‹å€¼ã€‚ å°ç»“JavaScriptæ˜¯ä¸€ç§åŒæ­¥çš„ã€é˜»å¡çš„ã€å•çº¿ç¨‹çš„è¯­è¨€ï¼Œåœ¨è¿™ç§è¯­è¨€ä¸­ï¼Œä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæ“ä½œã€‚ ä½†webæµè§ˆå™¨å®šä¹‰äº†å‡½æ•°å’ŒAPIï¼Œå…è®¸æˆ‘ä»¬å½“æŸäº›äº‹ä»¶å‘ç”Ÿæ—¶ä¸æ˜¯æŒ‰ç…§åŒæ­¥æ–¹å¼ï¼Œè€Œæ˜¯å¼‚æ­¥åœ°è°ƒç”¨å‡½æ•°(æ¯”å¦‚ï¼Œæ—¶é—´çš„æ¨ç§»ï¼Œç”¨æˆ·é€šè¿‡é¼ æ ‡çš„äº¤äº’ï¼Œæˆ–è€…è·å–ç½‘ç»œæ•°æ®)ã€‚ è¿™æ„å‘³ç€æ‚¨çš„ä»£ç å¯ä»¥åŒæ—¶åšå‡ ä»¶äº‹æƒ…ï¼Œè€Œä¸éœ€è¦åœæ­¢æˆ–é˜»å¡ä¸»çº¿ç¨‹ã€‚ å¼‚æ­¥è¿˜æ˜¯åŒæ­¥æ‰§è¡Œä»£ç ï¼Œå–å†³äºæˆ‘ä»¬è¦åšä»€ä¹ˆ åŒæ­¥-å¦‚æœæˆ‘ä»¬å¸Œæœ›äº‹æƒ…èƒ½å¤Ÿç«‹å³åŠ è½½å¹¶å‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œå½“å°†ä¸€äº›ç”¨æˆ·å®šä¹‰çš„æ ·å¼åº”ç”¨åˆ°ä¸€ä¸ªé¡µé¢æ—¶ï¼Œæ‚¨å¸Œæœ›è¿™äº›æ ·å¼èƒ½å¤Ÿå°½å¿«è¢«åº”ç”¨ã€‚ å¼‚æ­¥-å¦‚æœæˆ‘ä»¬æ­£åœ¨è¿è¡Œä¸€ä¸ªéœ€è¦æ—¶é—´çš„æ“ä½œï¼Œæ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“å¹¶ä½¿ç”¨ç»“æœå¡«å……æ¨¡æ¿ï¼Œé‚£ä¹ˆæœ€å¥½å°†è¯¥æ“ä½œä»ä¸»çº¿ç¨‹ä¸­ç§»å¼€ä½¿ç”¨å¼‚æ­¥å®Œæˆä»»åŠ¡ã€‚","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"äº‹ä»¶å¾ªç¯","slug":"äº‹ä»¶å¾ªç¯","permalink":"https://zouhualu.github.io/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","permalink":"https://zouhualu.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"git rebase ç”¨æ³•","slug":"git-rebase-ç”¨æ³•","date":"2021-12-02T09:16:28.000Z","updated":"2025-11-25T06:36:04.989Z","comments":true,"path":"20211202/git-rebase-ç”¨æ³•/","permalink":"https://zouhualu.github.io/20211202/git-rebase-%E7%94%A8%E6%B3%95/","excerpt":"","text":"å‚è€ƒè‡ªæ­¤æ–‡ç«  ä»¥å‰æäº¤ä»£ç ä¸€ç›´æ˜¯ç”¨å‘½ä»¤è¡Œæäº¤çš„ 123456// ä¸€æŠŠæ¢­git pullgit add .git commit -m &#x27;xxxxxx&#x27;git push åœ¨å¤šäººå¼€å‘é¡¹ç›®ä¸‹ï¼Œè¿™æ ·æäº¤çš„è¯ä¼šæœ‰å¦‚ä¸‹æ•ˆæœ: å½“å¾ˆå¤šäººéƒ½æŠŠè‡ªå·±çš„åˆ†æ”¯åˆåˆ°ä¸»åˆ†æ”¯çš„æ—¶å€™ï¼Œè¿™æ ·ä¼šæ˜¾å¾—ä¸»çº¿å¾ˆä¹±è€Œä¸”è¿˜ä¼šæœ‰è‡ªåŠ¨ç”Ÿæˆçš„æäº¤ä¿¡æ¯ æ‰€ä»¥æå€¡ç”¨git rebase ä½¿ç”¨ rebase å’Œ merge çš„åŸºæœ¬åŸåˆ™ ä¸‹æ¸¸åˆ†æ”¯æ›´æ–°ä¸Šæ¸¸åˆ†æ”¯å†…å®¹çš„æ—¶å€™ä½¿ç”¨ rebase ä¸Šæ¸¸åˆ†æ”¯åˆå¹¶ä¸‹æ¸¸åˆ†æ”¯å†…å®¹çš„æ—¶å€™ä½¿ç”¨ merge æ›´æ–°å½“å‰åˆ†æ”¯çš„å†…å®¹æ—¶ä¸€å®šè¦ä½¿ç”¨ â€“rebase å‚æ•° ä¾‹å¦‚ç°æœ‰ä¸Šæ¸¸åˆ†æ”¯ masterï¼ŒåŸºäº master åˆ†æ”¯æ‹‰å‡ºæ¥ä¸€ä¸ªå¼€å‘åˆ†æ”¯ devï¼Œåœ¨ dev ä¸Šå¼€å‘äº†ä¸€æ®µæ—¶é—´åè¦æŠŠ master åˆ†æ”¯æäº¤çš„æ–°å†…å®¹æ›´æ–°åˆ° dev åˆ†æ”¯ï¼Œæ­¤æ—¶åˆ‡æ¢åˆ° dev åˆ†æ”¯ï¼Œä½¿ç”¨ git rebase master ç­‰ dev åˆ†æ”¯å¼€å‘å®Œæˆäº†ä¹‹åï¼Œè¦åˆå¹¶åˆ°ä¸Šæ¸¸åˆ†æ”¯ master ä¸Šçš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œä½¿ç”¨ git merge dev å®é™…å¼€å‘ä¸­é‡åˆ°æ“ä½œå½“ä½ å’Œå…¶ä»–äººåœ¨åŒä¸€ä¸ªåˆ†æ”¯å¼€å‘æ—¶ï¼Œåœ¨ä½ æäº¤çš„æ—¶å€™å‘ç°æœ‰äººå·²ç»æäº¤äº†ä¸€äº›ä¸œè¥¿ä¸Šå»äº†ï¼Œä½ å¯ä»¥è¿™æ ·æ“ä½œï¼š git pull --rebase git push ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨vscodeä¸Šä¸‹è½½çš„gitæ’ä»¶æ¥æ“ä½œï¼š ç„¶åå†pushä¸Šå»ã€‚","categories":[{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://zouhualu.github.io/tags/Git/"},{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://zouhualu.github.io/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}]},{"title":"create-react-app æ­å»ºé¡¹ç›®è¸©å‘è®°å½•","slug":"create-react-app-æ­å»ºé¡¹ç›®è¸©å‘è®°å½•","date":"2021-11-29T11:44:25.000Z","updated":"2025-11-25T06:35:11.351Z","comments":true,"path":"20211129/create-react-app-æ­å»ºé¡¹ç›®è¸©å‘è®°å½•/","permalink":"https://zouhualu.github.io/20211129/create-react-app-%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ä¸­æ–‡è¯´æ˜æ­å»ºå‰ç«¯å¼€å‘ç¯å¢ƒç¬”è®°ç”±npx create-react-app articles_published_systemåˆ›å»ºçš„é¡¹ç›® åæ¥æ¼æ‰äº†typescriptæ”¯æŒï¼ŒåŸæœ¬å¯ä»¥ç”±å‘½ä»¤npx create-react-app articles_published_system --template typescriptå¯ä»¥ç›´æ¥åˆ›å»ºæ”¯æŒtsçš„åº”ç”¨ åç»­è¦å°†tsæ·»åŠ åˆ°å·²æœ‰é¡¹ç›®ä¸­ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤ï¼š npm install --save typescript @types/node @types/react @types/react-dom @types/jest é¡¹ç›®ä¸­é…ç½®sass: æ‰§è¡Œyarn add node-sassä¸‹è½½åŒ…ï¼ˆæŒ‰ç†è¯´æ‰§è¡Œnpm install node-sass --saveä¹Ÿåº”è¯¥æœ‰ç”¨ï¼Œä½†æ˜¯æˆ‘è¿™è¾¹æŠ¥é”™äº†ï¼‰ã€‚ æŠ¥é”™å¦‚ä¸‹ï¼š æˆ‘çš„vscodeå’Œnodeç‰ˆæœ¬éƒ½æ˜¯æœ€æ–°çš„ å»ºè®®å¤§å®¶ç”¨yarnæ¥å®‰è£…é¡¹ç›® å‘ç°å¯åŠ¨åsassä¼šæŠ¥é”™ è§£å†³åŠæ³•ï¼šsassæŒ‡å®šç‰ˆæœ¬ä¸º^1.43.5ï¼Œpostcss-pxtoremä¸º^5.1.1ï¼Œä¸è¦å®‰è£…node-sassäº† å‰ç«¯ç”Ÿæ€é…ç½®ä»ç„¶å¤æ‚ å°†æ ·å¼æ–‡ä»¶åç¼€æ”¹ä¸º.scsså¹¶åœ¨tsxæˆ–è€…jsæ–‡ä»¶ä¸­å¼•å…¥ï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨ç¼–è¯‘ã€‚ ä¸ºäº†å®ç°è‡ªé€‚åº”ï¼Œç»™é¡¹ç›®é…ç½®postcss-pxtorem æ‰§è¡Œyarn add lib-flexible postcss-pxtorem åœ¨åº”ç”¨å…¥å£å¼•å…¥import &#39;lib-flexible&#39; æ‰§è¡Œnpm run ejectå¯ä»¥æ‰“å¼€create-react-appåº”ç”¨çš„é…ç½®æ–‡ä»¶ åœ¨config/webpack.config.jsæ–‡ä»¶ä¸­é…ç½®postcssï¼Œä½ç½®åŠæ–¹æ³•å¦‚ä¸‹å›¾ï¼š UIåº“ä½¿ç”¨antdesign å®‰è£…antdï¼Œyarn add antd åœ¨App.css ä¸­å¯¼å…¥æ ·å¼@import &#39;~antd/dist/antd.css&#39;ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­å¼•å…¥ç›¸åº”çš„uiç»„ä»¶å°±å¯ä»¥ç”¨äº†ã€‚ å®Œ~","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"},{"name":"è„šæ‰‹æ¶","slug":"è„šæ‰‹æ¶","permalink":"https://zouhualu.github.io/tags/%E8%84%9A%E6%89%8B%E6%9E%B6/"},{"name":"è¸©å‘","slug":"è¸©å‘","permalink":"https://zouhualu.github.io/tags/%E8%B8%A9%E5%9D%91/"}]},{"title":"call,applyå’Œbind","slug":"call-applyå’Œbind","date":"2021-10-21T03:18:44.000Z","updated":"2025-11-25T06:33:53.051Z","comments":true,"path":"20211021/call-applyå’Œbind/","permalink":"https://zouhualu.github.io/20211021/call-apply%E5%92%8Cbind/","excerpt":"","text":"callï¼Œapplyå’Œbindéƒ½æ˜¯ç”¨æ¥æ”¹å˜thisçš„æŒ‡å‘ï¼Œä½†æ˜¯ä»–ä»¬åœ¨ä½¿ç”¨å’ŒåŠŸèƒ½ä¸Šå„æœ‰åŒºåˆ«ã€‚ call() æ–¹æ³•call() æ–¹æ³•çš„ä½œç”¨call() æ–¹æ³•çš„ä½œç”¨ï¼šå¯ä»¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ­¤åŒæ—¶ï¼Œå®ƒè¿˜å¯ä»¥æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚ call() æ–¹æ³•çš„å¦ä¸€ä¸ªåº”ç”¨ï¼šå¯ä»¥å®ç°ç»§æ‰¿ã€‚ä¹‹æ‰€ä»¥èƒ½å®ç°ç»§æ‰¿ï¼Œå…¶å®æ˜¯åˆ©ç”¨äº†ä¸Šé¢çš„ä½œç”¨ã€‚ è¯­æ³•1fn1.call(æƒ³è¦å°†thisæŒ‡å‘å“ªé‡Œ, å‡½æ•°å®å‚1, å‡½æ•°å®å‚2); å¤‡æ³¨ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå¦‚æœä¸éœ€è¦æ”¹å˜ this æŒ‡å‘ï¼Œåˆ™ä¼  nullã€‚ call() æ–¹æ³•ä¸¾ä¾‹ä¸¾ä¾‹ 1ã€é€šè¿‡ call() è°ƒç”¨å‡½æ•°ï¼š 1234567891011const obj1 = &#123; nickName: &#x27;èµ°èŠ±é¹¿&#x27;, age: 26,&#125;;function fn1() &#123; console.log(this); console.log(this.nickName);&#125;fn1.call(this); // thisçš„æŒ‡å‘å¹¶æ²¡æœ‰è¢«æ”¹å˜ï¼Œæ­¤æ—¶ç›¸å½“äº fn1(); ä¸Šæ–¹ä»£ç çš„æ‰“å°ç»“æœï¼š 12windowundefined ä¸Šé¢çš„ä»£ç ï¼Œè·Ÿæ™®é€šçš„å‡½æ•°è°ƒç”¨ fn1() æ²¡æœ‰åŒºåˆ«ã€‚ ä¸¾ä¾‹ 2ã€é€šè¿‡ call() æ”¹å˜ this æŒ‡å‘ï¼š 123456789101112var obj1 = &#123; nickName: &#x27;èµ°èŠ±é¹¿&#x27;, age: 26,&#125;;function fn1(a, b) &#123; console.log(this); console.log(this.nickName); console.log(a + b);&#125;fn1.call(obj1, 2, 4); // å…ˆå°† this æŒ‡å‘ obj1ï¼Œç„¶åæ‰§è¡Œ fn1() å‡½æ•° ä¸Šæ–¹ä»£ç çš„æ‰“å°ç»“æœï¼š 123obj1èµ°èŠ±é¹¿6 ä¸¾ä¾‹ 3ã€é€šè¿‡ call() å®ç°ç»§æ‰¿ï¼š 1234567891011121314// ç»™ Father å¢åŠ  name å’Œ age å±æ€§function Father(myName, myAge) &#123; this.name = myName; this.age = myAge;&#125;function Son(myName, myAge) &#123; // ã€ä¸‹é¢è¿™ä¸€è¡Œï¼Œé‡è¦ä»£ç ã€‘ // é€šè¿‡è¿™ä¸€æ­¥ï¼Œå°† father é‡Œé¢çš„ this ä¿®æ”¹ä¸º Son é‡Œé¢çš„ thisï¼›å¦å¤–ï¼Œç»™ Son åŠ ä¸Šç›¸åº”çš„å‚æ•°ï¼Œè®© Son è‡ªåŠ¨æ‹¥æœ‰ Father é‡Œçš„å±æ€§ã€‚æœ€ç»ˆå®ç°ç»§æ‰¿ Father.call(this, myName, myAge);&#125;const son1 = new Son(&#x27;èµ°èŠ±é¹¿&#x27;, 26);console.log(JSON.stringify(son1)); ä¸Šæ–¹ä»£ç ä¸­ï¼Œé€šè¿‡ call() æ–¹æ³•ï¼Œè®© Son ç»§æ‰¿äº† Father é‡Œé¢çš„ name å’Œ age å±æ€§ã€‚ æ‰“å°ç»“æœï¼š 1&#123;&quot;myName&quot;:&quot;èµ°èŠ±é¹¿&quot;,&quot;myAge&quot;:26&#125; apply() æ–¹æ³•apply() æ–¹æ³•çš„ä½œç”¨apply() æ–¹æ³•çš„ä½œç”¨ï¼šå¯ä»¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ­¤åŒæ—¶ï¼Œå®ƒè¿˜å¯ä»¥æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚è¿™ä¸€ç‚¹ï¼Œå’Œ call()ç±»ä¼¼ã€‚ apply() æ–¹æ³•çš„åº”ç”¨ï¼š ç”±äº apply()éœ€è¦ä¼ é€’æ•°ç»„ï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€äº›å·§å¦™åº”ç”¨ï¼Œç¨åçœ‹æ¥ä¸‹æ¥çš„åº”ç”¨ä¸¾ä¾‹å°±çŸ¥é“äº†ã€‚ è¯­æ³•1fn1.apply(æƒ³è¦å°†thisæŒ‡å‘å“ªé‡Œ, [å‡½æ•°å®å‚1, å‡½æ•°å®å‚2]); å¤‡æ³¨ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå¦‚æœä¸éœ€è¦æ”¹å˜ this æŒ‡å‘ï¼Œåˆ™ä¼  nullã€‚ åˆ°è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œ call() å’Œ apply() æ–¹æ³•çš„ä½œç”¨æ˜¯ç›¸åŒçš„ã€‚å”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œapply() é‡Œé¢ä¼ å…¥çš„å®å‚ï¼Œå¿…é¡»æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ç»´æ•°ç»„ï¼‰ã€‚ apply() æ–¹æ³•ä¸¾ä¾‹ä¸¾ä¾‹ã€é€šè¿‡ apply() æ”¹å˜ this æŒ‡å‘ï¼š 123456789101112var obj1 = &#123; nickName: &#x27;èµ°èŠ±é¹¿&#x27;, age: 26,&#125;;function fn1(a) &#123; console.log(this); console.log(this.nickName); console.log(a);&#125;fn1.apply(obj1, [&#x27;hello&#x27;]); // å…ˆå°† this æŒ‡å‘ obj1ï¼Œç„¶åæ‰§è¡Œ fn1() å‡½æ•° æ³¨æ„ï¼Œä¸Šæ–¹ä»£ç ä¸­ï¼Œcall() é‡Œé¢ä¼ å®å‚æ—¶ï¼Œéœ€è¦ä»¥æ•°ç»„çš„å½¢å¼ã€‚å³ä¾¿æ˜¯ä¼ ä¸€ä¸ªå®å‚ï¼Œä¹Ÿéœ€è¦ä¼ æ•°ç»„ã€‚ æ‰“å°ç»“æœï¼š 123obj1èµ°èŠ±é¹¿hello apply() æ–¹æ³•çš„å·§å¦™åº”ç”¨ï¼šæ±‚æ•°ç»„çš„æœ€å¤§å€¼æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæƒ³è¦æ±‚æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼çš„æ—¶å€™ï¼Œæ•°ç»„æœ¬èº«æ˜¯æ²¡æœ‰è‡ªå¸¦æ–¹æ³•çš„ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ è™½ç„¶æ•°ç»„é‡Œæ²¡æœ‰è·å–æœ€å¤§å€¼çš„æ–¹æ³•ï¼Œä½†æ˜¯æ•°å€¼é‡Œé¢æœ‰ Math.max(æ•°å­—1ï¼Œæ•°å­—2ï¼Œæ•°å­—3) æ–¹æ³•ï¼Œå¯ä»¥è·å–å¤šä¸ªæ•°å€¼ä¸­çš„æœ€å¤§å€¼ã€‚ å¦å¤–ï¼Œç”±äºapply() æ–¹æ³•åœ¨ä¼ é€’å®å‚æ—¶ï¼Œå¿…é¡»è¦ä»¥æ•°ç»„çš„å½¢å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ é€šè¿‡ Math.max() å’Œ apply() æ›²çº¿æ•‘å›½ã€‚ ä¸¾ä¾‹ï¼šæ±‚æ•°ç»„ä¸­å¤šä¸ªå…ƒç´ çš„æœ€å¤§å€¼ï¼š 12345678const arr1 = [3, 7, 10, 8];// ä¸‹é¢è¿™ä¸€è¡Œä»£ç çš„ç›®çš„ï¼Œæ— éœ€æ”¹å˜ this æŒ‡å‘ï¼Œæ‰€ä»¥ï¼šç¬¬ä¸€ä¸ªå‚æ•°å¡« nullï¼Œæˆ–è€…å¡« Mathï¼Œæˆ–è€…å¡« this éƒ½å¯ä»¥ã€‚ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸è®©å¡«nullã€‚const maxValue = Math.max.apply(Math, arr1); // æ±‚æ•°ç»„ arr1 ä¸­å…ƒç´ çš„æœ€å¤§å€¼console.log(maxValue);const minValue = Math.min.apply(Math, arr1); // æ±‚æ•°ç»„ arr1 ä¸­å…ƒç´ çš„æœ€å°å€¼console.log(minValue); æ‰“å°ç»“æœï¼š 12103 bind() æ–¹æ³•bind() æ–¹æ³•çš„ä½œç”¨bind() æ–¹æ³•ä¸ä¼šè°ƒç”¨å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚ æŠŠcall()ã€apply()ã€bind()è¿™ä¸‰ä¸ªæ–¹æ³•åšä¸€ä¸‹å¯¹æ¯”ï¼Œä½ ä¼šå‘ç°ï¼šå®é™…å¼€å‘ä¸­ï¼Œ bind()æ–¹æ³•ä½¿ç”¨å¾—æœ€ä¸ºé¢‘ç¹ã€‚å¦‚æœæœ‰äº›å‡½æ•°ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç«‹å³è°ƒç”¨ï¼Œä½†æ˜¯åˆæƒ³æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ï¼Œæ­¤æ—¶ç”¨ bind() æ˜¯æœ€ä¸ºåˆé€‚çš„ã€‚ è¯­æ³• 1æ–°å‡½æ•° = fn1.bind(æƒ³è¦å°†thisæŒ‡å‘å“ªé‡Œ, å‡½æ•°å®å‚1, å‡½æ•°å®å‚2); å‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåœ¨ fn1 å‡½æ•°è¿è¡Œæ—¶ï¼ŒæŒ‡å®š fn1 å‡½æ•°çš„this æŒ‡å‘ã€‚å¦‚æœä¸éœ€è¦æ”¹å˜ this æŒ‡å‘ï¼Œåˆ™ä¼  nullã€‚ å…¶ä»–å‚æ•°ï¼šfn1 å‡½æ•°çš„å®å‚ã€‚ è§£é‡Šï¼šå®ƒä¸ä¼šè°ƒç”¨ fn1 å‡½æ•°ï¼Œä½†ä¼šè¿”å› ç”±æŒ‡å®šthis å’ŒæŒ‡å®šå®å‚çš„åŸå‡½æ•°æ‹·è´ã€‚å¯ä»¥çœ‹å‡ºï¼Œ bind() æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ã€‚","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"æ‰‹å†™å®ç°","slug":"æ‰‹å†™å®ç°","permalink":"https://zouhualu.github.io/tags/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0/"},{"name":"thisç»‘å®š","slug":"thisç»‘å®š","permalink":"https://zouhualu.github.io/tags/this%E7%BB%91%E5%AE%9A/"}]},{"title":"Arrayæ•°ç»„çš„ä¸€äº›å‘ç°","slug":"Arrayæ•°ç»„çš„ä¸€äº›å‘ç°","date":"2021-10-20T05:49:22.000Z","updated":"2025-11-25T06:33:50.255Z","comments":true,"path":"20211020/Arrayæ•°ç»„çš„ä¸€äº›å‘ç°/","permalink":"https://zouhualu.github.io/20211020/Array%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%91%E7%8E%B0/","excerpt":"","text":"ä»Šå¤©å¯¹ä¸€äº›å…ƒç´ éƒ½æ˜¯çº¯æ•°å­—çš„æ•°ç»„åšforEachéå†æ“ä½œï¼Œå‘ç°æ— æ³•æ”¹å˜åŸæ•°ç»„ï¼ŒæŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™å‘ç°ï¼ŒforEachåªèƒ½å¤„ç†æ•°ç»„ä¸­çš„å¼•ç”¨ç±»å‹ï¼Œå…ƒç´ ä¸ºåŸºç¡€ç±»å‹çš„éœ€è¦å¦å¤–çš„å†™æ³•ã€‚å¦‚ä¸‹ï¼š 123456789101112131415161718192021let arr = [1, 2, 3, 4, 5]let arr1 = [1, 2, 3, 4, 5]let arr2 = [&#123;a:1,b:2&#125;]// å…ƒç´ ä¸ºåŸºç¡€ç±»å‹numberï¼ŒåŸæ•°ç»„ä¸å˜arr.forEach(item =&gt; &#123; item += 1&#125;)// è¿™ç§å†™æ³•å¯è¡Œarr1.forEach((item, index) =&gt; &#123; arr1[index] += 1&#125;)// å…ƒç´ ä¸ºå¼•ç”¨ç±»å‹çš„ï¼ŒåŸæ•°ç»„ä¼šæ”¹å˜arr2.forEach(item=&gt;&#123; item.a = 66&#125;)console.log(arr);console.log(arr1);console.log(arr2); è¿™ä¸»è¦æ˜¯å’Œè®¡ç®—æœºçš„å †æ ˆæœ‰å…³ã€‚åŸºç¡€ç±»å‹æ˜¯å­˜å‚¨åœ¨æ ˆä¸­ï¼ŒforEachä¸­å¾—åˆ°itemä¹Ÿæ˜¯å­˜å‚¨äºæ ˆä¸­ï¼Œæ‰€ä»¥å®ƒå°±å’Œæ•°ç»„ä¸­çš„å…ƒç´ æ¯«æ— å…³ç³»äº†ï¼›è€Œå¯¹è±¡æ˜¯å­˜å‚¨äºå †ä¸­ï¼Œéå†çš„æ—¶å€™itemè™½ç„¶åœ¨æ ˆä¸­ä½†æ˜¯å®ƒçš„æŒ‡é’ˆä¼šæŒ‡å‘å †ä¸­çš„ä½ç½®ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"æ•°ç»„","slug":"æ•°ç»„","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E7%BB%84/"}]},{"title":"JavaScriptäº‹ä»¶å¾ªç¯","slug":"JavaScriptäº‹ä»¶å¾ªç¯","date":"2021-10-14T03:17:45.000Z","updated":"2025-11-25T06:33:47.831Z","comments":true,"path":"20211014/JavaScriptäº‹ä»¶å¾ªç¯/","permalink":"https://zouhualu.github.io/20211014/JavaScript%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/","excerpt":"","text":"è¿™ä¸€ç¯‡è®²çš„ä¹Ÿç‰¹åˆ«æ¸…æ¥šï¼Œå»ºè®®çœ‹çœ‹ï¼šè¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶ ä¸€ã€æ˜¯ä»€ä¹ˆJavaScript åœ¨è®¾è®¡ä¹‹åˆä¾¿æ˜¯å•çº¿ç¨‹ï¼Œå³æŒ‡ç¨‹åºè¿è¡Œæ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å­˜åœ¨ï¼ŒåŒä¸€æ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Œè·ŸJavaScriptçš„åº”ç”¨åœºæ™¯æœ‰å…³ JavaScript åˆæœŸä½œä¸ºä¸€é—¨æµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼Œé€šå¸¸ç”¨äºæ“ä½œ DOM ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹è¿›è¡Œäº†åˆ é™¤ DOM ï¼Œå¦ä¸€ä¸ªæ·»åŠ  DOMï¼Œæ­¤æ—¶æµè§ˆå™¨è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ ä¸ºäº†è§£å†³å•çº¿ç¨‹è¿è¡Œé˜»å¡é—®é¢˜ï¼ŒJavaScriptç”¨åˆ°äº†è®¡ç®—æœºç³»ç»Ÿçš„ä¸€ç§è¿è¡Œæœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶å°±å«åšäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰åœ¨JavaScriptä¸­ï¼Œæ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†ä¸º åŒæ­¥ä»»åŠ¡ï¼šç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡ä¸€èˆ¬ä¼šç›´æ¥è¿›å…¥åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ å¼‚æ­¥ä»»åŠ¡ï¼šå¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ¯”å¦‚ajaxç½‘ç»œè¯·æ±‚ï¼ŒsetTimeoutå®šæ—¶å‡½æ•°ç­‰ åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ­¥ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå³ä¸»æ‰§è¡Œæ ˆï¼Œå¼‚æ­¥ä»»åŠ¡è¿›å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå»ä»»åŠ¡é˜Ÿåˆ—è¯»å–å¯¹åº”çš„ä»»åŠ¡ï¼Œæ¨å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ä¸Šè¿°è¿‡ç¨‹çš„ä¸æ–­é‡å¤å°±æ˜¯äº‹ä»¶å¾ªç¯ äºŒã€å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡å¦‚æœå°†ä»»åŠ¡åˆ’åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡å¹¶ä¸æ˜¯é‚£ä¹ˆçš„å‡†ç¡®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š 1234567891011121314console.log(1)setTimeout(()=&gt;&#123; console.log(2)&#125;, 0)new Promise((resolve, reject)=&gt;&#123; console.log(&#x27;new Promise&#x27;) resolve()&#125;).then(()=&gt;&#123; console.log(&#x27;then&#x27;)&#125;)console.log(3) å¦‚æœæŒ‰ç…§ä¸Šé¢æµç¨‹å›¾æ¥åˆ†æä»£ç ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢çš„æ‰§è¡Œæ­¥éª¤ï¼š console.log(1)ï¼ŒåŒæ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ setTimeout() ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ”¾åˆ° Event Tableï¼Œ0 æ¯«ç§’åconsole.log(2)å›è°ƒæ¨å…¥ Event Queue ä¸­ new Promise ï¼ŒåŒæ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹ç›´æ¥æ‰§è¡Œ .then ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ”¾åˆ° Event Table console.log(3)ï¼ŒåŒæ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œ æ‰€ä»¥æŒ‰ç…§åˆ†æï¼Œå®ƒçš„ç»“æœåº”è¯¥æ˜¯ 1 =&gt; &#39;new Promise&#39; =&gt; 3 =&gt; 2 =&gt; &#39;then&#39; ä½†æ˜¯å®é™…ç»“æœæ˜¯ï¼š1=&gt;&#39;new Promise&#39;=&gt; 3 =&gt; &#39;then&#39; =&gt; 2 å‡ºç°åˆ†æ­§çš„åŸå› åœ¨äºå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œäº‹ä»¶é˜Ÿåˆ—å…¶å®æ˜¯ä¸€ä¸ªâ€œå…ˆè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„ï¼Œæ’åœ¨å‰é¢çš„äº‹ä»¶ä¼šä¼˜å…ˆè¢«ä¸»çº¿ç¨‹è¯»å– ä¾‹å­ä¸­ setTimeoutå›è°ƒäº‹ä»¶æ˜¯å…ˆè¿›å…¥é˜Ÿåˆ—ä¸­çš„ï¼ŒæŒ‰ç†è¯´åº”è¯¥å…ˆäº .then ä¸­çš„æ‰§è¡Œï¼Œä½†æ˜¯ç»“æœå´ååç›¸å åŸå› åœ¨äºå¼‚æ­¥ä»»åŠ¡è¿˜å¯ä»¥ç»†åˆ†ä¸ºå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ å¾®ä»»åŠ¡ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ å¸¸è§çš„å¾®ä»»åŠ¡æœ‰ï¼š Promise.then MutaionObserver Object.observeï¼ˆå·²åºŸå¼ƒï¼›Proxy å¯¹è±¡æ›¿ä»£ï¼‰ process.nextTickï¼ˆNode.jsï¼‰ å®ä»»åŠ¡å®ä»»åŠ¡çš„æ—¶é—´ç²’åº¦æ¯”è¾ƒå¤§ï¼Œæ‰§è¡Œçš„æ—¶é—´é—´éš”æ˜¯ä¸èƒ½ç²¾ç¡®æ§åˆ¶çš„ï¼Œå¯¹ä¸€äº›é«˜å®æ—¶æ€§çš„éœ€æ±‚å°±ä¸å¤ªç¬¦åˆ å¸¸è§çš„å®ä»»åŠ¡æœ‰ï¼š script (å¯ä»¥ç†è§£ä¸ºå¤–å±‚åŒæ­¥ä»£ç ) setTimeout/setInterval UI rendering/UIäº‹ä»¶ postMessageã€MessageChannel setImmediateã€I/Oï¼ˆNode.jsï¼‰ è¿™æ—¶å€™ï¼Œäº‹ä»¶å¾ªç¯ï¼Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡çš„å…³ç³»å¦‚å›¾æ‰€ç¤º æŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼Œå®ƒçš„æ‰§è¡Œæœºåˆ¶æ˜¯ï¼š æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¦‚æœé‡åˆ°å¾®ä»»åŠ¡å°±å°†å®ƒæ”¾åˆ°å¾®ä»»åŠ¡çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œä¼šæŸ¥çœ‹å¾®ä»»åŠ¡çš„äº‹ä»¶é˜Ÿåˆ—ï¼Œç„¶åå°†é‡Œé¢çš„æ‰€æœ‰å¾®ä»»åŠ¡ä¾æ¬¡æ‰§è¡Œå®Œ å›åˆ°ä¸Šé¢çš„é¢˜ç›® 1234567891011console.log(1)setTimeout(()=&gt;&#123; console.log(2)&#125;, 0)new Promise((resolve, reject)=&gt;&#123; console.log(&#x27;new Promise&#x27;) resolve()&#125;).then(()=&gt;&#123; console.log(&#x27;then&#x27;)&#125;)console.log(3) æµç¨‹å¦‚ä¸‹ 1234567// é‡åˆ° console.log(1) ï¼Œç›´æ¥æ‰“å° 1// é‡åˆ°å®šæ—¶å™¨ï¼Œå±äºæ–°çš„å®ä»»åŠ¡ï¼Œç•™ç€åé¢æ‰§è¡Œ// é‡åˆ° new Promiseï¼Œè¿™ä¸ªæ˜¯ç›´æ¥æ‰§è¡Œçš„ï¼Œæ‰“å° &#x27;new Promise&#x27;// .then å±äºå¾®ä»»åŠ¡ï¼Œæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåé¢å†æ‰§è¡Œ// é‡åˆ° console.log(3) ç›´æ¥æ‰“å° 3// å¥½äº†æœ¬è½®å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç°åœ¨å»å¾®ä»»åŠ¡åˆ—è¡¨æŸ¥çœ‹æ˜¯å¦æœ‰å¾®ä»»åŠ¡ï¼Œå‘ç° .then çš„å›è°ƒï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å° &#x27;then&#x27;// å½“ä¸€æ¬¡å®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œå†å»æ‰§è¡Œæ–°çš„å®ä»»åŠ¡ï¼Œè¿™é‡Œå°±å‰©ä¸€ä¸ªå®šæ—¶å™¨çš„å®ä»»åŠ¡äº†ï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å° 2 ä¸‰ã€asyncä¸awaitasync æ˜¯å¼‚æ­¥çš„æ„æ€ï¼Œawaitåˆ™å¯ä»¥ç†è§£ä¸ºç­‰å¾… æ”¾åˆ°ä¸€èµ·å¯ä»¥ç†è§£asyncå°±æ˜¯ç”¨æ¥å£°æ˜ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œè€Œ awaitæ˜¯ç”¨æ¥ç­‰å¾…å¼‚æ­¥æ–¹æ³•æ‰§è¡Œ asyncasyncå‡½æ•°è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œä¸‹é¢ä¸¤ç§æ–¹æ³•æ˜¯ç­‰æ•ˆçš„ 12345678function f() &#123; return Promise.resolve(&#x27;TEST&#x27;);&#125;// asyncF is equivalent to f!async function asyncF() &#123; return &#x27;TEST&#x27;;&#125; awaitæ­£å¸¸æƒ…å†µä¸‹ï¼Œawaitå‘½ä»¤åé¢æ˜¯ä¸€ä¸ª Promiseå¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡çš„ç»“æœã€‚å¦‚æœä¸æ˜¯ Promiseå¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼ 123456async function f()&#123; // ç­‰åŒäº // return 123 return await 123&#125;f().then(v =&gt; console.log(v)) // 123 ä¸ç®¡awaitåé¢è·Ÿç€çš„æ˜¯ä»€ä¹ˆï¼Œawaitéƒ½ä¼šé˜»å¡åé¢çš„ä»£ç  123456789101112async function fn1 ()&#123; console.log(1) await fn2() console.log(2) // é˜»å¡&#125;async function fn2 ()&#123; console.log(&#x27;fn2&#x27;)&#125;fn1()console.log(3) ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œawait ä¼šé˜»å¡ä¸‹é¢çš„ä»£ç ï¼ˆå³åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼Œå…ˆæ‰§è¡Œ asyncå¤–é¢çš„åŒæ­¥ä»£ç ï¼ŒåŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå†å›åˆ° async å‡½æ•°ä¸­ï¼Œå†æ‰§è¡Œä¹‹å‰é˜»å¡çš„ä»£ç  æ‰€ä»¥ä¸Šè¿°è¾“å‡ºç»“æœä¸ºï¼š1ï¼Œfn2ï¼Œ3ï¼Œ2 å››ã€æµç¨‹åˆ†æé€šè¿‡å¯¹ä¸Šé¢çš„äº†è§£ï¼Œæˆ‘ä»¬å¯¹JavaScriptå¯¹å„ç§åœºæ™¯çš„æ‰§è¡Œé¡ºåºæœ‰äº†å¤§è‡´çš„äº†è§£ è¿™é‡Œç›´æ¥ä¸Šä»£ç ï¼š 1234567891011121314151617181920async function async1() &#123; console.log(&#x27;async1 start&#x27;) await async2() console.log(&#x27;async1 end&#x27;)&#125;async function async2() &#123; console.log(&#x27;async2&#x27;)&#125;console.log(&#x27;script start&#x27;)setTimeout(function () &#123; console.log(&#x27;settimeout&#x27;)&#125;)async1()new Promise(function (resolve) &#123; console.log(&#x27;promise1&#x27;) resolve()&#125;).then(function () &#123; console.log(&#x27;promise2&#x27;)&#125;)console.log(&#x27;script end&#x27;) åˆ†æè¿‡ç¨‹ï¼š æ‰§è¡Œæ•´æ®µä»£ç ï¼Œé‡åˆ° console.log(&#39;script start&#39;) ç›´æ¥æ‰“å°ç»“æœï¼Œè¾“å‡º script start é‡åˆ°å®šæ—¶å™¨äº†ï¼Œå®ƒæ˜¯å®ä»»åŠ¡ï¼Œå…ˆæ”¾ç€ä¸æ‰§è¡Œ é‡åˆ° async1()ï¼Œæ‰§è¡Œ async1 å‡½æ•°ï¼Œå…ˆæ‰“å° async1 startï¼Œä¸‹é¢é‡åˆ°awaitæ€ä¹ˆåŠï¼Ÿå…ˆæ‰§è¡Œ async2ï¼Œæ‰“å° async2ï¼Œç„¶åé˜»å¡ä¸‹é¢ä»£ç ï¼ˆå³åŠ å…¥å¾®ä»»åŠ¡åˆ—è¡¨ï¼‰ï¼Œè·³å‡ºå»æ‰§è¡ŒåŒæ­¥ä»£ç  è·³åˆ° new Promise è¿™é‡Œï¼Œç›´æ¥æ‰§è¡Œï¼Œæ‰“å° promise1ï¼Œä¸‹é¢é‡åˆ° .then()ï¼Œå®ƒæ˜¯å¾®ä»»åŠ¡ï¼Œæ”¾åˆ°å¾®ä»»åŠ¡åˆ—è¡¨ç­‰å¾…æ‰§è¡Œ æœ€åä¸€è¡Œç›´æ¥æ‰“å° script endï¼Œç°åœ¨åŒæ­¥ä»£ç æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå³ awaitä¸‹é¢çš„ä»£ç ï¼Œæ‰“å° async1 end ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œå³æ‰§è¡Œ then çš„å›è°ƒï¼Œæ‰“å° promise2 ä¸Šä¸€ä¸ªå®ä»»åŠ¡æ‰€æœ‰äº‹éƒ½åšå®Œäº†ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°±æ˜¯å®šæ—¶å™¨ï¼Œæ‰“å° settimeout æ‰€ä»¥æœ€åçš„ç»“æœæ˜¯ï¼šscript startã€async1 startã€async2ã€promise1ã€script endã€async1 endã€promise2ã€settimeout","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"äº‹ä»¶å¾ªç¯","slug":"äº‹ä»¶å¾ªç¯","permalink":"https://zouhualu.github.io/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","permalink":"https://zouhualu.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"æ·±å…¥ç†è§£javascriptä¹‹typeofå’Œinstanceof","slug":"æ·±å…¥ç†è§£javascriptä¹‹typeofå’Œinstanceof","date":"2021-10-13T08:41:28.000Z","updated":"2025-11-25T06:33:45.136Z","comments":true,"path":"20211013/æ·±å…¥ç†è§£javascriptä¹‹typeofå’Œinstanceof/","permalink":"https://zouhualu.github.io/20211013/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript%E4%B9%8Btypeof%E5%92%8Cinstanceof/","excerpt":"","text":"typeoftypeofæ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥è¡¨ç¤ºæ•°æ®çš„ç±»å‹ã€‚ å„ä¸ªæ•°æ®ç±»å‹å¯¹åº”typeofçš„å€¼ï¼š æ•°æ®ç±»å‹ Type Undefined â€œundefinedâ€ Null â€œobjectâ€ Boolean â€œbooleanâ€ Number â€œnumberâ€ String â€œstringâ€ Symbol â€œsymbolâ€ å®¿ä¸»å¯¹è±¡(JSç¯å¢ƒæä¾›çš„ï¼Œæ¯”å¦‚æµè§ˆå™¨) Implementation-dependent å‡½æ•°å¯¹è±¡Function â€œfunctionâ€ ä»»ä½•å…¶ä»–å¯¹è±¡Object â€œobjectâ€ ä¸‹é¢æ˜¯ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344// Numberstypeof 37 === &#x27;number&#x27;;typeof 3.14 === &#x27;number&#x27;;typeof Math.LN2 === &#x27;number&#x27;;typeof Infinity === &#x27;number&#x27;;typeof NaN === &#x27;number&#x27;; // å°½ç®¡NaNæ˜¯&quot;Not-A-Number&quot;çš„ç¼©å†™,æ„æ€æ˜¯&quot;ä¸æ˜¯ä¸€ä¸ªæ•°å­—&quot;typeof Number(1) === &#x27;number&#x27;; // ä¸è¦è¿™æ ·ä½¿ç”¨!// Stringstypeof &quot;&quot; === &#x27;string&#x27;;typeof &quot;bla&quot; === &#x27;string&#x27;;typeof (typeof 1) === &#x27;string&#x27;; // typeofè¿”å›çš„è‚¯å®šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²typeof String(&quot;abc&quot;) === &#x27;string&#x27;; // ä¸è¦è¿™æ ·ä½¿ç”¨!// Booleanstypeof true === &#x27;boolean&#x27;;typeof false === &#x27;boolean&#x27;;typeof Boolean(true) === &#x27;boolean&#x27;; // ä¸è¦è¿™æ ·ä½¿ç”¨!// Symbolstypeof Symbol() === &#x27;symbol&#x27;;typeof Symbol(&#x27;foo&#x27;) === &#x27;symbol&#x27;;typeof Symbol.iterator === &#x27;symbol&#x27;;// Undefinedtypeof undefined === &#x27;undefined&#x27;;typeof blabla === &#x27;undefined&#x27;; // ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡,æˆ–è€…ä¸€ä¸ªå®šä¹‰äº†å´æœªèµ‹åˆå€¼çš„å˜é‡// Objectstypeof &#123;a:1&#125; === &#x27;object&#x27;;// ä½¿ç”¨Array.isArrayæˆ–è€…Object.prototype.toString.callæ–¹æ³•å¯ä»¥ä»åŸºæœ¬çš„å¯¹è±¡ä¸­åŒºåˆ†å‡ºæ•°ç»„ç±»å‹typeof [1, 2, 4] === &#x27;object&#x27;;typeof new Date() === &#x27;object&#x27;;// ä¸‹é¢çš„å®¹æ˜“ä»¤äººè¿·æƒ‘ï¼Œä¸è¦è¿™æ ·ä½¿ç”¨ï¼typeof new Boolean(true) === &#x27;object&#x27;;typeof new Number(1) ==== &#x27;object&#x27;;typeof new String(&quot;abc&quot;) === &#x27;object&#x27;;// å‡½æ•°typeof function()&#123;&#125; === &#x27;function&#x27;;typeof Math.sin === &#x27;function&#x27;; å‘ç°typeofæ¥åˆ¤æ–­æ•°æ®ç±»å‹å…¶å®å¹¶ä¸å‡†ç¡®ã€‚æ¯”å¦‚æ•°ç»„ã€æ­£åˆ™ã€æ—¥æœŸã€å¯¹è±¡hjçš„typeofè¿”å›å€¼éƒ½æ˜¯object instanceofinstanceofè¿ç®—ç¬¦å¯ä»¥ç”¨æ¥åˆ¤æ–­æŸä¸ªæ„é€ å‡½æ•°çš„prototypeå±æ€§æ˜¯å¦å­˜åœ¨äºå¦å¤–ä¸€ä¸ªè¦æ£€æµ‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚ 1234567891011121314151617181920212223242526// å®šä¹‰æ„é€ å‡½æ•°function C()&#123;&#125; function D()&#123;&#125; var o = new C();// trueï¼Œå› ä¸º Object.getPrototypeOf(o) === C.prototypeo instanceof C; // falseï¼Œå› ä¸º D.prototypeä¸åœ¨oçš„åŸå‹é“¾ä¸Šo instanceof D; o instanceof Object; // true,å› ä¸ºObject.prototype.isPrototypeOf(o)è¿”å›trueC.prototype instanceof Object // true,åŒä¸ŠC.prototype = &#123;&#125;;var o2 = new C();o2 instanceof C; // trueo instanceof C; // false,C.prototypeæŒ‡å‘äº†ä¸€ä¸ªç©ºå¯¹è±¡,è¿™ä¸ªç©ºå¯¹è±¡ä¸åœ¨oçš„åŸå‹é“¾ä¸Š.D.prototype = new C(); // ç»§æ‰¿var o3 = new D();o3 instanceof D; // trueo3 instanceof C; // true","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"ç±»å‹åˆ¤æ–­","slug":"ç±»å‹åˆ¤æ–­","permalink":"https://zouhualu.github.io/tags/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/"}]},{"title":"äº’è”ç½‘æ˜¯å¦‚ä½•è¿ä½œçš„","slug":"äº’è”ç½‘æ˜¯å¦‚ä½•è¿ä½œçš„","date":"2021-10-07T03:04:56.000Z","updated":"2025-11-25T06:36:35.730Z","comments":true,"path":"20211007/äº’è”ç½‘æ˜¯å¦‚ä½•è¿ä½œçš„/","permalink":"https://zouhualu.github.io/20211007/%E4%BA%92%E8%81%94%E7%BD%91%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%90%E4%BD%9C%E7%9A%84/","excerpt":"","text":"åŸæ–‡ï¼šäº’è”ç½‘æ˜¯å¦‚ä½•è¿ä½œçš„ ä»¥ä¸‹æ˜¯æˆ‘çš„æ€»ç»“,æ›´å¥½çš„å­¦ä¹ å»ºè®®é˜…è¯»åŸæ–‡ã€‚ ä»‹ç»äº’è”ç½‘æ‰€æœ‰çš„ä¼ è¾“éƒ½é€šè¿‡TCP/IPåè®®æ—æ¥ä¼ è¾“ï¼ŒTCP/IPæ˜¯é¢å‘è¿æ¥çš„å¯é å­—èŠ‚æµæœåŠ¡åè®® TCP/IPåè®®æ ˆæ‚¨çš„è®¡ç®—æœºå·²è¿æ¥åˆ° Internet å¹¶å…·æœ‰å”¯ä¸€çš„åœ°å€ã€‚å®ƒå¦‚ä½•ä¸è¿æ¥åˆ° Internet çš„å…¶ä»–è®¡ç®—æœºâ€œäº¤è°ˆâ€ï¼Ÿ è¿™é‡Œåº”è¯¥æœ‰ä¸€ä¸ªä¾‹å­ï¼šå‡è®¾æ‚¨çš„ IP åœ°å€æ˜¯ 1.2.3.4ï¼Œå¹¶ä¸”æ‚¨æƒ³å‘è®¡ç®—æœº 5.6.7.8 å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚æ‚¨è¦å‘é€çš„æ¶ˆæ¯æ˜¯â€œHello computer 5.6.7.8!â€ã€‚æ˜¾ç„¶ï¼Œæ¶ˆæ¯å¿…é¡»é€šè¿‡å°†æ‚¨çš„è®¡ç®—æœºè¿æ¥åˆ° Internet çš„ä»»ä½•ç±»å‹çš„çº¿è·¯ä¼ è¾“ã€‚å‡è®¾æ‚¨å·²ä»å®¶é‡Œæ‹¨å…¥æ‚¨çš„ ISPï¼Œå¹¶ä¸”æ¶ˆæ¯å¿…é¡»é€šè¿‡ç”µè¯çº¿ä¼ è¾“ã€‚å¿…é¡»å°†æ¶ˆæ¯ä»å­—æ¯æ–‡æœ¬ç¿»è¯‘æˆç”µå­ä¿¡å·ï¼Œé€šè¿‡äº’è”ç½‘ä¼ è¾“ï¼Œç„¶åå†ç¿»è¯‘å›å­—æ¯æ–‡æœ¬ã€‚ è¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿé€šè¿‡ä½¿ç”¨åè®®æ ˆã€‚æ¯å°è®¡ç®—æœºéƒ½éœ€è¦ä¸€å°åœ¨ Internet ä¸Šè¿›è¡Œé€šä¿¡ï¼Œå®ƒé€šå¸¸å†…ç½®äºè®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿï¼ˆå³ Windowsã€Unix ç­‰ï¼‰ä¸­ã€‚ç”±äºä½¿ç”¨äº†ä¸¤ç§ä¸»è¦çš„é€šä¿¡åè®®ï¼ŒInternet ä¸Šä½¿ç”¨çš„åè®®æ ˆè¢«ç§°ä¸º TCP/IP åè®®æ ˆã€‚TCP/IP å †æ ˆå¦‚ä¸‹æ‰€ç¤ºï¼š åº”ç”¨å±‚ï¼šæä¾›ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„åè®® HTTP FTP IMAP(é‚®ä»¶) ç½‘ç»œæ§åˆ¶å±‚(TCP)ï¼šå‘é€æ•°æ®åŒ…åˆ°è®¡ç®—æœºä¸Šä½¿ç”¨ç‰¹å®šçš„ç«¯å£å·çš„åº”ç”¨ç¨‹åº ç½‘ç»œå±‚(IP)ï¼šä½¿ç”¨IPåœ°å€å°†æ•°æ®åŒ…å‘é€åˆ°ç‰¹å®šçš„è®¡ç®— é“¾è·¯å±‚ï¼šå°†äºŒè¿›åˆ¶æ•°æ®åŒ…ä¸ç½‘ç»œä¿¡å·ç›¸äº’ä¹‹é—´è½¬æ¢ï¼ˆä¾‹å¦‚ä»¥å¤ªç½‘ç½‘å¡ã€ç”µè¯çº¿è°ƒåˆ¶è§£è°ƒå™¨ç­‰ï¼‰ HTTPHTTP æ˜¯ Web æµè§ˆå™¨å’Œ Web æœåŠ¡å™¨ç”¨äºé€šè¿‡ Internet ç›¸äº’é€šä¿¡çš„åè®®ã€‚å®ƒæ˜¯ä¸€ç§åº”ç”¨ç¨‹åºçº§åè®®ï¼Œå› ä¸ºå®ƒä½äºåè®®æ ˆä¸­ TCP å±‚çš„é¡¶éƒ¨ï¼Œå¹¶è¢«ç‰¹å®šåº”ç”¨ç¨‹åºç”¨äºç›¸äº’é€šä¿¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºæ˜¯ Web æµè§ˆå™¨å’Œ Web æœåŠ¡å™¨ã€‚ HTTPæ˜¯ä¸€ç§åŸºäºæ— è¿æ¥æ–‡æœ¬çš„åè®®ã€‚å®¢æˆ·ç«¯ï¼ˆWeb æµè§ˆå™¨ï¼‰å‘ Web æœåŠ¡å™¨å‘é€å¯¹ Web å…ƒç´ ï¼ˆä¾‹å¦‚ç½‘é¡µå’Œå›¾åƒï¼‰çš„è¯·æ±‚ã€‚è¯·æ±‚è¢«æœåŠ¡å™¨æœåŠ¡åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ Internet çš„è¿æ¥æ–­å¼€ã€‚å¿…é¡»ä¸ºæ¯ä¸ªè¯·æ±‚å»ºç«‹ä¸€ä¸ªæ–°è¿æ¥ã€‚å¤§å¤šæ•°åè®®éƒ½æ˜¯é¢å‘è¿æ¥çš„ã€‚è¿™æ„å‘³ç€ç›¸äº’é€šä¿¡çš„ä¸¤å°è®¡ç®—æœºé€šè¿‡ Internet ä¿æŒè¿æ¥æ‰“å¼€ã€‚ç„¶è€Œï¼ŒHTTP æ²¡æœ‰ã€‚åœ¨å®¢æˆ·ç«¯å‘å‡º HTTP è¯·æ±‚ä¹‹å‰ï¼Œå¿…é¡»å»ºç«‹åˆ°æœåŠ¡å™¨çš„æ–°è¿æ¥ã€‚ å½“æ‚¨åœ¨ Web æµè§ˆå™¨ä¸­é”®å…¥ URL æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š å¦‚æœ URL åŒ…å«åŸŸåï¼Œåˆ™æµè§ˆå™¨é¦–å…ˆè¿æ¥åˆ°åŸŸåæœåŠ¡å™¨å¹¶ä¸º Web æœåŠ¡å™¨æ£€ç´¢ç›¸åº”çš„ IP åœ°å€ã€‚ Web æµè§ˆå™¨è¿æ¥åˆ° Web æœåŠ¡å™¨å¹¶ä¸ºæ‰€éœ€çš„ç½‘é¡µå‘é€ HTTP è¯·æ±‚ï¼ˆé€šè¿‡åè®®æ ˆï¼‰ã€‚ Web æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶æ£€æŸ¥æ‰€éœ€é¡µé¢ã€‚å¦‚æœé¡µé¢å­˜åœ¨ï¼Œåˆ™ Web æœåŠ¡å™¨å‘é€å®ƒã€‚å¦‚æœæœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„é¡µé¢ï¼Œå®ƒå°†å‘é€ HTTP 404 é”™è¯¯æ¶ˆæ¯ã€‚ï¼ˆ404 çš„æ„æ€æ˜¯â€œæ‰¾ä¸åˆ°é¡µé¢â€ï¼Œä»»ä½•æµè§ˆè¿‡ç½‘ç»œçš„äººéƒ½å¯èƒ½çŸ¥é“ã€‚ï¼‰ Web æµè§ˆå™¨æ¥æ”¶å›é¡µé¢å¹¶å…³é—­è¿æ¥ã€‚ ç„¶åæµè§ˆå™¨è§£æé¡µé¢å¹¶æŸ¥æ‰¾å®Œæˆç½‘é¡µæ‰€éœ€çš„å…¶ä»–é¡µé¢å…ƒç´ ã€‚è¿™äº›é€šå¸¸åŒ…æ‹¬å›¾åƒã€å°ç¨‹åºç­‰ã€‚ å¯¹äºæ¯ä¸ªéœ€è¦çš„å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šä¸ºæ¯ä¸ªå…ƒç´ å‘æœåŠ¡å™¨å‘å‡ºé¢å¤–çš„è¿æ¥å’Œ HTTP è¯·æ±‚ã€‚ å½“æµè§ˆå™¨åŠ è½½å®Œæ‰€æœ‰å›¾åƒã€å°ç¨‹åºç­‰åï¼Œé¡µé¢å°†å®Œå…¨åŠ è½½åˆ°æµè§ˆå™¨çª—å£ä¸­ã€‚ TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰åœ¨åè®®æ ˆçš„åº”ç”¨å±‚ä¹‹ä¸‹æ˜¯TCPå±‚ã€‚å½“åº”ç”¨ç¨‹åºæ‰“å¼€ä¸ Internet ä¸Šå¦ä¸€å°è®¡ç®—æœºçš„è¿æ¥æ—¶ï¼Œå®ƒä»¬å‘é€çš„æ¶ˆæ¯ï¼ˆä½¿ç”¨ç‰¹å®šçš„åº”ç”¨ç¨‹åºå±‚åè®®ï¼‰ä¼šæ²¿å †æ ˆå‘ä¸‹ä¼ é€’åˆ° TCP å±‚ã€‚TCP è´Ÿè´£å°†åº”ç”¨ç¨‹åºåè®®è·¯ç”±åˆ°ç›®æ ‡è®¡ç®—æœºä¸Šçš„æ­£ç¡®åº”ç”¨ç¨‹åºã€‚ ä¸ºæ­¤ï¼Œä½¿ç”¨ç«¯å£å·ã€‚ç«¯å£å¯ä»¥â€‹â€‹è¢«è®¤ä¸ºæ˜¯æ¯å°è®¡ç®—æœºä¸Šçš„ç‹¬ç«‹é€šé“ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨é˜…è¯»ç”µå­é‚®ä»¶æ—¶ä¸Šç½‘ã€‚è¿™æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼ˆWeb æµè§ˆå™¨å’Œé‚®ä»¶å®¢æˆ·ç«¯ï¼‰ä½¿ç”¨äº†ä¸åŒçš„ç«¯å£å·ã€‚å½“æ•°æ®åŒ…åˆ°è¾¾è®¡ç®—æœºå¹¶æ²¿åè®®æ ˆå‘ä¸Šæ—¶ï¼ŒTCP å±‚æ ¹æ®ç«¯å£å·å†³å®šå“ªä¸ªåº”ç”¨ç¨‹åºæ¥æ”¶æ•°æ®åŒ…ã€‚TCP æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š å½“ TCP å±‚ä»ä¸Šé¢æ¥æ”¶åˆ°åº”ç”¨å±‚åè®®æ•°æ®æ—¶ï¼Œå®ƒä¼šå°†å…¶åˆ†æ®µä¸ºå¯ç®¡ç†çš„â€œå—â€ï¼Œç„¶åå°†å¸¦æœ‰ç‰¹å®š TCP ä¿¡æ¯çš„ TCP æ ‡å¤´æ·»åŠ åˆ°æ¯ä¸ªâ€œå—â€ã€‚TCP å¤´ä¸­åŒ…å«çš„ä¿¡æ¯åŒ…æ‹¬æ•°æ®éœ€è¦å‘é€åˆ°çš„åº”ç”¨ç¨‹åºçš„ç«¯å£å·ã€‚ å½“ TCP å±‚æ¥æ”¶åˆ°æ¥è‡ªå…¶ä¸‹æ–¹ IP å±‚çš„æ•°æ®åŒ…æ—¶ï¼ŒTCP å±‚ä¼šä»æ•°æ®åŒ…ä¸­å‰¥ç¦» TCP å¤´æ•°æ®ï¼Œå¿…è¦æ—¶è¿›è¡Œä¸€äº›æ•°æ®é‡æ„ï¼Œç„¶åä½¿ç”¨ä» TCP è·å–çš„ç«¯å£å·å°†æ•°æ®å‘é€åˆ°æ­£ç¡®çš„åº”ç”¨ç¨‹åºæ ‡é¢˜ã€‚ è¿™å°±æ˜¯ TCP å°†é€šè¿‡åè®®æ ˆç§»åŠ¨çš„æ•°æ®è·¯ç”±åˆ°æ­£ç¡®åº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚ TCP ä¸æ˜¯æ–‡æœ¬åè®®ã€‚TCP æ˜¯é¢å‘è¿æ¥çš„ã€å¯é çš„å­—èŠ‚æµæœåŠ¡ã€‚é¢å‘è¿æ¥æ„å‘³ç€ä¸¤ä¸ªä½¿ç”¨ TCP çš„åº”ç”¨ç¨‹åºåœ¨äº¤æ¢æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºç«‹è¿æ¥ã€‚TCP æ˜¯å¯é çš„ï¼Œå› ä¸ºå¯¹äºæ”¶åˆ°çš„æ¯ä¸ªæ•°æ®åŒ…ï¼Œéƒ½ä¼šå‘å‘é€æ–¹å‘é€ç¡®è®¤ä»¥ç¡®è®¤äº¤ä»˜ã€‚TCP è¿˜åœ¨å…¶æ ‡å¤´ä¸­åŒ…å«ä¸€ä¸ªæ ¡éªŒå’Œï¼Œç”¨äºå¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œé”™è¯¯æ£€æŸ¥ã€‚tcpåœ¨å»ºç«‹è¿æ¥ä¼šè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œæ¯ä¸ªæ”¶åˆ°çš„æ•°æ®åŒ…éƒ½ä¼šå‘å‘é€æ–¹å‘é€ackç¡®è®¤ï¼Œå·²ç¡®ä¿å‘é€æˆåŠŸ IPï¼ˆäº’è”ç½‘åè®®ï¼‰ä¸ TCP ä¸åŒï¼ŒIP æ˜¯ä¸€ç§ä¸å¯é çš„æ— è¿æ¥åè®®ã€‚IP ä¸å…³å¿ƒæ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾ç›®çš„åœ°ã€‚IP ä¹Ÿä¸çŸ¥é“è¿æ¥å’Œç«¯å£å·ã€‚ IP çš„å·¥ä½œä¹Ÿæ˜¯å°†æ•°æ®åŒ…å‘é€å’Œè·¯ç”±åˆ°å…¶ä»–è®¡ç®—æœºã€‚IP æ•°æ®åŒ…æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼Œå¯èƒ½æ— åºåˆ°è¾¾æˆ–æ ¹æœ¬æ²¡æœ‰åˆ°è¾¾ã€‚TCP çš„å·¥ä½œæ˜¯ç¡®ä¿æ•°æ®åŒ…åˆ°è¾¾å¹¶ä»¥æ­£ç¡®çš„é¡ºåºã€‚IP ä¸ TCP çš„å”¯ä¸€å…±åŒç‚¹æ˜¯å®ƒæ¥æ”¶æ•°æ®å¹¶å°†å…¶è‡ªå·±çš„ IP æ ‡å¤´ä¿¡æ¯æ·»åŠ åˆ° TCP æ•°æ®ã€‚ IPæ˜¯ä¸å¯é çš„æ— è¿æ¥åè®®ï¼Œå®ƒå¹¶ä¸å…³å¿ƒæ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾ç›®çš„åœ°ï¼Œä¹Ÿä¸å…³ç³»è¿æ¥å’Œç«¯å£å·ï¼Œç›®çš„æ˜¯è¿æ¥åˆ°ç›®æ ‡IP Ipæ˜¯ä¸€ç§åè®® æœ‰ä¸¤ç§æ ‡å‡† IPv4 2^32æ¬¡æ–¹å’ŒIPv6 2^128 TCPä¼ è¾“çš„è´¨é‡å’Œé¡ºåºå½“æ•°æ®åŒ…è¿‡å¤§ï¼Œåœ¨ç½‘ç»œå±‚ä¼šè¿›è¡Œåˆ†åŒ…ï¼Œåˆ†åŒ…åä¼ è¾“çš„é“¾è·¯ä¸ä¸€æ ·ï¼Œåˆ°è¾¾çš„æ—¶é—´ä¸ä¸€æ ·ï¼ŒTCPä¼šæ ¹æ®æ•°æ®åŒ…ä¸Šæºå¸¦åºåˆ—å·æ¥è¿›è¡Œæ’åºé‡ç»„ï¼Œå¦‚æœå‘é€æ–¹åœ¨ä¸€ä¸ªç‰¹å®šæ—¶é—´å†…ï¼ˆä¹Ÿå°±æ˜¯é‡è¯•æ—¶é—´ï¼‰æ²¡æœ‰æ¥å—åˆ°æ¥æ”¶æ–¹çš„ackç¡®è®¤ï¼Œä¼šå†æ¬¡é‡æ–°å‘é€ #ç½‘ç»œä¼ è¾“ ä¸ªäººç”µè„‘ çŒ«ï¼ˆè°ƒåˆ¶è§£è°ƒå™¨ï¼‰ local ISP äº’è”ç½‘æœåŠ¡æä¾›å•† regional ISP ç»è¿‡å¤šä¸ªä¸»å¹²ç½‘ç»œ NSP ç½‘ç»œæœåŠ¡æä¾›å•† å¤§å‹ç½‘ç»œ å–å¸¦å®½ç»™ISP NAP æ¯ä¸ªNSPè¿æ¥åˆ°è‡³å°‘ä¸‰ä¸ªç½‘ç»œè®¿é—®ç‚¹ ISP NSP æ‰€æœ‰ç½‘ç»œæä¾›éƒ½æºå¸¦è·¯ç”±å™¨ï¼Œæ¯ä¸ªè·¯ç”±æœ‰å½“å‰å­ç½‘ç»œipçš„è·¯ç”±è¡¨ï¼Œå½“åº•å±‚å‘ä¸Šå±‚å‘é€æ•°æ®æ—¶å€™ï¼Œæ‰¾ä¸åˆ°ä¼šä¾æ¬¡å‘ä¸Šæ‰¾ï¼Œå¯èƒ½ç”±ä¸€ä¸ªä¸»å¹²ç½‘ç»œè·³åˆ°å¦å¤–ä¸€ä¸ªä¸»å¹²ç½‘ç»œã€‚ DNSæœåŠ¡å­˜åœ¨æ„ä¹‰æ˜¯IPåˆ«åï¼Œä¸è®©å…¬å¸ä¸¢å®¢æˆ·ï¼Œä¹Ÿå®¹æ˜“è®°ï¼ŒDNSæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå­˜å‚¨äº†åŸŸåå’ŒIPçš„å¯¹åº”å…³ç³»","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://zouhualu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","permalink":"https://zouhualu.github.io/tags/%E4%BA%92%E8%81%94%E7%BD%91/"}]},{"title":"æ—¥å¸¸-æœ€çˆ±çš„ç”µå½±","slug":"æµ®ç”Ÿä¸€æ—¥-æœ€çˆ±çš„ç”µå½±","date":"2021-09-25T10:07:53.000Z","updated":"2025-11-25T06:37:00.871Z","comments":true,"path":"20210925/æµ®ç”Ÿä¸€æ—¥-æœ€çˆ±çš„ç”µå½±/","permalink":"https://zouhualu.github.io/20210925/%E6%B5%AE%E7%94%9F%E4%B8%80%E6%97%A5-%E6%9C%80%E7%88%B1%E7%9A%84%E7%94%B5%E5%BD%B1/","excerpt":"","text":"ä»Šå¤©é‡æ¸©äº†ç”µå½±ã€Šç¬¬å…­æ„Ÿã€‹ï¼Œä¸€éƒ¨æŠ«ç€çµå¼‚å¤–çš®çš„å¿ƒçµæ²»æ„ˆç”µå½±ã€‚ æœ‰äº›ç”µå½±æ— è®ºç¬¬å‡ éçœ‹è¿˜æ˜¯è®©äººæ„ŸåŠ¨","categories":[{"name":"ç”Ÿæ´»éšç¬”","slug":"ç”Ÿæ´»éšç¬”","permalink":"https://zouhualu.github.io/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"https://zouhualu.github.io/tags/%E6%97%A5%E5%B8%B8/"},{"name":"ç”µå½±","slug":"ç”µå½±","permalink":"https://zouhualu.github.io/tags/%E7%94%B5%E5%BD%B1/"}]},{"title":"æ ˆä¸é˜Ÿåˆ—çš„ç†è§£ä»¥åŠåº”ç”¨åœºæ™¯","slug":"æ ˆä¸é˜Ÿåˆ—çš„ç†è§£ä»¥åŠåº”ç”¨åœºæ™¯","date":"2021-09-23T06:00:28.000Z","updated":"2025-11-25T06:36:27.954Z","comments":true,"path":"20210923/æ ˆä¸é˜Ÿåˆ—çš„ç†è§£ä»¥åŠåº”ç”¨åœºæ™¯/","permalink":"https://zouhualu.github.io/20210923/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97%E7%9A%84%E7%90%86%E8%A7%A3%E4%BB%A5%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/","excerpt":"","text":"1.æ ˆæ ˆï¼ˆstackï¼‰åˆåå †æ ˆï¼Œå®ƒæ˜¯ä¸€ç§è¿ç®—å—é™çš„çº¿æ€§è¡¨ï¼Œé™å®šä»…åœ¨è¡¨å°¾è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚ è¡¨å°¾è¿™ä¸€ç«¯è¢«ç§°ä¸ºæ ˆé¡¶ï¼Œç›¸ååœ°å¦ä¸€ç«¯è¢«ç§°ä¸ºæ ˆåº•ï¼Œå‘æ ˆé¡¶æ’å…¥å…ƒç´ è¢«ç§°ä¸ºè¿›æ ˆã€å…¥æ ˆã€å‹æ ˆï¼Œä»æ ˆé¡¶åˆ é™¤å…ƒç´ åˆç§°ä½œå‡ºæ ˆ æ‰€ä»¥å…¶æŒ‰ç…§å…ˆè¿›åå‡ºçš„åŸåˆ™å­˜å‚¨æ•°æ®ï¼Œå…ˆè¿›å…¥çš„æ•°æ®è¢«å‹å…¥æ ˆåº•ï¼Œæœ€åçš„æ•°æ®åœ¨æ ˆé¡¶ï¼Œéœ€è¦è¯»æ•°æ®çš„æ—¶å€™ä»æ ˆé¡¶å¼€å§‹å¼¹å‡ºæ•°æ®ï¼Œå…·æœ‰è®°å¿†ä½œç”¨ å®ç°ä¸€ä¸ªæ ˆï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class Stack &#123; constructor() &#123; this.items = []; &#125; /** * æ·»åŠ ä¸€ä¸ªï¼ˆæˆ–å‡ ä¸ªï¼‰æ–°å…ƒç´ åˆ°æ ˆé¡¶ * @param &#123;*&#125; element æ–°å…ƒç´  */ push(element) &#123; this.items.push(element); &#125; /** * ç§»é™¤æ ˆé¡¶çš„å…ƒç´ ï¼ŒåŒæ—¶è¿”å›è¢«ç§»é™¤çš„å…ƒç´  */ pop() &#123; return this.items.pop(); &#125; /** * è¿”å›æ ˆé¡¶çš„å…ƒç´ ï¼Œä¸å¯¹æ ˆåšä»»ä½•ä¿®æ”¹ï¼ˆè¿™ä¸ªæ–¹æ³•ä¸ä¼šç§»é™¤æ ˆé¡¶çš„å…ƒç´ ï¼Œä»…ä»…è¿”å›å®ƒï¼‰ */ peek() &#123; return this.items[this.items.length - 1]; &#125; /** * å¦‚æœæ ˆé‡Œæ²¡æœ‰ä»»ä½•å…ƒç´ å°±è¿”å›true,å¦åˆ™è¿”å›false */ isEmpty() &#123; return this.items.length === 0; &#125; /** * ç§»é™¤æ ˆé‡Œçš„æ‰€æœ‰å…ƒç´  */ clear() &#123; this.items = []; &#125; /** * è¿”å›æ ˆé‡Œçš„å…ƒç´ ä¸ªæ•°ã€‚è¿™ä¸ªæ–¹æ³•å’Œæ•°ç»„çš„lengthå±æ€§å¾ˆç±»ä¼¼ */ size() &#123; return this.items.length; &#125;&#125; å…³äºæ ˆçš„æ“ä½œä¸»è¦çš„æ–¹æ³•å¦‚ä¸‹ï¼š pushï¼šå…¥æ ˆæ“ä½œ popï¼šå‡ºæ ˆæ“ä½œ äºŒ.é˜Ÿåˆ—è·Ÿæ ˆååˆ†ç›¸ä¼¼ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨è¡¨çš„å‰ç«¯ï¼ˆfrontï¼‰è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè€Œåœ¨è¡¨çš„åç«¯ï¼ˆrearï¼‰è¿›è¡Œæ’å…¥æ“ä½œã€‚ è¿›è¡Œæ’å…¥æ“ä½œçš„ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œè¿›è¡Œåˆ é™¤æ“ä½œçš„ç«¯ç§°ä¸ºé˜Ÿå¤´ï¼Œå½“é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œç§°ä¸ºç©ºé˜Ÿåˆ— åœ¨é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªé˜Ÿåˆ—å…ƒç´ ç§°ä¸ºå…¥é˜Ÿï¼Œä»é˜Ÿåˆ—ä¸­åˆ é™¤ä¸€ä¸ªé˜Ÿåˆ—å…ƒç´ ç§°ä¸ºå‡ºé˜Ÿã€‚å› ä¸ºé˜Ÿåˆ—åªå…è®¸åœ¨ä¸€ç«¯æ’å…¥ï¼Œåœ¨å¦ä¸€ç«¯åˆ é™¤ï¼Œæ‰€ä»¥åªæœ‰æœ€æ—©è¿›å…¥é˜Ÿåˆ—çš„å…ƒç´ æ‰èƒ½æœ€å…ˆä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œæ•…é˜Ÿåˆ—åˆç§°ä¸ºå…ˆè¿›å…ˆå‡º ç®€å•å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415class Queue &#123; constructor() &#123; this.list = []; this.frontIndex = 0; this.tailIndex = 0; &#125; enqueue(item) &#123; this.list[this.tailIndex++] = item; &#125; unqueue() &#123; const item = this.list[this.frontIndex]; this.frontIndex++; return item; &#125;&#125; ä¸‰.åº”ç”¨åœºæ™¯æ ˆå€ŸåŠ©æ ˆçš„å…ˆè¿›åå‡ºçš„ç‰¹æ€§ï¼Œå¯ä»¥ç®€å•å®ç°ä¸€ä¸ªé€†åºè¾“å‡ºçš„åŠŸèƒ½ï¼Œé¦–å…ˆæŠŠæ‰€æœ‰å…ƒç´ ä¾æ¬¡å…¥æ ˆï¼Œç„¶åæŠŠæ‰€æœ‰å…ƒç´ å‡ºæ ˆå¹¶è¾“å‡º åŒ…æ‹¬ç¼–è¯‘å™¨çš„åœ¨å¯¹è¾“å…¥çš„è¯­æ³•è¿›è¡Œåˆ†æçš„æ—¶å€™ï¼Œä¾‹å¦‚â€()â€ã€â€{}â€ã€â€[]â€è¿™äº›æˆå¯¹å‡ºç°çš„ç¬¦å·ï¼Œå€ŸåŠ©æ ˆçš„ç‰¹æ€§ï¼Œå‡¡æ˜¯é‡åˆ°æ‹¬å·çš„å‰åŠéƒ¨åˆ†ï¼Œå³æŠŠè¿™ä¸ªå…ƒç´ å…¥æ ˆï¼Œå‡¡æ˜¯é‡åˆ°æ‹¬å·çš„ååŠéƒ¨åˆ†å°±æ¯”å¯¹æ ˆé¡¶å…ƒç´ æ˜¯å¦è¯¥å…ƒç´ ç›¸åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™å‰åŠéƒ¨åˆ†å‡ºæ ˆï¼Œå¦åˆ™å°±æ˜¯åŒ¹é…å‡ºé”™ åŒ…æ‹¬å‡½æ•°è°ƒç”¨å’Œé€’å½’çš„æ—¶å€™ï¼Œæ¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œåº•å±‚éƒ½ä¼šè¿›è¡Œå…¥æ ˆæ“ä½œï¼Œå‡ºæ ˆåˆ™è¿”å›å‡½æ•°çš„è¿”å›å€¼ ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œå¯ä»¥æŠŠä¹’ä¹“çƒç›’æ¯”å–»æˆä¸€ä¸ªå †æ ˆï¼Œçƒä¸€ä¸ªä¸€ä¸ªæ”¾è¿›å»ï¼ˆå…¥æ ˆï¼‰ï¼Œæœ€å…ˆæ”¾è¿›å»çš„è¦ç­‰å…¶åé¢çš„å…¨éƒ¨æ‹¿å‡ºæ¥åæ‰èƒ½å‡ºæ¥ï¼ˆå‡ºæ ˆï¼‰ï¼Œè¿™ç§å°±æ˜¯å…¸å‹çš„å…ˆè¿›åå‡ºæ¨¡å‹ é˜Ÿåˆ—å½“æˆ‘ä»¬éœ€è¦æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ¥å¤„ç†æ•°æ®ï¼Œè€Œè¯¥æ•°æ®çš„æ•°æ®é‡åœ¨ä¸æ–­åœ°å˜åŒ–çš„æ—¶å€™ï¼Œåˆ™éœ€è¦é˜Ÿåˆ—æ¥å¸®åŠ©è§£é¢˜ é˜Ÿåˆ—çš„ä½¿ç”¨å¹¿æ³›åº”ç”¨åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œä¾‹å¦‚å±‚æ¬¡éå†ä¸€ä¸ªäºŒå‰æ ‘çš„èŠ‚ç‚¹å€¼ ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œæ’é˜Ÿä¹°ç¥¨ï¼Œæ’åœ¨é˜Ÿå¤´çš„æ°¸è¿œå…ˆå¤„ç†ï¼Œåé¢çš„å¿…é¡»ç­‰åˆ°å‰é¢çš„å…¨éƒ¨å¤„ç†å®Œæ¯•å†è¿›è¡Œå¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯å…¸å‹çš„å…ˆè¿›å…ˆå‡ºæ¨¡å‹ å‚è€ƒæ–‡çŒ® https://baike.baidu.com/item/%E6%A0%88/12808149 https://baike.baidu.com/item/%E9%98%9F%E5%88%97/14580481","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://zouhualu.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://zouhualu.github.io/tags/%E6%A0%88/"},{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","permalink":"https://zouhualu.github.io/tags/%E9%98%9F%E5%88%97/"}]},{"title":"Nodejsä¸­çš„äº‹ä»¶å¾ªç¯","slug":"Nodejsä¸­çš„äº‹ä»¶å¾ªç¯","date":"2021-09-20T07:24:01.000Z","updated":"2025-11-25T06:35:55.299Z","comments":true,"path":"20210920/Nodejsä¸­çš„äº‹ä»¶å¾ªç¯/","permalink":"https://zouhualu.github.io/20210920/Nodejs%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/","excerpt":"","text":"nodejs çš„æ‰§è¡Œåœºæ™¯å’Œjsçš„æ‰§è¡Œåœºæ™¯æ˜¯ä¸åŒçš„ï¼Œnodejs æ˜¯åœ¨æœåŠ¡ç«¯è¿è¡Œçš„ï¼Œè€Œ js æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ã€‚æ‰€ä»¥ä»–ä»¬çš„äº‹ä»¶å¾ªç¯ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ å„ä¸ªé˜¶æ®µ timers å®šæ—¶å™¨é˜¶æ®µ æ‰§è¡Œ setTimeout å’Œ setInterval ä¸­çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœæœ‰åˆ°æœŸçš„å®šæ—¶å™¨ï¼Œä»–ä»¬çš„å›è°ƒå‡½æ•°ä¼šåœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œ pending callbacks é˜¶æ®µ å¤„ç†ä¸€äº›ç³»ç»Ÿæ“ä½œçš„å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚ç›‘å¬ç«¯å£æ“ä½œçš„å›è°ƒå‡½æ•° idle, prepare é˜¶æ®µ å†…éƒ¨ä½¿ç”¨ï¼Œäº‹ä»¶å¾ªç¯çš„ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œä¸å¯¹ç”¨æˆ·å…¬å¼€ I/O poll è½®è¯¢é˜¶æ®µ æ–‡ä»¶è¯»å–æ“ä½œçš„å›è°ƒå‡½æ•° å¦‚æœ Poll é˜Ÿåˆ—ä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ä¼šæ£€æŸ¥æ˜¯å¦æœ‰å®šæ—¶å™¨åˆ°æœŸï¼Œå¦‚æœæœ‰ï¼Œåˆ™è·³è½¬åˆ° timers é˜¶æ®µ check æ£€æŸ¥é˜¶æ®µ æ‰§è¡Œ setImmediate ä¸­çš„å›è°ƒå‡½æ•° close å…³é—­é˜¶æ®µ å¤„ç†ä¸€äº›å…³é—­ä¸­çš„äº‹ä»¶ï¼Œå¦‚å…³é—­æ–‡ä»¶æè¿°ç¬¦ã€å…³é—­ç½‘ç»œè¿æ¥ç­‰ ç‰¹æ®Šé˜¶æ®µprocess.nextTickæ¯ä¸ªé˜¶æ®µç»“æŸåï¼Œäº‹ä»¶å¾ªç¯ä¼šæ£€æŸ¥æ˜¯å¦æœ‰ process.nextTick ä¸­çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœæœ‰ï¼Œä¼šå°†è¿™äº›å›è°ƒå‡½æ•°æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„å®ä»»åŠ¡é˜Ÿåˆ—ä¸­","categories":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zouhualu.github.io/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Node.js","slug":"Node-js","permalink":"https://zouhualu.github.io/tags/Node-js/"},{"name":"äº‹ä»¶å¾ªç¯","slug":"äº‹ä»¶å¾ªç¯","permalink":"https://zouhualu.github.io/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","permalink":"https://zouhualu.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"webè®¾è®¡æ¨¡å¼è§£æä¸å®æˆ˜ï¼ˆä¸€ï¼‰","slug":"webè®¾è®¡æ¨¡å¼è§£æä¸å®æˆ˜","date":"2021-09-12T05:31:57.000Z","updated":"2025-11-25T06:36:33.270Z","comments":true,"path":"20210912/webè®¾è®¡æ¨¡å¼è§£æä¸å®æˆ˜/","permalink":"https://zouhualu.github.io/20210912/web%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98/","excerpt":"","text":"è®¾è®¡æ¨¡å¼æœ‰åˆ©äº ç»„ç»‡æ¨¡å— è®¾è®¡æ²Ÿé€š ä»£ç è´¨é‡ äº”å¤§è®¾è®¡åŸåˆ™ï¼š å¼€é—­åŸåˆ™ï¼ˆOCPï¼šopen close principleï¼‰ å¼€-å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ å²—ä½èŒè´£å•ä¸€ï¼Œäº’ä¸é‡å  ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ ä¸Šå±‚ä¸åº”è¯¥ä¾èµ–ä¸‹å±‚å®ç° æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ å¤šä¸ªä¸“ä¸šçš„æ¥å£æ¯”å•ä¸ªèƒ–å€Ÿå£å¥½ç”¨ é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼šthe Lxxxx substitution principleï¼‰ å­ç±»èƒ½å¤Ÿè¦†ç›–çˆ¶ç±» çˆ¶ç±»èƒ½å¤Ÿå‡ºç°çš„åœ°æ–¹å­ç±»å°±èƒ½å‡ºç°","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://zouhualu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"}]},{"title":"TypeScriptä¸­å‡½æ•°çš„ç†è§£","slug":"TypeScriptä¸­å‡½æ•°çš„ç†è§£","date":"2021-09-10T08:55:32.000Z","updated":"2025-11-25T06:32:14.766Z","comments":true,"path":"20210910/TypeScriptä¸­å‡½æ•°çš„ç†è§£/","permalink":"https://zouhualu.github.io/20210910/TypeScript%E4%B8%AD%E5%87%BD%E6%95%B0%E7%9A%84%E7%90%86%E8%A7%A3/","excerpt":"","text":"ä½¿ç”¨æ–¹å¼å’ŒJavaScriptä½¿ç”¨æ–¹å¼ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡funcitonå…³é”®å­—ã€ç®­å¤´å‡½æ•°ç­‰å½¢å¼å»å®šä¹‰ï¼Œä¾‹å¦‚ä¸‹é¢ä¸€ä¸ªç®€å•çš„åŠ æ³•å‡½æ•°ï¼š 1const add = (a:number,b:number)=&gt; a+b ä¸Šè¿°åªå®šä¹‰äº†å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æ•´ä¸ªå‡½æ•°è™½ç„¶æ²¡æœ‰è¢«æ˜¾å¼å®šä¹‰ï¼Œä½†æ˜¯å®é™…ä¸ŠTypeScript ç¼–è¯‘å™¨æ˜¯èƒ½å¤Ÿé€šè¿‡ç±»å‹æ¨æ–­åˆ°è¿™ä¸ªå‡½æ•°çš„ç±»å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå½“é¼ æ ‡æ”¾ç½®åœ¨ç¬¬ä¸‰è¡Œ add å‡½æ•°åçš„æ—¶å€™ï¼Œä¼šå‡ºç°å®Œæ•´çš„å‡½æ•°å®šä¹‰ç±»å‹ï¼Œé€šè¿‡ : çš„å½¢å¼æ¥å®šä¹‰å‚æ•°ç±»å‹ï¼Œé€šè¿‡ =&gt; è¿æ¥å‚æ•°å’Œè¿”å›å€¼ç±»å‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¾å¼åœ°å†™ä¸Šè¿”å›ç±»å‹ï¼Œå¦‚ä¸‹ï¼š 1const add = (a:number,b:number):number=&gt; a+b å½“æˆ‘ä»¬æ²¡æœ‰æä¾›å‡½æ•°å®ç°çš„æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ç§å£°æ˜å‡½æ•°ç±»å‹çš„æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678// æ–¹å¼ä¸€type LongHand = &#123; (a: number): number;&#125;;// æ–¹å¼äºŒtype ShortHand = (a: number) =&gt; number; å½“å­˜åœ¨å‡½æ•°é‡è½½æ—¶ï¼Œåªèƒ½ä½¿ç”¨æ–¹å¼ä¸€çš„å½¢å¼ å¯é€‰å‚æ•°å½“å‡½æ•°çš„å‚æ•°å¯èƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼Œåªéœ€è¦åœ¨å‚æ•°åé¢åŠ ä¸Š ? ä»£è¡¨å‚æ•°å¯èƒ½ä¸å­˜åœ¨ï¼Œå¦‚ä¸‹ï¼š 1const add = (a: number, b?: number) =&gt; a + (b ? b : 0) è¿™æ—¶å€™å‚æ•°bå¯ä»¥æ˜¯numberç±»å‹æˆ–è€…undefinedç±»å‹ï¼Œå³å¯ä»¥ä¼ ä¸€ä¸ªnumberç±»å‹æˆ–è€…ä¸ä¼ éƒ½å¯ä»¥ å‰©ä½™ç±»å‹å‰©ä½™å‚æ•°ä¸JavaScriptçš„è¯­æ³•ç±»ä¼¼ï¼Œéœ€è¦ç”¨ ... æ¥è¡¨ç¤ºå‰©ä½™å‚æ•° å¦‚æœå‰©ä½™å‚æ•° rest æ˜¯ä¸€ä¸ªç”±numberç±»å‹ç»„æˆçš„æ•°ç»„ï¼Œåˆ™å¦‚ä¸‹è¡¨ç¤ºï¼š 1const add = (a: number, ...rest: number[]) =&gt; rest.reduce(((a, b) =&gt; a + b), a) å‡½æ•°é‡è½½å…è®¸åˆ›å»ºæ•°é¡¹åç§°ç›¸åŒä½†è¾“å…¥è¾“å‡ºç±»å‹æˆ–ä¸ªæ•°ä¸åŒçš„å­ç¨‹åºï¼Œå®ƒå¯ä»¥ç®€å•åœ°ç§°ä¸ºä¸€ä¸ªå•ç‹¬åŠŸèƒ½å¯ä»¥æ‰§è¡Œå¤šé¡¹ä»»åŠ¡çš„èƒ½åŠ› å…³äºtypescriptå‡½æ•°é‡è½½ï¼Œå¿…é¡»è¦æŠŠç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨å‰é¢ï¼Œæœ€åå‡½æ•°å®ç°æ—¶ï¼Œéœ€è¦ä½¿ç”¨ |æ“ä½œç¬¦æˆ–è€…?æ“ä½œç¬¦ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½çš„è¾“å…¥ç±»å‹å…¨éƒ¨åŒ…å«è¿›å»ï¼Œç”¨äºå…·ä½“å®ç° è¿™é‡Œçš„å‡½æ•°é‡è½½ä¹Ÿåªæ˜¯å¤šä¸ªå‡½æ•°çš„å£°æ˜ï¼Œå…·ä½“çš„é€»è¾‘è¿˜éœ€è¦è‡ªå·±å»å†™ï¼Œtypescriptå¹¶ä¸ä¼šçœŸçš„å°†ä½ çš„å¤šä¸ªé‡å functionçš„å‡½æ•°ä½“è¿›è¡Œåˆå¹¶ ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªaddå‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥æ”¶ stringç±»å‹çš„å‚æ•°è¿›è¡Œæ‹¼æ¥ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶ number ç±»å‹çš„å‚æ•°è¿›è¡Œç›¸åŠ ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314// ä¸Šè¾¹æ˜¯å£°æ˜function add (arg1: string, arg2: string): stringfunction add (arg1: number, arg2: number): number// å› ä¸ºæˆ‘ä»¬åœ¨ä¸‹è¾¹æœ‰å…·ä½“å‡½æ•°çš„å®ç°ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶ä¸éœ€è¦æ·»åŠ  declare å…³é”®å­—// ä¸‹è¾¹æ˜¯å®ç°function add (arg1: string | number, arg2: string | number) &#123; // åœ¨å®ç°ä¸Šæˆ‘ä»¬è¦æ³¨æ„ä¸¥æ ¼åˆ¤æ–­ä¸¤ä¸ªå‚æ•°çš„ç±»å‹æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸èƒ½ç®€å•çš„å†™ä¸€ä¸ª arg1 + arg2 if (typeof arg1 === &#x27;string&#x27; &amp;&amp; typeof arg2 === &#x27;string&#x27;) &#123; return arg1 + arg2 &#125; else if (typeof arg1 === &#x27;number&#x27; &amp;&amp; typeof arg2 === &#x27;number&#x27;) &#123; return arg1 + arg2 &#125;&#125; åŒºåˆ«ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼š ä»å®šä¹‰çš„æ–¹å¼è€Œè¨€ï¼Œtypescript å£°æ˜å‡½æ•°éœ€è¦å®šä¹‰å‚æ•°ç±»å‹æˆ–è€…å£°æ˜è¿”å›å€¼ç±»å‹ typescript åœ¨å‚æ•°ä¸­ï¼Œæ·»åŠ å¯é€‰å‚æ•°ä¾›ä½¿ç”¨è€…é€‰æ‹© typescript å¢æ·»å‡½æ•°é‡è½½åŠŸèƒ½ï¼Œä½¿ç”¨è€…åªéœ€è¦é€šè¿‡æŸ¥çœ‹å‡½æ•°å£°æ˜çš„æ–¹å¼ï¼Œå³å¯çŸ¥é“å‡½æ•°ä¼ é€’çš„å‚æ•°ä¸ªæ•°ä»¥åŠç±»å‹å‚è€ƒæ–‡ç«  https://www.tslang.cn/docs/handbook/functions.html https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD https://jkchao.github.io/typescript-book-chinese/typings/functions.html#%E9%87%8D%E8%BD%BD","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"https://zouhualu.github.io/tags/TypeScript/"},{"name":"å‡½æ•°","slug":"å‡½æ•°","permalink":"https://zouhualu.github.io/tags/%E5%87%BD%E6%95%B0/"}]},{"title":"Hi there!","slug":"about-me","date":"2021-09-07T03:19:02.000Z","updated":"2025-11-25T06:37:46.090Z","comments":true,"path":"20210907/about-me/","permalink":"https://zouhualu.github.io/20210907/about-me/","excerpt":"","text":"é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ æˆ‘çš„ github ä»“åº“ï¼šhttps://github.com/zouHuaLu","categories":[{"name":"ç”Ÿæ´»éšç¬”","slug":"ç”Ÿæ´»éšç¬”","permalink":"https://zouhualu.github.io/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"å…³äºæˆ‘","slug":"å…³äºæˆ‘","permalink":"https://zouhualu.github.io/tags/%E5%85%B3%E4%BA%8E%E6%88%91/"}]},{"title":"TypeScriptä¸­ç±»çš„ç†è§£","slug":"TypeScriptä¸­ç±»çš„ç†è§£","date":"2021-09-06T06:48:00.000Z","updated":"2025-11-25T06:32:02.348Z","comments":true,"path":"20210906/TypeScriptä¸­ç±»çš„ç†è§£/","permalink":"https://zouhualu.github.io/20210906/TypeScript%E4%B8%AD%E7%B1%BB%E7%9A%84%E7%90%86%E8%A7%A3/","excerpt":"","text":"ä¸€ã€æ˜¯ä»€ä¹ˆç±»ï¼ˆClassï¼‰æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆOOPï¼ŒObject-Oriented Programmingï¼‰å®ç°ä¿¡æ¯å°è£…çš„åŸºç¡€ âç±»æ˜¯ä¸€ç§ç”¨æˆ·å®šä¹‰çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ç±»ç±»å‹â ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€åŸºæœ¬éƒ½æ˜¯åŸºäºç±»çš„ï¼ŒJavaScript åŸºäºåŸå‹çš„æ–¹å¼è®©å¼€å‘è€…å¤šäº†å¾ˆå¤šç†è§£æˆæœ¬åœ¨ ES6 ä¹‹åï¼ŒJavaScript æ‹¥æœ‰äº† class å…³é”®å­—ï¼Œè™½ç„¶æœ¬è´¨ä¾ç„¶æ˜¯æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥å·²ç»æ–¹ä¾¿äº†è®¸å¤šä½†æ˜¯JavaScript çš„classä¾ç„¶æœ‰ä¸€äº›ç‰¹æ€§è¿˜æ²¡æœ‰åŠ å…¥ï¼Œæ¯”å¦‚ä¿®é¥°ç¬¦å’ŒæŠ½è±¡ç±»TypeScript çš„ class æ”¯æŒé¢å‘å¯¹è±¡çš„æ‰€æœ‰ç‰¹æ€§ï¼Œæ¯”å¦‚ ç±»ã€æ¥å£ç­‰ äºŒã€ä½¿ç”¨æ–¹å¼å®šä¹‰ç±»çš„å…³é”®å­—ä¸º classï¼Œåé¢ç´§è·Ÿç±»åï¼Œç±»å¯ä»¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ¨¡å—(ç±»çš„æ•°æ®æˆå‘˜)ï¼š ã€Œå­—æ®µã€ï¼šå­—æ®µæ˜¯ç±»é‡Œé¢å£°æ˜çš„å˜é‡ã€‚å­—æ®µè¡¨ç¤ºå¯¹è±¡çš„æœ‰å…³æ•°æ®ã€‚ ã€Œæ„é€ å‡½æ•°ã€ï¼šç±»å®ä¾‹åŒ–æ—¶è°ƒç”¨ï¼Œå¯ä»¥ä¸ºç±»çš„å¯¹è±¡åˆ†é…å†…å­˜ã€‚ ã€Œæ–¹æ³•ã€ï¼šæ–¹æ³•ä¸ºå¯¹è±¡è¦æ‰§è¡Œçš„æ“ä½œå¦‚ä¸‹ä¾‹å­ï¼š 123456789101112131415class Car &#123; // å­—æ®µ engine:string; // æ„é€ å‡½æ•° constructor(engine:string) &#123; this.engine = engine &#125; // æ–¹æ³• disp():void &#123; console.log(&quot;å‘åŠ¨æœºä¸º : &quot;+this.engine) &#125; &#125; ç»§æ‰¿ç±»çš„ç»§æ‰¿ä½¿ç”¨è¿‡extendsçš„å…³é”®å­— 1234567891011121314151617class Animal &#123; move(distanceInMeters: number = 0) &#123; console.log(`Animal moved $&#123;distanceInMeters&#125;m.`); &#125;&#125;class Dog extends Animal &#123; bark() &#123; console.log(&#x27;Woof! Woof!&#x27;); &#125;&#125;const dog = new Dog();dog.bark();dog.move(10);dog.bark(); Dogæ˜¯ä¸€ä¸ª æ´¾ç”Ÿç±»ï¼Œå®ƒæ´¾ç”Ÿè‡ª Animal åŸºç±»ï¼Œæ´¾ç”Ÿç±»é€šå¸¸è¢«ç§°ä½œå­ç±»ï¼ŒåŸºç±»é€šå¸¸è¢«ç§°ä½œ è¶…ç±»ã€‚ Dogç±»ç»§æ‰¿äº†Animalç±»ï¼Œå› æ­¤å®ä¾‹dogä¹Ÿèƒ½å¤Ÿä½¿ç”¨Animalç±»moveæ–¹æ³•ã€‚åŒæ ·ï¼Œç±»ç»§æ‰¿åï¼Œå­ç±»å¯ä»¥å¯¹çˆ¶ç±»çš„æ–¹æ³•é‡æ–°å®šä¹‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºæ–¹æ³•çš„é‡å†™ã€‚ é€šè¿‡superå…³é”®å­—æ˜¯å¯¹çˆ¶ç±»çš„ç›´æ¥å¼•ç”¨ï¼Œè¯¥å…³é”®å­—å¯ä»¥å¼•ç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 12345678910111213class PrinterClass &#123; doPrint():void &#123; console.log(&quot;çˆ¶ç±»çš„ doPrint() æ–¹æ³•ã€‚&quot;) &#125; &#125; class StringPrinter extends PrinterClass &#123; doPrint():void &#123; super.doPrint() // è°ƒç”¨çˆ¶ç±»çš„å‡½æ•° console.log(&quot;å­ç±»çš„ doPrint()æ–¹æ³•ã€‚&quot;) &#125; &#125; ä¿®é¥°ç¬¦å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°çš„å½¢å¼è·ŸES6ååˆ†çš„ç›¸ä¼¼ï¼Œtypescriptåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†ä¸‰ç§ä¿®é¥°ç¬¦ï¼š å…¬å…± publicï¼šå¯ä»¥è‡ªç”±çš„è®¿é—®ç±»ç¨‹åºé‡Œå®šä¹‰çš„æˆå‘˜ ç§æœ‰ privateï¼šåªèƒ½å¤Ÿåœ¨è¯¥ç±»çš„å†…éƒ¨è¿›è¡Œè®¿é—® å—ä¿æŠ¤ protectï¼šé™¤äº†åœ¨è¯¥ç±»çš„å†…éƒ¨å¯ä»¥è®¿é—®ï¼Œè¿˜å¯ä»¥åœ¨å­ç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—® ç§æœ‰ä¿®é¥°ç¬¦åªèƒ½å¤Ÿåœ¨è¯¥ç±»çš„å†…éƒ¨è¿›è¡Œè®¿é—®ï¼Œå®ä¾‹å¯¹è±¡å¹¶ä¸èƒ½å¤Ÿè®¿é—® 12345678class Father&#123; private name:String constructor(name:String)&#123; this.name = name &#125;&#125;const father = new Father(&#x27;zouHuaLu&#x27;)father.name //ä¼šæŠ¥é”™ï¼Œæç¤º &quot;å±æ€§nameä¸ºç§æœ‰å±æ€§ï¼Œåªèƒ½åœ¨Fatherç±»ä¸­è®¿é—®&quot; å¹¶ä¸”ç»§æ‰¿è¯¥ç±»çš„å­ç±»å¹¶ä¸èƒ½è®¿é—®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1234567891011class Father&#123; private name:String constructor(name:String)&#123; this.name = name &#125;&#125;class Son extends Father&#123; say()&#123; console.log(`my name is $&#123;this.name&#125;`) //ä¼šæŠ¥é”™ï¼Œæç¤º &quot;å±æ€§nameä¸ºç§æœ‰å±æ€§ï¼Œåªèƒ½åœ¨Fatherç±»ä¸­è®¿é—®&quot; &#125;&#125; å—ä¿æŠ¤ä¿®é¥°ç¬¦è·Ÿç§æœ‰ä¿®é¥°ç¬¦å¾ˆç›¸ä¼¼ï¼Œå®ä¾‹å¯¹è±¡åŒæ ·ä¸èƒ½è®¿é—®å—ä¿æŠ¤çš„å±æ€§ï¼Œå¦‚ä¸‹ï¼š 12345678class Father&#123; protected name:String constructor(name:String)&#123; this.name = name &#125;&#125;const father = new Father(&#x27;zouHuaLu&#x27;)father.name //ä¼šæŠ¥é”™ï¼Œæç¤º &quot;å±æ€§nameå—ä¿æŠ¤ï¼Œåªèƒ½åœ¨ç±»FatheråŠå…¶å­ç±»ä¸­è®¿é—®&quot; æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ protected æˆå‘˜åœ¨å­ç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—® 1234567891011class Father&#123; protected name:String constructor(name:String)&#123; this.name = name &#125;&#125;class Son extends Father&#123; say()&#123; console.log(`my name is $&#123;this.name&#125;`) &#125;&#125; åªè¯»ä¿®é¥°ç¬¦é€šè¿‡readonlyå…³é”®å­—è¿›è¡Œå£°æ˜ï¼Œåªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–ï¼Œå¦‚ä¸‹ï¼š 12345678class Father&#123; readonly name:String constructor(name:String)&#123; this.name = name &#125;&#125;const father = new Father(&#x27;zouHuaLu&#x27;)father.name //ä¼šæŠ¥é”™,æç¤º&quot;æ— æ³•åˆ†é…åˆ°nameï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§&quot; é™æ€å±æ€§è¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Šï¼Œé€šè¿‡staticè¿›è¡Œå®šä¹‰ï¼Œè®¿é—®è¿™äº›å±æ€§éœ€è¦é€šè¿‡ ç±»å‹.é™æ€å±æ€§ çš„è¿™ç§å½¢å¼è®¿é—®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345class Square &#123; static width = &#x27;100px&#x27;&#125;console.log(Square.width) // 100px æŠ½è±¡ç±»æŠ½è±¡ç±»åšä¸ºå…¶å®ƒæ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ï¼Œä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚abstractå…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456abstract class Animal &#123; abstract makeSound(): void; move(): void &#123; console.log(&#x27;roaming the earch...&#x27;); &#125;&#125; è¿™ç§ç±»å¹¶ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œé€šå¸¸éœ€è¦æˆ‘ä»¬åˆ›å»ºå­ç±»å»ç»§æ‰¿ï¼Œå¦‚ä¸‹ï¼š 1234567891011class Cat extends Animal &#123; makeSound() &#123; console.log(&#x27;miao miao&#x27;) &#125;&#125;const cat = new Cat()cat.makeSound() // miao miaocat.move() // roaming the earch... ä¸‰ã€åº”ç”¨åœºæ™¯é™¤äº†æ—¥å¸¸å€ŸåŠ©ç±»çš„ç‰¹æ€§å®Œæˆæ—¥å¸¸ä¸šåŠ¡ä»£ç ï¼Œè¿˜å¯ä»¥å°†ç±»ï¼ˆclassï¼‰ä¹Ÿå¯ä»¥ä½œä¸ºæ¥å£ï¼Œå°¤å…¶åœ¨React å·¥ç¨‹ä¸­æ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œå¦‚ä¸‹ï¼š 1export default class Carousel extends React.Component&lt;Props, State&gt; &#123;&#125; ç”±äºç»„ä»¶éœ€è¦ä¼ å…¥ props çš„ç±»å‹ Props ï¼ŒåŒæ—¶æœ‰éœ€è¦è®¾ç½®é»˜è®¤ props å³ defaultPropsï¼Œè¿™æ—¶å€™æ›´åŠ é€‚åˆä½¿ç”¨classä½œä¸ºæ¥å£ã€‚ å…ˆå£°æ˜ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»åŒ…å«ç»„ä»¶ props æ‰€éœ€çš„ç±»å‹å’Œåˆå§‹å€¼ï¼š 12345678910111213// propsçš„ç±»å‹export default class Props &#123; public children: Array&lt;React.ReactElement&lt;any&gt;&gt; | React.ReactElement&lt;any&gt; | never[] = [] public speed: number = 500 public height: number = 160 public animation: string = &#x27;easeInOutQuad&#x27; public isAuto: boolean = true public autoPlayInterval: number = 4500 public afterChange: () =&gt; &#123;&#125; public beforeChange: () =&gt; &#123;&#125; public selesctedColor: string public showDots: boolean = true&#125; å½“æˆ‘ä»¬éœ€è¦ä¼ å…¥ props ç±»å‹çš„æ—¶å€™ç›´æ¥å°† Props ä½œä¸ºæ¥å£ä¼ å…¥ï¼Œæ­¤æ—¶ Props çš„ä½œç”¨å°±æ˜¯æ¥å£ï¼Œè€Œå½“éœ€è¦æˆ‘ä»¬è®¾ç½®defaultPropsåˆå§‹å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦: 1public static defaultProps = new Props() Props çš„å®ä¾‹å°±æ˜¯ defaultProps çš„åˆå§‹å€¼ï¼Œè¿™å°±æ˜¯ classä½œä¸ºæ¥å£çš„å®é™…åº”ç”¨ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª class èµ·åˆ°äº†æ¥å£å’Œè®¾ç½®åˆå§‹å€¼ä¸¤ä¸ªä½œç”¨ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ï¼Œå‡å°‘äº†ä»£ç é‡ å‚è€ƒæ–‡ç«  https://www.tslang.cn/docs/handbook/classes.html https://www.runoob.com/typescript/ts-class.html","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"https://zouhualu.github.io/tags/TypeScript/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://zouhualu.github.io/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"}]},{"title":"exportä¸export defaultçš„åŒºåˆ«","slug":"exportä¸export-defaultçš„åŒºåˆ«","date":"2021-07-01T06:21:44.000Z","updated":"2025-11-25T06:33:36.915Z","comments":true,"path":"20210701/exportä¸export-defaultçš„åŒºåˆ«/","permalink":"https://zouhualu.github.io/20210701/export%E4%B8%8Eexport-default%E7%9A%84%E5%8C%BA%E5%88%AB/","excerpt":"","text":"nodeä¸­å¯¼å…¥æ¨¡å—ï¼švar åç§° = require(â€˜æ¨¡å—æ ‡è¯†ç¬¦â€™) nodeä¸­å‘å¤–æš´éœ²æˆå‘˜çš„å½¢å¼ï¼šmodule.exports = {} åœ¨ES6ä¸­ï¼Œä¹Ÿé€šè¿‡è§„èŒƒçš„å½¢å¼ï¼Œè§„å®šäº†ES6ä¸­å¦‚ä½•å¯¼å…¥å’Œå¯¼å‡ºæ¨¡å— ES6ä¸­å¯¼å…¥æ¨¡å—ï¼Œä½¿ç”¨ import æ¨¡å—åç§° from â€˜æ¨¡å—æ ‡è¯†ç¬¦â€™ import â€˜è¡¨ç¤ºè·¯å¾„â€™ import * from * æ˜¯ES6ä¸­å¯¼å…¥æ¨¡å—çš„æ–¹å¼ åœ¨ES6ä¸­ï¼Œä½¿ç”¨export default å’Œ export å‘å¤–æš´éœ²æˆå‘˜ä¾‹å¦‚ï¼š 12345// test.jsexport default &#123; name: &#x27;zs&#x27;, age: 20&#125; æˆ–æ˜¯ 123456// test.jsvar info = &#123; name: &#x27;zs&#x27;, age: 20&#125;export default info åœ¨main.jsä¸­æ¥æ”¶ï¼Œtest.jsä½¿ç”¨export default å‘å¤–æš´éœ²çš„æˆå‘˜ 12import person from &#x27;./test.js&#x27;console.log(person); æ³¨æ„ï¼š1ã€export default å‘å¤–æš´éœ²çš„æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„å˜é‡æ¥æ¥æ”¶ 2ã€åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œexport default åªå…è®¸å‘å¤–æš´éœ²ä¸€æ¬¡ 3ã€åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨export default å’Œexport å‘å¤–æš´éœ²æˆå‘˜ 4ã€ä½¿ç”¨exportå‘å¤–æš´éœ²çš„æˆå‘˜ï¼Œåªèƒ½ä½¿ç”¨{ }çš„å½¢å¼æ¥æ¥æ”¶ï¼Œè¿™ç§å½¢å¼ï¼Œå«åšã€æŒ‰éœ€å¯¼å‡ºã€‘ 5ã€exportå¯ä»¥å‘å¤–æš´éœ²å¤šä¸ªæˆå‘˜ï¼ŒåŒæ—¶ï¼Œå¦‚æœæŸäº›æˆå‘˜ï¼Œåœ¨importå¯¼å…¥æ—¶ï¼Œä¸éœ€è¦ï¼Œå¯ä»¥ä¸åœ¨{ }ä¸­å®šä¹‰ 6ã€ä½¿ç”¨exportå¯¼å‡ºçš„æˆå‘˜ï¼Œå¿…é¡»ä¸¥æ ¼æŒ‰ç…§å¯¼å‡ºæ—¶å€™çš„åç§°ï¼Œæ¥ä½¿ç”¨{ }æŒ‰éœ€æ¥æ”¶ 7ã€ä½¿ç”¨exportå¯¼å‡ºçš„æˆå‘˜ï¼Œå¦‚æœæƒ³æ¢ä¸ªå˜é‡åç§°æ¥æ”¶ï¼Œå¯ä»¥ä½¿ç”¨asæ¥èµ·åˆ«å ä¾‹å¦‚ï¼š 12345678910// test.jsvar info = &#123; name: &#x27;zs&#x27;, age: 20&#125;export default infoexport var title = &#x27;å°æ˜Ÿæ˜Ÿ&#x27;export var content = &#x27;å“ˆå“ˆå“ˆ&#x27; åœ¨main.jsä¸­æ¥æ”¶ï¼Œtest.jsä½¿ç”¨export default å’Œ export å‘å¤–æš´éœ²çš„æˆå‘˜ 123import person, &#123;title, content as content1&#125; from &#x27;./test.js&#x27;console.log(person);console.log(title + &#x27;=======&#x27; + content1);","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"https://zouhualu.github.io/tags/ES6/"},{"name":"æ¨¡å—åŒ–","slug":"æ¨¡å—åŒ–","permalink":"https://zouhualu.github.io/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/"}]},{"title":"newæ“ä½œç¬¦çš„å®ç°","slug":"newæ“ä½œç¬¦çš„å®ç°","date":"2021-06-18T21:23:44.000Z","updated":"2025-11-25T06:33:39.773Z","comments":true,"path":"20210619/newæ“ä½œç¬¦çš„å®ç°/","permalink":"https://zouhualu.github.io/20210619/new%E6%93%8D%E4%BD%9C%E7%AC%A6%E7%9A%84%E5%AE%9E%E7%8E%B0/","excerpt":"","text":"JavaScriptä¸­çš„newæ“ä½œç¬¦çš„åŸç†ä¾‹å­123456function Person (name, age) &#123; this.name = name this.age = age&#125;const person1 = new Person(&#x27;èµ°èŠ±è·¯çš„é•¿é¢ˆé¹¿&#x27;, 26)console.log(person1) //Person&#123;name:&#x27;èµ°èŠ±è·¯çš„é•¿é¢ˆé¹¿&#x27;,age:26&#125; å…ˆå®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•°Personï¼Œç„¶åé€šè¿‡newæ“ä½œç¬¦ç”ŸæˆPersonæ„é€ å‡½æ•°çš„ä¸€ä¸ªå®ä¾‹å¹¶å°†å…¶å¼•ç”¨èµ‹å€¼ç»™å˜é‡person1ã€‚ç„¶åæ§åˆ¶å°æ‰“å°å‡ºperson1çš„å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°è¯¥å®ä¾‹å¯¹è±¡å…·æœ‰nameå’Œageå±æ€§ï¼Œå®ƒä»¬çš„å€¼å°±æ˜¯æˆ‘ä»¬åœ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ä¼ å…¥çš„å€¼ã€‚ newå…³é”®å­—è¿›è¡Œçš„æ“ä½œ å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡obj={} å°†objçš„__proto__åŸå‹æŒ‡å‘æ„é€ å‡½æ•°Personçš„prototypeåŸå‹å¯¹è±¡ï¼Œå³obj.__proto__ = Person.prototype å°†æ„é€ å‡½æ•°Personå†…éƒ¨çš„thisæŒ‡å‘objï¼Œç„¶åæ‰§è¡Œæ„é€ å‡½æ•°Person()ï¼ˆä¹Ÿå°±æ˜¯è·Ÿè°ƒç”¨æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåªæ˜¯æ­¤æ—¶å‡½æ•°çš„thisä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡objè€Œå·²ï¼Œå°±å¥½åƒæ‰§è¡Œobj.Person()ä¸€æ ·ï¼‰ è‹¥æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›éåŸå§‹å€¼ï¼ˆå³ä¸æ˜¯å¼•ç”¨ç±»å‹çš„å€¼ï¼‰ï¼Œåˆ™è¿”å›è¯¥æ–°å»ºçš„å¯¹è±¡objï¼ˆé»˜è®¤ä¼šæ·»åŠ return thisï¼‰ã€‚å¦åˆ™ï¼Œè¿”å›å¼•ç”¨ç±»å‹çš„å€¼ã€‚ è‡ªå·±å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦1234567891011121314151617function myNew (constr, ...args) &#123; // 1,2 åˆ›å»ºä¸€ä¸ªå¯¹è±¡objï¼Œå°†objçš„__proto__å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ // å³å®ç°ï¼šobj.__proto__ === constructor.prototype var obj = Object.create(constr.prototype) // 3.å°†constrcå†…éƒ¨çš„thisï¼ˆå³æ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰æŒ‡å‘objï¼Œå¹¶æ‰§è¡Œ var result = constr.apply(obj, args) // 4\\. å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨æ„é€ å‡½æ•°æ‰§è¡Œçš„ç»“æœã€‚å¦åˆ™ï¼Œè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ return result instanceof Object ? result : obj&#125;// ä½¿ç”¨çš„ä¾‹å­ï¼šfunction Person(name, age)&#123; this.name = name; this.age = age;&#125;const person1 = myNew(Person, &#x27;Tom&#x27;, 20)console.log(person1) // Person &#123;name: &quot;Tom&quot;, age: 20&#125; å…³é”®ç‚¹ å°†æ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹é“¾è®¾ç½®æ­£ç¡®ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½ä½¿ç”¨åŸå‹é“¾ä¸Šçš„æ–¹æ³•ã€‚ å°†æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºæ„é€ å‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æ­£ç¡®åœ°è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚ 2021å¹´7æœˆ1æ—¥è¡¥å……çœ‹ä¸€ä¸ªä¾‹å­ 123456789101112function Player(color) &#123; this.color = color&#125;Player.prototype.start = function() &#123;&#125;const white = new Player(&#x27;white&#x27;)const black = new Player(&#x27;black&#x27;)console.log(black.__proto__) // start()console.log(Object.getPrototypeOf(black)) // start()console.log(Player.prototype) // start()console.log(Player.__proto__) // &#123;&#125; æ ¹æ®åæ¨å¯ä»¥å†™ä¸€ä¸‹æ€è·¯ ä¸€ä¸ªç»§æ‰¿è‡ªPlayer.prototypeçš„æ–°å¯¹è±¡ p1/p2è¢«åˆ›å»º p1.__proto__ === Player.prototypeï¼Œp1.__proto__æŒ‡å‘Player.prototype å°†thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡p1/p2 è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼š å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾ç¤ºçš„è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›this å¦‚æœæœ‰æ˜¾å¼çš„è¿”å›å€¼ï¼Œæ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆè¿˜æ˜¯è¿”å›this å¦‚æœæ„é€ å‡½æ•°æœ‰æ˜¾å¼çš„è¿”å›å€¼ï¼Œæ˜¯å¯¹è±¡ç±»å‹ï¼Œæ¯”å¦‚æ˜¯{a:1}ï¼Œé‚£ä¹ˆå°±è¿”å›{a:1}ç°åœ¨æˆ‘ä»¬å†æ¥å®ç°ä¸€ä¸ªnewæŒ‡ä»¤çš„åŠŸèƒ½12345678910111213function Player(name)&#123; this.name = name&#125;function objectFactory() &#123; let o = new Object() let FunctionConstructor = [].shift.call(arguments) o.__proto__ = FunctionConstructor.prototype let resultObj = FunctionConstructor.apply(o, arguments) return typeof resultObj === &#x27;object&#x27; ? resultObj : o&#125;const p1 = objectFactory(Player, &#x27;èŠ±é¹¿&#x27;)console.log(p1) // èŠ±é¹¿ å®Œ~","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"åŸç†è§£æ","slug":"åŸç†è§£æ","permalink":"https://zouhualu.github.io/tags/%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"},{"name":"æ‰‹å†™å®ç°","slug":"æ‰‹å†™å®ç°","permalink":"https://zouhualu.github.io/tags/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0/"}]},{"title":"åŸå‹ä¸åŸå‹é“¾ä¸constructor","slug":"åŸå‹ä¸åŸå‹é“¾ä¸constructor","date":"2021-06-18T07:16:53.000Z","updated":"2025-11-25T06:33:42.539Z","comments":true,"path":"20210618/åŸå‹ä¸åŸå‹é“¾ä¸constructor/","permalink":"https://zouhualu.github.io/20210618/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8Econstructor/","excerpt":"","text":"åŸå‹ä¸åŸå‹é“¾ä¸constructoræœ¬æ–‡å‚è€ƒè‡ªï¼šhttps://blog.csdn.net/cc18868876837/article/details/81211729 å…ˆæ¥ä¸ªæ€»ç»“ï¼š æˆ‘ä»¬éœ€è¦ç‰¢è®°ä¸¤ç‚¹ï¼šâ‘ __proto__å’Œconstructorå±æ€§æ˜¯å¯¹è±¡æ‰€ç‹¬æœ‰çš„ï¼›â‘¡ prototypeå±æ€§æ˜¯å‡½æ•°æ‰€ç‹¬æœ‰çš„ï¼Œå› ä¸ºå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæ‹¥æœ‰__proto__å’Œconstructorå±æ€§ã€‚ __proto__å±æ€§çš„ä½œç”¨å°±æ˜¯å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šå»å®ƒçš„__proto__å±æ€§æ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼ˆçˆ¶å¯¹è±¡ï¼‰é‡Œæ‰¾ï¼Œä¸€ç›´æ‰¾ï¼Œç›´åˆ°__proto__å±æ€§çš„ç»ˆç‚¹nullï¼Œå†å¾€ä¸Šæ‰¾å°±ç›¸å½“äºåœ¨nullä¸Šå–å€¼ï¼Œä¼šæŠ¥é”™ã€‚é€šè¿‡__proto__å±æ€§å°†å¯¹è±¡è¿æ¥èµ·æ¥çš„è¿™æ¡é“¾è·¯å³æˆ‘ä»¬æ‰€è°“çš„åŸå‹é“¾ã€‚ prototypeå±æ€§çš„ä½œç”¨å°±æ˜¯è®©è¯¥å‡½æ•°æ‰€å®ä¾‹åŒ–çš„å¯¹è±¡ä»¬éƒ½å¯ä»¥æ‰¾åˆ°å…¬ç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œå³f1.__proto__ === Foo.prototypeã€‚ constructorå±æ€§çš„å«ä¹‰å°±æ˜¯æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œæ‰€æœ‰å‡½æ•°ï¼ˆæ­¤æ—¶çœ‹æˆå¯¹è±¡äº†ï¼‰æœ€ç»ˆçš„æ„é€ å‡½æ•°éƒ½æŒ‡å‘Functionã€‚ åŸºç¡€çŸ¥è¯†__proto__ç¿»è¯‘ä¸ºåŸå‹ï¼Œå¤šä¸ª__proto__ä¸²è¿èµ·æ¥çš„å«åšåŸå‹é“¾ã€‚ prototypeç¿»è¯‘ä¸ºåŸå‹å¯¹è±¡ã€‚ Object.getPrototypeOf()Object.getPrototypeOf() æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼ˆå†…éƒ¨[[Prototype]]å±æ€§çš„å€¼ï¼‰ã€‚ ç¤ºä¾‹123456const prototype1 = &#123;&#125;;const object1 = Object.create(prototype1);console.log(Object.getPrototypeOf(object1) === prototype1);// expected output: trueObject.getPrototypeOf(object1) === object1.__proto__ æ­£å¼å¼€å§‹12function Foo() &#123;...&#125;;let f1 = new Foo(); ä»¥ä¸Šä»£ç è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°Foo()ï¼Œå¹¶ç”¨newå…³é”®å­—å®ä¾‹åŒ–è¯¥æ„é€ å‡½æ•°å¾—åˆ°ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡f1ã€‚è¿™é‡Œç¨å¾®è¡¥å……ä¸€ä¸‹newæ“ä½œç¬¦å°†å‡½æ•°ä½œä¸ºæ„é€ å™¨è¿›è¡Œè°ƒç”¨æ—¶çš„è¿‡ç¨‹ï¼šå‡½æ•°è¢«è°ƒç”¨ï¼Œç„¶åæ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æˆäº†å‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼ˆä¹Ÿå°±æ˜¯æ­¤æ—¶å‡½æ•°å†…éƒ¨çš„thisæ˜¯æŒ‡å‘è¯¥æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å™¨å‡½æ•°å†…éƒ¨é€šè¿‡thiså‚æ•°åˆå§‹åŒ–å€¼ï¼‰ï¼Œæœ€åè¿”å›è¯¥æ–°å¯¹è±¡çš„å¼•ç”¨ã€‚ __proto__å±æ€§é¦–å…ˆè¦è®°ä½ä¸¤ç‚¹ï¼š __proto__å’Œconstructoræ˜¯å¯¹è±¡æ‰æœ‰çš„å±æ€§ï¼Œåœ¨JavaScriptä¸­å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ã€‚ prototypeæ˜¯å‡½æ•°æ‰æœ‰çš„å±æ€§ã€‚ è¿™é‡Œæˆ‘ä»¬ä»…ç•™ä¸‹ __proto__ å±æ€§ï¼Œå®ƒæ˜¯å¯¹è±¡æ‰€ç‹¬æœ‰çš„ï¼Œå¯ä»¥çœ‹åˆ°__proto__å±æ€§éƒ½æ˜¯ç”±ä¸€ä¸ªå¯¹è±¡æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå³æŒ‡å‘å®ƒä»¬æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºçˆ¶å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒçš„ä½œç”¨å°±æ˜¯å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šå»å®ƒçš„__proto__å±æ€§æ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼ˆå¯ä»¥ç†è§£ä¸ºçˆ¶å¯¹è±¡ï¼‰é‡Œæ‰¾ï¼Œå¦‚æœçˆ¶å¯¹è±¡ä¹Ÿä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œåˆ™ç»§ç»­å¾€çˆ¶å¯¹è±¡çš„__proto__å±æ€§æ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼ˆå¯ä»¥ç†è§£ä¸ºçˆ·çˆ·å¯¹è±¡ï¼‰é‡Œæ‰¾ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼Œåˆ™ç»§ç»­å¾€ä¸Šæ‰¾â€¦ç›´åˆ°åŸå‹é“¾é¡¶ç«¯nullï¼ˆå¯ä»¥ç†è§£ä¸ºåŸå§‹äººã€‚ã€‚ã€‚ï¼‰ï¼Œå†å¾€ä¸Šæ‰¾å°±ç›¸å½“äºåœ¨nullä¸Šå–å€¼ï¼Œä¼šæŠ¥é”™ï¼ˆå¯ä»¥ç†è§£ä¸ºï¼Œå†å¾€ä¸Šå°±å·²ç»ä¸æ˜¯â€œäººâ€çš„èŒƒç•´äº†ï¼Œæ‰¾ä¸åˆ°äº†ï¼Œåˆ°æ­¤ç»“æŸï¼Œnullä¸ºåŸå‹é“¾çš„ç»ˆç‚¹ï¼‰ï¼Œç”±ä»¥ä¸Šè¿™ç§é€šè¿‡__proto__å±æ€§æ¥è¿æ¥å¯¹è±¡ç›´åˆ°nullçš„ä¸€æ¡é“¾å³ä¸ºæˆ‘ä»¬æ‰€è°“çš„åŸå‹é“¾ã€‚ å…¶å®æˆ‘ä»¬å¹³æ—¶è°ƒç”¨çš„å­—ç¬¦ä¸²æ–¹æ³•ã€æ•°ç»„æ–¹æ³•ã€å¯¹è±¡æ–¹æ³•ã€å‡½æ•°æ–¹æ³•ç­‰éƒ½æ˜¯é __proto__ç»§æ‰¿è€Œæ¥çš„ã€‚ prototypeå±æ€§ prototypeå±æ€§æ˜¯å‡½æ•°ç‹¬æœ‰çš„ã€‚ä»–æ˜¯ä»ä¸€ä¸ªå‡½æ•°æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä»–çš„å«ä¹‰æ˜¯å‡½æ•°çš„åŸå‹å¯¹è±¡ f1.__proto__ === Foo.prototypeï¼Œå®ƒä»¬ä¸¤ä¸ªå®Œå…¨ä¸€æ ·ã€‚é‚£prototypeå±æ€§çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒçš„ä½œç”¨å°±æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è®©è¯¥å‡½æ•°æ‰€å®ä¾‹åŒ–çš„å¯¹è±¡ä»¬éƒ½å¯ä»¥æ‰¾åˆ°å…¬ç”¨çš„å±æ€§å’Œæ–¹æ³•ã€‚ä»»ä½•å‡½æ•°åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œå…¶å®ä¼šé»˜è®¤åŒæ—¶åˆ›å»ºè¯¥å‡½æ•°çš„prototypeå¯¹è±¡ã€‚ constructorå±æ€§ constructorå±æ€§ä¹Ÿæ˜¯å¯¹è±¡æ‰æ‹¥æœ‰çš„ï¼Œå®ƒæ˜¯ä»ä¸€ä¸ªå¯¹è±¡æŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå«ä¹‰å°±æ˜¯æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰æ„é€ å‡½æ•°ï¼ˆæœ¬èº«æ‹¥æœ‰æˆ–ç»§æ‰¿è€Œæ¥ï¼Œç»§æ‰¿è€Œæ¥çš„è¦ç»“åˆ__proto__å±æ€§æŸ¥çœ‹ä¼šæ›´æ¸…æ¥šç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºFunctionè¿™ä¸ªå¯¹è±¡æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„æ„é€ å‡½æ•°å°±æ˜¯å®ƒè‡ªå·±ï¼ˆå› ä¸ºFunctionå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œæ‰€æœ‰å‡½æ•°å’Œå¯¹è±¡æœ€ç»ˆéƒ½æ˜¯ç”±Functionæ„é€ å‡½æ•°å¾—æ¥ï¼Œæ‰€ä»¥constructorå±æ€§çš„ç»ˆç‚¹å°±æ˜¯Functionè¿™ä¸ªå‡½æ•°ã€‚ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡.__proto__ === è¯¥å‡½æ•°.prototypeï¼Œè¯¥å‡½æ•°.prototype.constructor===è¯¥å‡½æ•°æœ¬èº« å®Œ~","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://zouhualu.github.io/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"åŸå‹é“¾","slug":"åŸå‹é“¾","permalink":"https://zouhualu.github.io/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"}]},{"title":"Vueè‡ªå®šä¹‰å…¨å±€ç»„ä»¶","slug":"Vueè‡ªå®šä¹‰å…¨å±€ç»„ä»¶","date":"2021-06-18T07:15:40.000Z","updated":"2025-11-25T06:34:25.035Z","comments":true,"path":"20210618/Vueè‡ªå®šä¹‰å…¨å±€ç»„ä»¶/","permalink":"https://zouhualu.github.io/20210618/Vue%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6/","excerpt":"","text":"vueè‡ªå®šä¹‰å…¨å±€å¼¹æ¡†ç»„ä»¶ åœ¨componentsæ–‡ä»¶å¤¹ä¸‹æ–°å¢ä¸€ä¸ªç»„ä»¶æ–‡ä»¶å¤¹Dialogï¼Œæ–°å»ºä¸€ä¸ªæ¨¡æ¿ç»„ä»¶Dialog.vue 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110&lt;template&gt; &lt;div class=&quot;u_dialog_panel&quot; @touchmove.stop=&quot;noop&quot;&gt; &lt;div class=&quot;mask&quot; v-if=&quot;visible&quot; @click=&quot;handleClose&quot;&gt;&lt;/div&gt; &lt;transition name=&quot;open&quot;&gt; &lt;div v-if=&quot;visible&quot; class=&quot;dialog_body&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;div class=&quot;btns&quot; v-if=&quot;confirmText || cancleText&quot;&gt; &lt;div class=&quot;cancle btn&quot; v-if=&quot;cancleText&quot; @click=&quot;handleCancle&quot;&gt;&#123;&#123;cancleText&#125;&#125;&lt;/div&gt; &lt;div class=&quot;confirm btn&quot; :style=&quot;confirmStyle&quot; v-if=&quot;confirmText&quot; @click=&quot;handleConfirm&quot;&gt;&#123;&#123;confirmText&#125;&#125;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/transition&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;UDialog&#x27;, props: &#123; visible: &#123; type: Boolean, default: false, required: true &#125;, // ç¡®å®šæŒ‰é’®çš„æ–‡æ¡ˆ confirmText: &#123; type: String, default: &#x27;ç¡®å®š&#x27; &#125;, confirmStyle: &#123; type: String, default: &#x27;&#x27; &#125;, // å–æ¶ˆæŒ‰é’®çš„æ–‡æ¡ˆ cancleText: &#123; type: String, default: &#x27;å–æ¶ˆ&#x27; &#125;, cancleStyle: &#123; type: String, default: &#x27;&#x27; &#125;, &#125;, created () &#123; this.$nextTick(() =&gt; &#123; document.body.insertBefore(this.$el, document.body.lastChild) &#125;) &#125;, beforeDestroy () &#123; document.body.removeChild(this.$el) &#125;, methods: &#123; // å…³é—­å¼¹çª— handleClose () &#123; this.$emit(&#x27;close&#x27;) &#125;, // ç¡®å®šæŒ‰é’® handleConfirm () &#123; this.$emit(&#x27;confirm&#x27;) &#125;, // å–æ¶ˆæŒ‰é’® handleCancle () &#123; this.$emit(&#x27;cancle&#x27;) &#125;, noop () &#123;&#125; &#125;&#125;&lt;/script&gt;&lt;style lang=&quot;less&quot; scoped&gt;.u_dialog_panel &#123; .mask &#123; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.5); position: fixed; left: 0; top: 0; z-index: 100; backdrop-filter: blur(5px); &#125; .dialog_body&#123; width: 80vw; background-color: #fff; position: fixed; left: 50vw; top: 50vh; z-index: 100; transform: translate(-50%, -50%); transform-origin: 0 0; border-radius: .875rem; &amp;.open-enter &#123; opacity: 0; transform: scale(0.7) translate(-50%, -50%); transition: all 0.3s; &#125; &amp;.open-enter-to &#123; opacity: 1; transform: scale(1) translate(-50%, -50%); transition: all 0.3s; &#125; .btns &#123; display: flex; justify-content: space-between; align-items: center; .btn &#123; display: flex; justify-content: center; align-items: center; flex-grow: 1; width: 50%; height: 2.875rem; border-top: 1px solid #ddd; box-sizing: border-box; display: flex; justify-content: center; align-items: center; font-size: .875rem; &amp; + .btn &#123; border-left: 1px solid #ddd; &#125; &amp;.cancle &#123; color: #666666; &#125; &amp;.confirm &#123; color: #FF5883; &#125; &#125; &#125; &#125;&#125;&lt;/style&gt; åœ¨æ­¤æ–‡ä»¶å¤¹å†æ–°å»ºä¸€ä¸ªindex.js 12345678import Dialog from &#x27;./Dialog&#x27;Dialog.install = function (Vue, options) &#123; Vue.component(`$&#123;Dialog.name&#125;`, Dialog)&#125;export default Dialog æœ€åå†main.jsé‡Œæ³¨å†Œä¸ºå…¨å±€ç»„ä»¶ 123import Dialog from &#x27;./components/Dialog/index.js&#x27;Vue.use(Dialog) è¿™æ ·å°±å¯ä»¥åœ¨å…¶ä»–ç»„ä»¶é‡Œæ— éœ€å£°æ˜è€Œä½¿ç”¨æ­¤ç»„ä»¶","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://zouhualu.github.io/tags/Vue/"},{"name":"ç»„ä»¶å¼€å‘","slug":"ç»„ä»¶å¼€å‘","permalink":"https://zouhualu.github.io/tags/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/"}]},{"title":"JavaScriptä¸­çš„å †æ ˆä»¥åŠæ•°æ®ç±»å‹","slug":"JavaScriptä¸­çš„å †æ ˆä»¥åŠæ•°æ®ç±»å‹","date":"2021-06-17T07:08:21.000Z","updated":"2025-11-25T06:32:24.877Z","comments":true,"path":"20210617/JavaScriptä¸­çš„å †æ ˆä»¥åŠæ•°æ®ç±»å‹/","permalink":"https://zouhualu.github.io/20210617/JavaScript%E4%B8%AD%E7%9A%84%E5%A0%86%E6%A0%88%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"JavaScript çš„å †æ ˆä»¥åŠæ•°æ®ç±»å‹æœ¬æ–‡å‚è€ƒæ­¤é“¾æ¥ å † æ˜¯å †å†…å­˜çš„ç®€ç§°ã€‚ éœ€è¦ç¨‹åºå‘˜è‡ªå·±ç”³è¯·ç©ºé—´ï¼Œå†…å­˜å¤§å°ä¸ä¸€ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚ å †æ˜¯å‘é«˜åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚è¿™æ˜¯ç”±äºç³»ç»Ÿæ˜¯ç”¨é“¾è¡¨æ¥å­˜å‚¨ç©ºé—²å†…å­˜åœ°å€çš„ï¼Œè‡ªç„¶æ˜¯ä¸è¿ç»­çš„ï¼Œè€Œé“¾è¡¨çš„éå†æ–¹å‘æ˜¯ç”±ä½åœ°å€å‘é«˜åœ°å€ã€‚å †çš„å¤§å°å—é™äºè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰æ•ˆçš„è™šæ‹Ÿå†…å­˜ã€‚ç”±æ­¤å¯è§ï¼Œå †è·å¾—çš„ç©ºé—´æ¯”è¾ƒçµæ´»ï¼Œä¹Ÿæ¯”è¾ƒå¤§ å †æ˜¯ç”±newåˆ†é…çš„å†…å­˜ï¼Œä¸€èˆ¬é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ æ ˆ æ˜¯æ ˆå†…å­˜çš„ç®€ç§°ã€‚ æ˜¯è‡ªåŠ¨åˆ†é…ç›¸å¯¹å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ç”±ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸåªåœ¨å‡½æ•°çš„è¿è¡Œè¿‡ç¨‹ä¸­ã€‚ åè¿›å…ˆå‡º æ ˆæ˜¯å‘ä½åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€å—è¿ç»­çš„å†…å­˜çš„åŒºåŸŸ é˜Ÿåˆ— æ˜¯åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ’å…¥æ“ä½œã€è€Œåœ¨å¦ä¸€ç«¯è¿›è¡Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨è¡¨çš„å‰ç«¯è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè€Œåœ¨è¡¨çš„åç«¯è¿›è¡Œæ’å…¥æ“ä½œï¼Œå’Œæ ˆä¸€æ ·ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ã€‚ å…ˆè¿›å…ˆå‡º åŸºæœ¬æ•°æ®ç±»å‹javascriptçš„åŸºæœ¬ç±»å‹å°± 5 ç§:Undefinedã€Nullã€Booleanã€Numberå’ŒStringï¼Œå®ƒä»¬éƒ½æ˜¯ç›´æ¥æŒ‰å€¼å­˜å‚¨åœ¨æ ˆä¸­çš„ï¼Œæ¯ç§ç±»å‹çš„æ•°æ®å ç”¨çš„å†…å­˜ç©ºé—´çš„å¤§å°æ˜¯ç¡®å®šçš„ï¼Œå¹¶ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œè‡ªåŠ¨é‡Šæ”¾ã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œå†…å­˜å¯ä»¥åŠæ—¶å¾—åˆ°å›æ”¶ï¼Œç›¸å¯¹äºå †æ¥è¯´ï¼Œæ›´åŠ å®¹æ˜“ç®¡ç†å†…å­˜ç©ºé—´ã€‚ å¼•ç”¨æ•°æ®ç±»å‹javascriptä¸­å…¶ä»–ç±»å‹çš„æ•°æ®è¢«ç§°ä¸ºå¼•ç”¨ç±»å‹çš„æ•°æ® : å¦‚å¯¹è±¡(Object)ã€æ•°ç»„(Array)ã€å‡½æ•°(Function) â€¦ï¼Œå®ƒä»¬æ˜¯é€šè¿‡æ‹·è´å’Œ new å‡ºæ¥çš„ï¼Œè¿™æ ·çš„æ•°æ®å­˜å‚¨äºå †ä¸­ã€‚å…¶å®ï¼Œè¯´å­˜å‚¨äºå †ä¸­ï¼Œä¹Ÿä¸å¤ªå‡†ç¡®ï¼Œå› ä¸ºï¼Œå¼•ç”¨ç±»å‹çš„æ•°æ®çš„åœ°å€æŒ‡é’ˆæ˜¯å­˜å‚¨äºæ ˆä¸­çš„ï¼Œå½“æˆ‘ä»¬æƒ³è¦è®¿é—®å¼•ç”¨ç±»å‹çš„å€¼çš„æ—¶å€™ï¼Œéœ€è¦å…ˆä»æ ˆä¸­è·å¾—å¯¹è±¡çš„åœ°å€æŒ‡é’ˆï¼Œç„¶åï¼Œåœ¨é€šè¿‡åœ°å€æŒ‡é’ˆæ‰¾åˆ°å †ä¸­çš„æ‰€éœ€è¦çš„æ•°æ®ã€‚ ä¼ å€¼ä¸ä¼ å€123456789var arr1 = [1, 2, 5, 8];var arr2 = arr1;var str1 = arr1[2];console.log(arr2); //1,2,5,8console.log(str1); //5arr2[4] = 99;str1 = 6;console.log(arr1); //1,2,5,8,99console.log(arr1[2]); //5 å½“æˆ‘æ”¹å˜ arr2 ä¸­çš„æ•°æ®æ—¶ï¼Œarr1 ä¸­æ•°æ®ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œå½“æ”¹å˜ str1 çš„æ•°æ®å€¼æ—¶ï¼Œarr1 å´æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚ä¸ºä»€ä¹ˆï¼Ÿè¿™å°±æ˜¯ä¼ å€¼ä¸ä¼ å€çš„åŒºåˆ«ã€‚ å› ä¸º arr1 æ˜¯æ•°ç»„ï¼Œå±äºå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥å®ƒèµ‹äºˆç»™ arr2 çš„æ—¶å€™ä¼ çš„æ˜¯æ ˆä¸­çš„åœ°å€ï¼ˆç›¸å½“äºæ–°å»ºäº†ä¸€ä¸ªä¸åŒåâ€œæŒ‡é’ˆâ€ï¼‰ï¼Œè€Œä¸æ˜¯å †å†…å­˜ä¸­çš„å¯¹è±¡çš„å€¼ã€‚str1 å¾—åˆ°çš„æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„èµ‹å€¼ï¼Œå› æ­¤ï¼Œstr1 ä»…ä»…æ˜¯ä» arr1 å †å†…å­˜ä¸­è·å–äº†ä¸€ä¸ªæ•°å€¼ï¼Œå¹¶ç›´æ¥ä¿å­˜åœ¨æ ˆä¸­ã€‚arr1ã€arr2 éƒ½æŒ‡å‘åŒä¸€å—å †å†…å­˜ï¼Œarr2 ä¿®æ”¹çš„å †å†…å­˜çš„æ—¶å€™ï¼Œä¹Ÿå°±ä¼šå½±å“åˆ° arr1ï¼Œstr1 æ˜¯ç›´æ¥åœ¨æ ˆä¸­ä¿®æ”¹ï¼Œå¹¶ä¸”ä¸èƒ½å½±å“åˆ° arr1 å †å†…å­˜ä¸­çš„æ•°æ®ã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´ä¸Šè¾¹è¯´åˆ°çš„èµ‹å€¼æ–¹å¼å°±æ˜¯æµ…æ‹·è´ï¼Œé‚£ä¹ˆä»€ä¹ˆå«ä½œæ·±æ‹·è´å‘¢ï¼Ÿå°±æ˜¯è¦å°† arr1 çš„æ¯ä¸ªåŸºæœ¬ç±»å‹çš„æ•°æ®éƒ½éå†ä¸€éï¼Œä¾æ¬¡çš„èµ‹å€¼ç»™ arr2 çš„å¯¹åº”å­—æ®µã€‚é¿å…äº§ç”Ÿå› ä¸ºåœ°å€å¼•ç”¨å¸¦æ¥çš„é—®é¢˜ã€‚ 123456789var arr1 = [1, 2, 5, 8];var arr2 = [];for (var i = 0; i &lt; arr1.length; i++) &#123; arr2[i] = arr1[i];&#125;console.log(arr2); //1,2,5,8arr2[4] = 99;console.log(arr2); //1,2,5,8,99console.log(arr1); //1,2,5,8 javascript é¢å‘å¯¹è±¡çš„è¯­è¨€æœ¬èº«åœ¨å¤„ç†å¯¹è±¡å’Œéå¯¹è±¡ä¸Šå°±è¿›è¡Œäº†åˆ’åˆ†ï¼Œä»æ•°æ®ç»“æ„çš„è§’åº¦æ¥è®²ï¼Œå¯¹è±¡å°±æ˜¯æ ˆçš„æŒ‡é’ˆå’Œå †ä¸­çš„æ•°å€¼ã€‚ å®Œ~","categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"æ•°æ®ç±»å‹","slug":"æ•°æ®ç±»å‹","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"name":"å†…å­˜ç®¡ç†","slug":"å†…å­˜ç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"}]}],"categories":[{"name":"ç”Ÿæ´»éšç¬”","slug":"ç”Ÿæ´»éšç¬”","permalink":"https://zouhualu.github.io/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"},{"name":"AI ä¸å·¥å…·","slug":"AI-ä¸å·¥å…·","permalink":"https://zouhualu.github.io/categories/AI-%E4%B8%8E%E5%B7%A5%E5%85%B7/"},{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"},{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/categories/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"},{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","permalink":"https://zouhualu.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"},{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zouhualu.github.io/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://zouhualu.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"https://zouhualu.github.io/tags/%E6%97%A5%E5%B8%B8/"},{"name":"äººç”Ÿç®¡ç†","slug":"äººç”Ÿç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E4%BA%BA%E7%94%9F%E7%AE%A1%E7%90%86/"},{"name":"AI","slug":"AI","permalink":"https://zouhualu.github.io/tags/AI/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"ç¼–ç¨‹è¾…åŠ©","slug":"ç¼–ç¨‹è¾…åŠ©","permalink":"https://zouhualu.github.io/tags/%E7%BC%96%E7%A8%8B%E8%BE%85%E5%8A%A9/"},{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://zouhualu.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://zouhualu.github.io/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"},{"name":"Vite","slug":"Vite","permalink":"https://zouhualu.github.io/tags/Vite/"},{"name":"React","slug":"React","permalink":"https://zouhualu.github.io/tags/React/"},{"name":"React19","slug":"React19","permalink":"https://zouhualu.github.io/tags/React19/"},{"name":"æ–°ç‰¹æ€§","slug":"æ–°ç‰¹æ€§","permalink":"https://zouhualu.github.io/tags/%E6%96%B0%E7%89%B9%E6%80%A7/"},{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"https://zouhualu.github.io/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"},{"name":"Hooks","slug":"Hooks","permalink":"https://zouhualu.github.io/tags/Hooks/"},{"name":"Vue","slug":"Vue","permalink":"https://zouhualu.github.io/tags/Vue/"},{"name":"å“åº”å¼","slug":"å“åº”å¼","permalink":"https://zouhualu.github.io/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"},{"name":"Babel","slug":"Babel","permalink":"https://zouhualu.github.io/tags/Babel/"},{"name":"ç¼–è¯‘å·¥å…·","slug":"ç¼–è¯‘å·¥å…·","permalink":"https://zouhualu.github.io/tags/%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7/"},{"name":"çŠ¶æ€ç®¡ç†","slug":"çŠ¶æ€ç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/"},{"name":"Zustand","slug":"Zustand","permalink":"https://zouhualu.github.io/tags/Zustand/"},{"name":"Webpack","slug":"Webpack","permalink":"https://zouhualu.github.io/tags/Webpack/"},{"name":"Vue Router","slug":"Vue-Router","permalink":"https://zouhualu.github.io/tags/Vue-Router/"},{"name":"è·¯ç”±","slug":"è·¯ç”±","permalink":"https://zouhualu.github.io/tags/%E8%B7%AF%E7%94%B1/"},{"name":"Next.js","slug":"Next-js","permalink":"https://zouhualu.github.io/tags/Next-js/"},{"name":"SSR","slug":"SSR","permalink":"https://zouhualu.github.io/tags/SSR/"},{"name":"TypeScript","slug":"TypeScript","permalink":"https://zouhualu.github.io/tags/TypeScript/"},{"name":"ç±»å‹ç³»ç»Ÿ","slug":"ç±»å‹ç³»ç»Ÿ","permalink":"https://zouhualu.github.io/tags/%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/"},{"name":"Golang","slug":"Golang","permalink":"https://zouhualu.github.io/tags/Golang/"},{"name":"åç«¯å¼€å‘","slug":"åç«¯å¼€å‘","permalink":"https://zouhualu.github.io/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"},{"name":"Pinia","slug":"Pinia","permalink":"https://zouhualu.github.io/tags/Pinia/"},{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"https://zouhualu.github.io/tags/%E8%A7%84%E8%8C%83/"},{"name":"æœ€ä½³å®è·µ","slug":"æœ€ä½³å®è·µ","permalink":"https://zouhualu.github.io/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"},{"name":"Nginx","slug":"Nginx","permalink":"https://zouhualu.github.io/tags/Nginx/"},{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://zouhualu.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"name":"åå‘ä»£ç†","slug":"åå‘ä»£ç†","permalink":"https://zouhualu.github.io/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://zouhualu.github.io/tags/%E9%9D%A2%E8%AF%95/"},{"name":"CSS","slug":"CSS","permalink":"https://zouhualu.github.io/tags/CSS/"},{"name":"å“åº”å¼å¸ƒå±€","slug":"å“åº”å¼å¸ƒå±€","permalink":"https://zouhualu.github.io/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/"},{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"https://zouhualu.github.io/tags/%E6%80%BB%E7%BB%93/"},{"name":"å¹´åº¦æ€»ç»“","slug":"å¹´åº¦æ€»ç»“","permalink":"https://zouhualu.github.io/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://zouhualu.github.io/tags/JavaScript/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","permalink":"https://zouhualu.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"name":"Promise","slug":"Promise","permalink":"https://zouhualu.github.io/tags/Promise/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://zouhualu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"ES6","slug":"ES6","permalink":"https://zouhualu.github.io/tags/ES6/"},{"name":"è£…é¥°å™¨","slug":"è£…é¥°å™¨","permalink":"https://zouhualu.github.io/tags/%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://zouhualu.github.io/tags/%E7%AC%94%E8%AE%B0/"},{"name":"äº‹ä»¶å¾ªç¯","slug":"äº‹ä»¶å¾ªç¯","permalink":"https://zouhualu.github.io/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"},{"name":"Git","slug":"Git","permalink":"https://zouhualu.github.io/tags/Git/"},{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://zouhualu.github.io/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"},{"name":"è„šæ‰‹æ¶","slug":"è„šæ‰‹æ¶","permalink":"https://zouhualu.github.io/tags/%E8%84%9A%E6%89%8B%E6%9E%B6/"},{"name":"è¸©å‘","slug":"è¸©å‘","permalink":"https://zouhualu.github.io/tags/%E8%B8%A9%E5%9D%91/"},{"name":"æ‰‹å†™å®ç°","slug":"æ‰‹å†™å®ç°","permalink":"https://zouhualu.github.io/tags/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0/"},{"name":"thisç»‘å®š","slug":"thisç»‘å®š","permalink":"https://zouhualu.github.io/tags/this%E7%BB%91%E5%AE%9A/"},{"name":"æ•°ç»„","slug":"æ•°ç»„","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E7%BB%84/"},{"name":"ç±»å‹åˆ¤æ–­","slug":"ç±»å‹åˆ¤æ–­","permalink":"https://zouhualu.github.io/tags/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://zouhualu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","permalink":"https://zouhualu.github.io/tags/%E4%BA%92%E8%81%94%E7%BD%91/"},{"name":"ç”µå½±","slug":"ç”µå½±","permalink":"https://zouhualu.github.io/tags/%E7%94%B5%E5%BD%B1/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://zouhualu.github.io/tags/%E6%A0%88/"},{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","permalink":"https://zouhualu.github.io/tags/%E9%98%9F%E5%88%97/"},{"name":"Node.js","slug":"Node-js","permalink":"https://zouhualu.github.io/tags/Node-js/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://zouhualu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"å‡½æ•°","slug":"å‡½æ•°","permalink":"https://zouhualu.github.io/tags/%E5%87%BD%E6%95%B0/"},{"name":"å…³äºæˆ‘","slug":"å…³äºæˆ‘","permalink":"https://zouhualu.github.io/tags/%E5%85%B3%E4%BA%8E%E6%88%91/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://zouhualu.github.io/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"name":"æ¨¡å—åŒ–","slug":"æ¨¡å—åŒ–","permalink":"https://zouhualu.github.io/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/"},{"name":"åŸç†è§£æ","slug":"åŸç†è§£æ","permalink":"https://zouhualu.github.io/tags/%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"},{"name":"åŸå‹é“¾","slug":"åŸå‹é“¾","permalink":"https://zouhualu.github.io/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"},{"name":"ç»„ä»¶å¼€å‘","slug":"ç»„ä»¶å¼€å‘","permalink":"https://zouhualu.github.io/tags/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/"},{"name":"æ•°æ®ç±»å‹","slug":"æ•°æ®ç±»å‹","permalink":"https://zouhualu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"name":"å†…å­˜ç®¡ç†","slug":"å†…å­˜ç®¡ç†","permalink":"https://zouhualu.github.io/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"}]}